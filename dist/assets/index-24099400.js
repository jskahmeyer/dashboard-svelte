var sv=Object.defineProperty;var iv=(e,t,n)=>t in e?sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rv=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var z=(e,t,n)=>(iv(e,typeof t!="symbol"?t+"":t,n),n);var _O=rv((xO,wa)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function V(){}const Rp=e=>e;function Xt(e,t){for(const n in t)e[n]=t[n];return e}function ov(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Cp(e){return e()}function Pd(){return Object.create(null)}function Re(e){e.forEach(Cp)}function Di(e){return typeof e=="function"}function xt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Co;function Md(e,t){return Co||(Co=document.createElement("a")),Co.href=t,e===Co.href}function av(e){return Object.keys(e).length===0}function Dp(e,...t){if(e==null)return V;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ke(e,t,n){e.$$.on_destroy.push(Dp(t,n))}function Ns(e,t,n,s){if(e){const i=Op(e,t,n,s);return e[0](i)}}function Op(e,t,n,s){return e[1]&&s?Xt(n.ctx.slice(),e[1](s(t))):n.ctx}function Fs(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=t.dirty[a]|i[a];return r}return t.dirty|i}return t.dirty}function $s(e,t,n,s,i,r){if(i){const o=Op(t,n,s,r);e.p(o,i)}}function Bs(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let s=0;s<n;s++)t[s]=-1;return t}return-1}function Ge(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Rd(e,t){const n={};t=new Set(t);for(const s in e)!t.has(s)&&s[0]!=="$"&&(n[s]=e[s]);return n}function Cd(e){return e??""}function qi(e){return e&&Di(e.destroy)?e.destroy:V}const Vp=typeof window<"u";let Lp=Vp?()=>window.performance.now():()=>Date.now(),Nu=Vp?e=>requestAnimationFrame(e):V;const li=new Set;function Np(e){li.forEach(t=>{t.c(e)||(li.delete(t),t.f())}),li.size!==0&&Nu(Np)}function Fp(e){let t;return li.size===0&&Nu(Np),{promise:new Promise(n=>{li.add(t={c:e,f:n})}),abort(){li.delete(t)}}}function v(e,t){e.appendChild(t)}function $p(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function lv(e){const t=b("style");return cv($p(e),t),t.sheet}function cv(e,t){return v(e.head||e,t),t.sheet}function D(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function ci(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function Te(e){return document.createTextNode(e)}function L(){return Te(" ")}function yn(){return Te("")}function Tt(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Fu(e){return function(t){return t.preventDefault(),e.call(this,t)}}function uv(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function hv(e){return function(t){t.target===this&&e.call(this,t)}}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const dv=["width","height"];function Bc(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:n[s]&&n[s].set&&dv.indexOf(s)===-1?e[s]=t[s]:y(e,s,t[s])}function bi(e){return e===""?null:+e}function fv(e){return Array.from(e.childNodes)}function Pr(e,t){t=""+t,e.data!==t&&(e.data=t)}function Zt(e,t){e.value=t??""}function ri(e,t,n){for(let s=0;s<e.options.length;s+=1){const i=e.options[s];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function zc(e){const t=e.querySelector(":checked");return t&&t.__value}function Dd(e,t,n){e.classList[n?"add":"remove"](t)}function Bp(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}function Od(e,t){return new e(t)}const Ta=new Map;let Ea=0;function gv(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function pv(e,t){const n={stylesheet:lv(t),rules:{}};return Ta.set(e,n),n}function zp(e,t,n,s,i,r,o,a=0){const l=16.666/s;let c=`{
`;for(let p=0;p<=1;p+=l){const _=t+(n-t)*r(p);c+=p*100+`%{${o(_,1-_)}}
`}const u=c+`100% {${o(n,1-n)}}
}`,h=`__svelte_${gv(u)}_${a}`,d=$p(e),{stylesheet:f,rules:g}=Ta.get(d)||pv(d,e);g[h]||(g[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${s}ms linear ${i}ms 1 both`,Ea+=1,h}function Uc(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=n.length-s.length;i&&(e.style.animation=s.join(", "),Ea-=i,Ea||mv())}function mv(){Nu(()=>{Ea||(Ta.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&R(t)}),Ta.clear())})}let wi;function In(e){wi=e}function zs(){if(!wi)throw new Error("Function called outside component initialization");return wi}function $u(e){zs().$$.on_mount.push(e)}function _v(e){zs().$$.after_update.push(e)}function rl(e){zs().$$.on_destroy.push(e)}function yv(){const e=zs();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=Bp(t,n,{cancelable:s});return i.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}function ic(e,t){return zs().$$.context.set(e,t),t}function ui(e){return zs().$$.context.get(e)}function Up(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(s=>s.call(this,t))}const ti=[],Ke=[];let hi=[];const Wc=[],vv=Promise.resolve();let jc=!1;function bv(){jc||(jc=!0,vv.then(Bu))}function On(e){hi.push(e)}function ol(e){Wc.push(e)}const rc=new Set;let Gs=0;function Bu(){if(Gs!==0)return;const e=wi;do{try{for(;Gs<ti.length;){const t=ti[Gs];Gs++,In(t),wv(t.$$)}}catch(t){throw ti.length=0,Gs=0,t}for(In(null),ti.length=0,Gs=0;Ke.length;)Ke.pop()();for(let t=0;t<hi.length;t+=1){const n=hi[t];rc.has(n)||(rc.add(n),n())}hi.length=0}while(ti.length);for(;Wc.length;)Wc.pop()();jc=!1,rc.clear(),In(e)}function wv(e){if(e.fragment!==null){e.update(),Re(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(On)}}function Tv(e){const t=[],n=[];hi.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),hi=t}let Gi;function Wp(){return Gi||(Gi=Promise.resolve(),Gi.then(()=>{Gi=null})),Gi}function xa(e,t,n){e.dispatchEvent(Bp(`${t?"intro":"outro"}${n}`))}const aa=new Set;let Wn;function Oi(){Wn={r:0,c:[],p:Wn}}function Vi(){Wn.r||Re(Wn.c),Wn=Wn.p}function N(e,t){e&&e.i&&(aa.delete(e),e.i(t))}function $(e,t,n,s){if(e&&e.o){if(aa.has(e))return;aa.add(e),Wn.c.push(()=>{aa.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const jp={duration:0};function Ev(e,t,n){const s={direction:"in"};let i=t(e,n,s),r=!1,o,a,l=0;function c(){o&&Uc(e,o)}function u(){const{delay:d=0,duration:f=300,easing:g=Rp,tick:m=V,css:p}=i||jp;p&&(o=zp(e,0,1,f,d,g,p,l++)),m(0,1);const _=Lp()+d,w=_+f;a&&a.abort(),r=!0,On(()=>xa(e,!0,"start")),a=Fp(T=>{if(r){if(T>=w)return m(1,0),xa(e,!0,"end"),c(),r=!1;if(T>=_){const S=g((T-_)/f);m(S,1-S)}}return r})}let h=!1;return{start(){h||(h=!0,Uc(e),Di(i)?(i=i(s),Wp().then(u)):u())},invalidate(){h=!1},end(){r&&(c(),r=!1)}}}function xv(e,t,n){const s={direction:"out"};let i=t(e,n,s),r=!0,o;const a=Wn;a.r+=1;function l(){const{delay:c=0,duration:u=300,easing:h=Rp,tick:d=V,css:f}=i||jp;f&&(o=zp(e,1,0,u,c,h,f));const g=Lp()+c,m=g+u;On(()=>xa(e,!1,"start")),Fp(p=>{if(r){if(p>=m)return d(0,1),xa(e,!1,"end"),--a.r||Re(a.c),!1;if(p>=g){const _=h((p-g)/u);d(1-_,_)}}return r})}return Di(i)?Wp().then(()=>{i=i(s),l()}):l(),{end(c){c&&i.tick&&i.tick(1,0),r&&(o&&Uc(e,o),r=!1)}}}function Ti(e,t){const n=t.token={};function s(i,r,o,a){if(t.token!==n)return;t.resolved=a;let l=t.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=i&&(t.current=i)(l);let u=!1;t.block&&(t.blocks?t.blocks.forEach((h,d)=>{d!==r&&h&&(Oi(),$(h,1,1,()=>{t.blocks[d]===h&&(t.blocks[d]=null)}),Vi())}):t.block.d(1),c.c(),N(c,1),c.m(t.mount(),t.anchor),u=!0),t.block=c,t.blocks&&(t.blocks[r]=c),u&&Bu()}if(ov(e)){const i=zs();if(e.then(r=>{In(i),s(t.then,1,t.value,r),In(null)},r=>{if(In(i),s(t.catch,2,t.error,r),In(null),!t.hasCatch)throw r}),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}}function lo(e,t,n){const s=t.slice(),{resolved:i}=e;e.current===e.then&&(s[e.value]=i),e.current===e.catch&&(s[e.error]=i),e.block.p(s,n)}function co(e,t){const n={},s={},i={$$scope:1};let r=e.length;for(;r--;){const o=e[r],a=t[r];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);e[r]=a}else for(const l in o)i[l]=1}for(const o in s)o in n||(n[o]=void 0);return n}function Mr(e){return typeof e=="object"&&e!==null?e:{}}function al(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function Q(e){e&&e.c()}function G(e,t,n,s){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),s||On(()=>{const o=e.$$.on_mount.map(Cp).filter(Di);e.$$.on_destroy?e.$$.on_destroy.push(...o):Re(o),e.$$.on_mount=[]}),r.forEach(On)}function K(e,t){const n=e.$$;n.fragment!==null&&(Tv(n.after_update),Re(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Sv(e,t){e.$$.dirty[0]===-1&&(ti.push(e),bv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rt(e,t,n,s,i,r,o,a=[-1]){const l=wi;In(e);const c=e.$$={fragment:null,ctx:[],props:r,update:V,not_equal:i,bound:Pd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Pd(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(h,d,...f)=>{const g=f.length?f[0]:d;return c.ctx&&i(c.ctx[h],c.ctx[h]=g)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](g),u&&Sv(e,h)),d}):[],c.update(),u=!0,Re(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const h=fv(t.target);c.fragment&&c.fragment.l(h),h.forEach(R)}else c.fragment&&c.fragment.c();t.intro&&N(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),Bu()}In(l)}class Ct{$destroy(){K(this,1),this.$destroy=V}$on(t,n){if(!Di(n))return V;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!av(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Hc={},Sa={},Hp={},Yp=/^:(.+)/,Vd=4,kv=3,Av=2,Iv=1,Pv=1,Rr=e=>e.replace(/(^\/+|\/+$)/g,"").split("/"),oc=e=>e.replace(/(^\/+|\/+$)/g,""),Mv=(e,t)=>{const n=e.default?0:Rr(e.path).reduce((s,i)=>(s+=Vd,i===""?s+=Pv:Yp.test(i)?s+=Av:i[0]==="*"?s-=Vd+Iv:s+=kv,s),0);return{route:e,score:n,index:t}},Rv=e=>e.map(Mv).sort((t,n)=>t.score<n.score?1:t.score>n.score?-1:t.index-n.index),Ld=(e,t)=>{let n,s;const[i]=t.split("?"),r=Rr(i),o=r[0]==="",a=Rv(e);for(let l=0,c=a.length;l<c;l++){const u=a[l].route;let h=!1;if(u.default){s={route:u,params:{},uri:t};continue}const d=Rr(u.path),f={},g=Math.max(r.length,d.length);let m=0;for(;m<g;m++){const p=d[m],_=r[m];if(p&&p[0]==="*"){const T=p==="*"?"*":p.slice(1);f[T]=r.slice(m).map(decodeURIComponent).join("/");break}if(typeof _>"u"){h=!0;break}const w=Yp.exec(p);if(w&&!o){const T=decodeURIComponent(_);f[w[1]]=T}else if(p!==_){h=!0;break}}if(!h){n={route:u,params:f,uri:"/"+r.slice(0,m).join("/")};break}}return n||s||null},ac=(e,t)=>e+(t?`?${t}`:""),Cv=(e,t)=>{if(e.startsWith("/"))return e;const[n,s]=e.split("?"),[i]=t.split("?"),r=Rr(n),o=Rr(i);if(r[0]==="")return ac(i,s);if(!r[0].startsWith(".")){const c=o.concat(r).join("/");return ac((i==="/"?"":"/")+c,s)}const a=o.concat(r),l=[];return a.forEach(c=>{c===".."?l.pop():c!=="."&&l.push(c)}),ac("/"+l.join("/"),s)},Nd=(e,t)=>`${oc(t==="/"?e:`${oc(e)}/${oc(t)}`)}/`,Dv=e=>!e.defaultPrevented&&e.button===0&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),qp=()=>typeof window<"u"&&"document"in window&&"location"in window,Ov=e=>({active:e&4}),Fd=e=>({active:!!e[2]});function Vv(e){let t,n,s,i;const r=e[17].default,o=Ns(r,e,e[16],Fd);let a=[{href:e[0]},{"aria-current":e[2]},e[1],e[6]],l={};for(let c=0;c<a.length;c+=1)l=Xt(l,a[c]);return{c(){t=b("a"),o&&o.c(),Bc(t,l)},m(c,u){D(c,t,u),o&&o.m(t,null),n=!0,s||(i=Tt(t,"click",e[5]),s=!0)},p(c,[u]){o&&o.p&&(!n||u&65540)&&$s(o,r,c,c[16],n?Fs(r,c[16],u,Ov):Bs(c[16]),Fd),Bc(t,l=co(a,[(!n||u&1)&&{href:c[0]},(!n||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){n||(N(o,c),n=!0)},o(c){$(o,c),n=!1},d(c){c&&R(t),o&&o.d(c),s=!1,i()}}}function Lv(e,t,n){let s;const i=["to","replace","state","getProps","preserveScroll"];let r=Rd(t,i),o,a,{$$slots:l={},$$scope:c}=t,{to:u="#"}=t,{replace:h=!1}=t,{state:d={}}=t,{getProps:f=()=>({})}=t,{preserveScroll:g=!1}=t;const m=ui(Hc);ke(e,m,x=>n(14,o=x));const{base:p}=ui(Sa);ke(e,p,x=>n(15,a=x));const{navigate:_}=ui(Hp),w=yv();let T,S,E,I;const A=x=>{if(w("click",x),Dv(x)){x.preventDefault();const k=o.pathname===T||h;_(T,{state:d,replace:k,preserveScroll:g})}};return e.$$set=x=>{t=Xt(Xt({},t),Ge(x)),n(6,r=Rd(t,i)),"to"in x&&n(7,u=x.to),"replace"in x&&n(8,h=x.replace),"state"in x&&n(9,d=x.state),"getProps"in x&&n(10,f=x.getProps),"preserveScroll"in x&&n(11,g=x.preserveScroll),"$$scope"in x&&n(16,c=x.$$scope)},e.$$.update=()=>{e.$$.dirty&32896&&n(0,T=u==="/"?a.uri:Cv(u,a.uri)),e.$$.dirty&16385&&n(12,S=o.pathname.startsWith(T)),e.$$.dirty&16385&&n(13,E=T===o.pathname),e.$$.dirty&8192&&n(2,s=E?"page":void 0),n(1,I=f({location:o,href:T,isPartiallyCurrent:S,isCurrent:E,existingProps:r}))},[T,I,s,m,p,A,r,u,h,d,f,g,S,E,o,a,c,l]}class Ki extends Ct{constructor(t){super(),Rt(this,t,Lv,Vv,xt,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const Nv=e=>({params:e&4}),$d=e=>({params:e[2]});function Bd(e){let t,n,s,i;const r=[$v,Fv],o=[];function a(l,c){return l[0]?0:1}return t=a(e),n=o[t]=r[t](e),{c(){n.c(),s=yn()},m(l,c){o[t].m(l,c),D(l,s,c),i=!0},p(l,c){let u=t;t=a(l),t===u?o[t].p(l,c):(Oi(),$(o[u],1,1,()=>{o[u]=null}),Vi(),n=o[t],n?n.p(l,c):(n=o[t]=r[t](l),n.c()),N(n,1),n.m(s.parentNode,s))},i(l){i||(N(n),i=!0)},o(l){$(n),i=!1},d(l){o[t].d(l),l&&R(s)}}}function Fv(e){let t;const n=e[8].default,s=Ns(n,e,e[7],$d);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),t=!0},p(i,r){s&&s.p&&(!t||r&132)&&$s(s,n,i,i[7],t?Fs(n,i[7],r,Nv):Bs(i[7]),$d)},i(i){t||(N(s,i),t=!0)},o(i){$(s,i),t=!1},d(i){s&&s.d(i)}}}function $v(e){let t,n,s,i={ctx:e,current:null,token:null,hasCatch:!1,pending:Uv,then:zv,catch:Bv,value:12,blocks:[,,,]};return Ti(n=e[0],i),{c(){t=yn(),i.block.c()},m(r,o){D(r,t,o),i.block.m(r,i.anchor=o),i.mount=()=>t.parentNode,i.anchor=t,s=!0},p(r,o){e=r,i.ctx=e,o&1&&n!==(n=e[0])&&Ti(n,i)||lo(i,e,o)},i(r){s||(N(i.block),s=!0)},o(r){for(let o=0;o<3;o+=1){const a=i.blocks[o];$(a)}s=!1},d(r){r&&R(t),i.block.d(r),i.token=null,i=null}}}function Bv(e){return{c:V,m:V,p:V,i:V,o:V,d:V}}function zv(e){var a;let t,n,s;const i=[e[2],e[3]];var r=((a=e[12])==null?void 0:a.default)||e[12];function o(l){let c={};for(let u=0;u<i.length;u+=1)c=Xt(c,i[u]);return{props:c}}return r&&(t=Od(r,o())),{c(){t&&Q(t.$$.fragment),n=yn()},m(l,c){t&&G(t,l,c),D(l,n,c),s=!0},p(l,c){var h;const u=c&12?co(i,[c&4&&Mr(l[2]),c&8&&Mr(l[3])]):{};if(c&1&&r!==(r=((h=l[12])==null?void 0:h.default)||l[12])){if(t){Oi();const d=t;$(d.$$.fragment,1,0,()=>{K(d,1)}),Vi()}r?(t=Od(r,o()),Q(t.$$.fragment),N(t.$$.fragment,1),G(t,n.parentNode,n)):t=null}else r&&t.$set(u)},i(l){s||(t&&N(t.$$.fragment,l),s=!0)},o(l){t&&$(t.$$.fragment,l),s=!1},d(l){l&&R(n),t&&K(t,l)}}}function Uv(e){return{c:V,m:V,p:V,i:V,o:V,d:V}}function Wv(e){let t,n,s=e[1]&&e[1].route===e[5]&&Bd(e);return{c(){s&&s.c(),t=yn()},m(i,r){s&&s.m(i,r),D(i,t,r),n=!0},p(i,[r]){i[1]&&i[1].route===i[5]?s?(s.p(i,r),r&2&&N(s,1)):(s=Bd(i),s.c(),N(s,1),s.m(t.parentNode,t)):s&&(Oi(),$(s,1,1,()=>{s=null}),Vi())},i(i){n||(N(s),n=!0)},o(i){$(s),n=!1},d(i){s&&s.d(i),i&&R(t)}}}function jv(e,t,n){let s,{$$slots:i={},$$scope:r}=t,{path:o=""}=t,{component:a=null}=t,l={},c={};const{registerRoute:u,unregisterRoute:h,activeRoute:d}=ui(Sa);ke(e,d,g=>n(1,s=g));const f={path:o,default:o===""};return u(f),rl(()=>{h(f)}),e.$$set=g=>{n(11,t=Xt(Xt({},t),Ge(g))),"path"in g&&n(6,o=g.path),"component"in g&&n(0,a=g.component),"$$scope"in g&&n(7,r=g.$$scope)},e.$$.update=()=>{if(s&&s.route===f){n(2,l=s.params);const{component:g,path:m,...p}=t;n(3,c=p),g&&(g.toString().startsWith("class ")?n(0,a=g):n(0,a=g())),qp()&&!s.preserveScroll&&(window==null||window.scrollTo(0,0))}},t=Ge(t),[a,s,l,c,d,f,o,r,i]}class Do extends Ct{constructor(t){super(),Rt(this,t,jv,Wv,xt,{path:6,component:0})}}const Ks=[];function Hv(e,t){return{subscribe:on(e,t).subscribe}}function on(e,t=V){let n;const s=new Set;function i(a){if(xt(e,a)&&(e=a,n)){const l=!Ks.length;for(const c of s)c[1](),Ks.push(c,e);if(l){for(let c=0;c<Ks.length;c+=2)Ks[c][0](Ks[c+1]);Ks.length=0}}}function r(a){i(a(e))}function o(a,l=V){const c=[a,l];return s.add(c),s.size===1&&(n=t(i)||V),a(e),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:o}}function Yv(e,t,n){const s=!Array.isArray(e),i=s?[e]:e,r=t.length<2;return Hv(n,o=>{let a=!1;const l=[];let c=0,u=V;const h=()=>{if(c)return;u();const f=t(s?l[0]:l,o);r?o(f):u=Di(f)?f:V},d=i.map((f,g)=>Dp(f,m=>{l[g]=m,c&=~(1<<g),a&&h()},()=>{c|=1<<g}));return a=!0,h(),function(){Re(d),u(),a=!1}})}const lc=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),qv=e=>{const t=[];let n=lc(e);return{get location(){return n},listen(s){t.push(s);const i=()=>{n=lc(e),s({location:n,action:"POP"})};return e.addEventListener("popstate",i),()=>{e.removeEventListener("popstate",i);const r=t.indexOf(s);t.splice(r,1)}},navigate(s,{state:i,replace:r=!1,preserveScroll:o=!1}={}){i={...i,key:Date.now()+""};try{r?e.history.replaceState(i,"",s):e.history.pushState(i,"",s)}catch{e.location[r?"replace":"assign"](s)}n=lc(e),t.forEach(a=>a({location:n,action:"PUSH",preserveScroll:o})),document.activeElement.blur()}}},Gv=(e="/")=>{let t=0;const n=[{pathname:e,search:""}],s=[];return{get location(){return n[t]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return n},get index(){return t},get state(){return s[t]},pushState(i,r,o){const[a,l=""]=o.split("?");t++,n.push({pathname:a,search:l}),s.push(i)},replaceState(i,r,o){const[a,l=""]=o.split("?");n[t]={pathname:a,search:l},s[t]=i}}}},Kv=qv(qp()?window:Gv()),Qv=e=>({route:e&4,location:e&2}),zd=e=>({route:e[2]&&e[2].uri,location:e[1]}),Xv=e=>({route:e&4,location:e&2}),Ud=e=>({route:e[2]&&e[2].uri,location:e[1]});function Jv(e){let t;const n=e[15].default,s=Ns(n,e,e[14],zd);return{c(){s&&s.c()},m(i,r){s&&s.m(i,r),t=!0},p(i,r){s&&s.p&&(!t||r&16390)&&$s(s,n,i,i[14],t?Fs(n,i[14],r,Qv):Bs(i[14]),zd)},i(i){t||(N(s,i),t=!0)},o(i){$(s,i),t=!1},d(i){s&&s.d(i)}}}function Zv(e){let t=e[1].pathname,n,s,i=Wd(e);return{c(){i.c(),n=yn()},m(r,o){i.m(r,o),D(r,n,o),s=!0},p(r,o){o&2&&xt(t,t=r[1].pathname)?(Oi(),$(i,1,1,V),Vi(),i=Wd(r),i.c(),N(i,1),i.m(n.parentNode,n)):i.p(r,o)},i(r){s||(N(i),s=!0)},o(r){$(i),s=!1},d(r){r&&R(n),i.d(r)}}}function Wd(e){let t,n,s,i;const r=e[15].default,o=Ns(r,e,e[14],Ud);return{c(){t=b("div"),o&&o.c()},m(a,l){D(a,t,l),o&&o.m(t,null),i=!0},p(a,l){o&&o.p&&(!i||l&16390)&&$s(o,r,a,a[14],i?Fs(r,a[14],l,Xv):Bs(a[14]),Ud)},i(a){i||(N(o,a),On(()=>{i&&(s&&s.end(1),n=Ev(t,e[3],{}),n.start())}),i=!0)},o(a){$(o,a),n&&n.invalidate(),s=xv(t,e[3],{}),i=!1},d(a){a&&R(t),o&&o.d(a),a&&s&&s.end()}}}function tb(e){let t,n,s,i;const r=[Zv,Jv],o=[];function a(l,c){return l[0]?0:1}return t=a(e),n=o[t]=r[t](e),{c(){n.c(),s=yn()},m(l,c){o[t].m(l,c),D(l,s,c),i=!0},p(l,[c]){let u=t;t=a(l),t===u?o[t].p(l,c):(Oi(),$(o[u],1,1,()=>{o[u]=null}),Vi(),n=o[t],n?n.p(l,c):(n=o[t]=r[t](l),n.c()),N(n,1),n.m(s.parentNode,s))},i(l){i||(N(n),i=!0)},o(l){$(n),i=!1},d(l){o[t].d(l),l&&R(s)}}}function eb(e,t,n){let s,i,r,o,{$$slots:a={},$$scope:l}=t,{basepath:c="/"}=t,{url:u=null}=t,{viewtransition:h=null}=t,{history:d=Kv}=t;const f=(k,Y,W)=>{const j=h(W);return typeof(j==null?void 0:j.fn)=="function"?j.fn(k,j):j};ic(Hp,d);const g=ui(Hc),m=ui(Sa),p=on([]);ke(e,p,k=>n(12,i=k));const _=on(null);ke(e,_,k=>n(2,o=k));let w=!1;const T=g||on(u?{pathname:u}:d.location);ke(e,T,k=>n(1,s=k));const S=m?m.routerBase:on({path:c,uri:c});ke(e,S,k=>n(13,r=k));const E=Yv([S,_],([k,Y])=>{if(!Y)return k;const{path:W}=k,{route:j,uri:kt}=Y;return{path:j.default?W:j.path.replace(/\*.*$/,""),uri:kt}}),I=k=>{const{path:Y}=r;let{path:W}=k;if(k._path=W,k.path=Nd(Y,W),typeof window>"u"){if(w)return;const j=Ld([k],s.pathname);j&&(_.set(j),w=!0)}else p.update(j=>[...j,k])},A=k=>{p.update(Y=>Y.filter(W=>W!==k))};let x=!1;return g||($u(()=>d.listen(Y=>{n(11,x=Y.preserveScroll||!1),T.set(Y.location)})),ic(Hc,T)),ic(Sa,{activeRoute:_,base:S,routerBase:E,registerRoute:I,unregisterRoute:A}),e.$$set=k=>{"basepath"in k&&n(8,c=k.basepath),"url"in k&&n(9,u=k.url),"viewtransition"in k&&n(0,h=k.viewtransition),"history"in k&&n(10,d=k.history),"$$scope"in k&&n(14,l=k.$$scope)},e.$$.update=()=>{if(e.$$.dirty&8192){const{path:k}=r;p.update(Y=>Y.map(W=>Object.assign(W,{path:Nd(k,W._path)})))}if(e.$$.dirty&6146){const k=Ld(i,s.pathname);_.set({...k,preserveScroll:x})}},[h,s,o,f,p,_,T,S,c,u,d,x,i,r,l,a]}class nb extends Ct{constructor(t){super(),Rt(this,t,eb,tb,xt,{basepath:8,url:9,viewtransition:0,history:10})}}function sb(){const{subscribe:e,update:t}=on(!1);return{subscribe:e,toggle:()=>t(n=>!n)}}const zu=sb();function ib(){const{subscribe:e,update:t}=on(!0);return{subscribe:e,toggle:()=>t(n=>!n)}}const Uu=ib(),ll=on([]),uo=on([]),cl=on([]);let rb=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Gp;function B(){return Gp.apply(null,arguments)}function ob(e){Gp=e}function Qe(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Ss(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wu(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(gt(e,t))return!1;return!0}function xe(e){return e===void 0}function Vn(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ho(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Kp(e,t){var n=[],s,i=e.length;for(s=0;s<i;++s)n.push(t(e[s],s));return n}function jn(e,t){for(var n in t)gt(t,n)&&(e[n]=t[n]);return gt(t,"toString")&&(e.toString=t.toString),gt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function vn(e,t,n,s){return vm(e,t,n,s,!0).utc()}function ab(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function it(e){return e._pf==null&&(e._pf=ab()),e._pf}var Yc;Array.prototype.some?Yc=Array.prototype.some:Yc=function(e){var t=Object(this),n=t.length>>>0,s;for(s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function ju(e){if(e._isValid==null){var t=it(e),n=Yc.call(t.parsedDateParts,function(i){return i!=null}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s}return e._isValid}function ul(e){var t=vn(NaN);return e!=null?jn(it(t),e):it(t).userInvalidated=!0,t}var jd=B.momentProperties=[],cc=!1;function Hu(e,t){var n,s,i,r=jd.length;if(xe(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),xe(t._i)||(e._i=t._i),xe(t._f)||(e._f=t._f),xe(t._l)||(e._l=t._l),xe(t._strict)||(e._strict=t._strict),xe(t._tzm)||(e._tzm=t._tzm),xe(t._isUTC)||(e._isUTC=t._isUTC),xe(t._offset)||(e._offset=t._offset),xe(t._pf)||(e._pf=it(t)),xe(t._locale)||(e._locale=t._locale),r>0)for(n=0;n<r;n++)s=jd[n],i=t[s],xe(i)||(e[s]=i);return e}function fo(e){Hu(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),cc===!1&&(cc=!0,B.updateOffset(this),cc=!1)}function Xe(e){return e instanceof fo||e!=null&&e._isAMomentObject!=null}function Qp(e){B.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function $e(e,t){var n=!0;return jn(function(){if(B.deprecationHandler!=null&&B.deprecationHandler(null,e),n){var s=[],i,r,o,a=arguments.length;for(r=0;r<a;r++){if(i="",typeof arguments[r]=="object"){i+=`
[`+r+"] ";for(o in arguments[0])gt(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[r];s.push(i)}Qp(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var Hd={};function Xp(e,t){B.deprecationHandler!=null&&B.deprecationHandler(e,t),Hd[e]||(Qp(t),Hd[e]=!0)}B.suppressDeprecationWarnings=!1;B.deprecationHandler=null;function bn(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function lb(e){var t,n;for(n in e)gt(e,n)&&(t=e[n],bn(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function qc(e,t){var n=jn({},e),s;for(s in t)gt(t,s)&&(Ss(e[s])&&Ss(t[s])?(n[s]={},jn(n[s],e[s]),jn(n[s],t[s])):t[s]!=null?n[s]=t[s]:delete n[s]);for(s in e)gt(e,s)&&!gt(t,s)&&Ss(e[s])&&(n[s]=jn({},n[s]));return n}function Yu(e){e!=null&&this.set(e)}var Gc;Object.keys?Gc=Object.keys:Gc=function(e){var t,n=[];for(t in e)gt(e,t)&&n.push(t);return n};var cb={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ub(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return bn(s)?s.call(t,n):s}function gn(e,t,n){var s=""+Math.abs(e),i=t-s.length,r=e>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var qu=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,uc={},di={};function q(e,t,n,s){var i=s;typeof s=="string"&&(i=function(){return this[s]()}),e&&(di[e]=i),t&&(di[t[0]]=function(){return gn(i.apply(this,arguments),t[1],t[2])}),n&&(di[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function hb(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function db(e){var t=e.match(qu),n,s;for(n=0,s=t.length;n<s;n++)di[t[n]]?t[n]=di[t[n]]:t[n]=hb(t[n]);return function(i){var r="",o;for(o=0;o<s;o++)r+=bn(t[o])?t[o].call(i,e):t[o];return r}}function la(e,t){return e.isValid()?(t=Jp(t,e.localeData()),uc[t]=uc[t]||db(t),uc[t](e)):e.localeData().invalidDate()}function Jp(e,t){var n=5;function s(i){return t.longDateFormat(i)||i}for(Oo.lastIndex=0;n>=0&&Oo.test(e);)e=e.replace(Oo,s),Oo.lastIndex=0,n-=1;return e}var fb={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function gb(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(qu).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var pb="Invalid date";function mb(){return this._invalidDate}var _b="%d",yb=/\d{1,2}/;function vb(e){return this._ordinal.replace("%d",e)}var bb={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function wb(e,t,n,s){var i=this._relativeTime[n];return bn(i)?i(e,t,n,s):i.replace(/%d/i,e)}function Tb(e,t){var n=this._relativeTime[e>0?"future":"past"];return bn(n)?n(t):n.replace(/%s/i,t)}var _r={};function ye(e,t){var n=e.toLowerCase();_r[n]=_r[n+"s"]=_r[t]=e}function Be(e){return typeof e=="string"?_r[e]||_r[e.toLowerCase()]:void 0}function Gu(e){var t={},n,s;for(s in e)gt(e,s)&&(n=Be(s),n&&(t[n]=e[s]));return t}var Zp={};function ve(e,t){Zp[e]=t}function Eb(e){var t=[],n;for(n in e)gt(e,n)&&t.push({unit:n,priority:Zp[n]});return t.sort(function(s,i){return s.priority-i.priority}),t}function hl(e){return e%4===0&&e%100!==0||e%400===0}function Ve(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function at(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Ve(t)),n}function Li(e,t){return function(n){return n!=null?(tm(this,e,n),B.updateOffset(this,t),this):ka(this,e)}}function ka(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function tm(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&hl(e.year())&&e.month()===1&&e.date()===29?(n=at(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),_l(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function xb(e){return e=Be(e),bn(this[e])?this[e]():this}function Sb(e,t){if(typeof e=="object"){e=Gu(e);var n=Eb(e),s,i=n.length;for(s=0;s<i;s++)this[n[s].unit](e[n[s].unit])}else if(e=Be(e),bn(this[e]))return this[e](t);return this}var em=/\d/,Ce=/\d\d/,nm=/\d{3}/,Ku=/\d{4}/,dl=/[+-]?\d{6}/,Dt=/\d\d?/,sm=/\d\d\d\d?/,im=/\d\d\d\d\d\d?/,fl=/\d{1,3}/,Qu=/\d{1,4}/,gl=/[+-]?\d{1,6}/,Ni=/\d+/,pl=/[+-]?\d+/,kb=/Z|[+-]\d\d:?\d\d/gi,ml=/Z|[+-]\d\d(?::?\d\d)?/gi,Ab=/[+-]?\d+(\.\d{1,3})?/,go=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Aa;Aa={};function U(e,t,n){Aa[e]=bn(t)?t:function(s,i){return s&&n?n:t}}function Ib(e,t){return gt(Aa,e)?Aa[e](t._strict,t._locale):new RegExp(Pb(e))}function Pb(e){return Ie(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,s,i,r){return n||s||i||r}))}function Ie(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Kc={};function Et(e,t){var n,s=t,i;for(typeof e=="string"&&(e=[e]),Vn(t)&&(s=function(r,o){o[t]=at(r)}),i=e.length,n=0;n<i;n++)Kc[e[n]]=s}function po(e,t){Et(e,function(n,s,i,r){i._w=i._w||{},t(n,i._w,i,r)})}function Mb(e,t,n){t!=null&&gt(Kc,e)&&Kc[e](t,n._a,n,e)}var de=0,Pn=1,sn=2,Gt=3,je=4,Mn=5,bs=6,Rb=7,Cb=8;function Db(e,t){return(e%t+t)%t}var Wt;Array.prototype.indexOf?Wt=Array.prototype.indexOf:Wt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function _l(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Db(t,12);return e+=(t-n)/12,n===1?hl(e)?29:28:31-n%7%2}q("M",["MM",2],"Mo",function(){return this.month()+1});q("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});q("MMMM",0,0,function(e){return this.localeData().months(this,e)});ye("month","M");ve("month",8);U("M",Dt);U("MM",Dt,Ce);U("MMM",function(e,t){return t.monthsShortRegex(e)});U("MMMM",function(e,t){return t.monthsRegex(e)});Et(["M","MM"],function(e,t){t[Pn]=at(e)-1});Et(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);i!=null?t[Pn]=i:it(n).invalidMonth=e});var Ob="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),rm="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),om=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Vb=go,Lb=go;function Nb(e,t){return e?Qe(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||om).test(t)?"format":"standalone"][e.month()]:Qe(this._months)?this._months:this._months.standalone}function Fb(e,t){return e?Qe(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[om.test(t)?"format":"standalone"][e.month()]:Qe(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function $b(e,t,n){var s,i,r,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=vn([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?t==="MMM"?(i=Wt.call(this._shortMonthsParse,o),i!==-1?i:null):(i=Wt.call(this._longMonthsParse,o),i!==-1?i:null):t==="MMM"?(i=Wt.call(this._shortMonthsParse,o),i!==-1?i:(i=Wt.call(this._longMonthsParse,o),i!==-1?i:null)):(i=Wt.call(this._longMonthsParse,o),i!==-1?i:(i=Wt.call(this._shortMonthsParse,o),i!==-1?i:null))}function Bb(e,t,n){var s,i,r;if(this._monthsParseExact)return $b.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=vn([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[s]&&(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(n&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}}function am(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=at(t);else if(t=e.localeData().monthsParse(t),!Vn(t))return e}return n=Math.min(e.date(),_l(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function lm(e){return e!=null?(am(this,e),B.updateOffset(this,!0),this):ka(this,"Month")}function zb(){return _l(this.year(),this.month())}function Ub(e){return this._monthsParseExact?(gt(this,"_monthsRegex")||cm.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(gt(this,"_monthsShortRegex")||(this._monthsShortRegex=Vb),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Wb(e){return this._monthsParseExact?(gt(this,"_monthsRegex")||cm.call(this),e?this._monthsStrictRegex:this._monthsRegex):(gt(this,"_monthsRegex")||(this._monthsRegex=Lb),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function cm(){function e(o,a){return a.length-o.length}var t=[],n=[],s=[],i,r;for(i=0;i<12;i++)r=vn([2e3,i]),t.push(this.monthsShort(r,"")),n.push(this.months(r,"")),s.push(this.months(r,"")),s.push(this.monthsShort(r,""));for(t.sort(e),n.sort(e),s.sort(e),i=0;i<12;i++)t[i]=Ie(t[i]),n[i]=Ie(n[i]);for(i=0;i<24;i++)s[i]=Ie(s[i]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}q("Y",0,0,function(){var e=this.year();return e<=9999?gn(e,4):"+"+e});q(0,["YY",2],0,function(){return this.year()%100});q(0,["YYYY",4],0,"year");q(0,["YYYYY",5],0,"year");q(0,["YYYYYY",6,!0],0,"year");ye("year","y");ve("year",1);U("Y",pl);U("YY",Dt,Ce);U("YYYY",Qu,Ku);U("YYYYY",gl,dl);U("YYYYYY",gl,dl);Et(["YYYYY","YYYYYY"],de);Et("YYYY",function(e,t){t[de]=e.length===2?B.parseTwoDigitYear(e):at(e)});Et("YY",function(e,t){t[de]=B.parseTwoDigitYear(e)});Et("Y",function(e,t){t[de]=parseInt(e,10)});function yr(e){return hl(e)?366:365}B.parseTwoDigitYear=function(e){return at(e)+(at(e)>68?1900:2e3)};var um=Li("FullYear",!0);function jb(){return hl(this.year())}function Hb(e,t,n,s,i,r,o){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,s,i,r,o),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,s,i,r,o),a}function Cr(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ia(e,t,n){var s=7+t-n,i=(7+Cr(e,0,s).getUTCDay()-t)%7;return-i+s-1}function hm(e,t,n,s,i){var r=(7+n-s)%7,o=Ia(e,s,i),a=1+7*(t-1)+r+o,l,c;return a<=0?(l=e-1,c=yr(l)+a):a>yr(e)?(l=e+1,c=a-yr(e)):(l=e,c=a),{year:l,dayOfYear:c}}function Dr(e,t,n){var s=Ia(e.year(),t,n),i=Math.floor((e.dayOfYear()-s-1)/7)+1,r,o;return i<1?(o=e.year()-1,r=i+Dn(o,t,n)):i>Dn(e.year(),t,n)?(r=i-Dn(e.year(),t,n),o=e.year()+1):(o=e.year(),r=i),{week:r,year:o}}function Dn(e,t,n){var s=Ia(e,t,n),i=Ia(e+1,t,n);return(yr(e)-s+i)/7}q("w",["ww",2],"wo","week");q("W",["WW",2],"Wo","isoWeek");ye("week","w");ye("isoWeek","W");ve("week",5);ve("isoWeek",5);U("w",Dt);U("ww",Dt,Ce);U("W",Dt);U("WW",Dt,Ce);po(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=at(e)});function Yb(e){return Dr(e,this._week.dow,this._week.doy).week}var qb={dow:0,doy:6};function Gb(){return this._week.dow}function Kb(){return this._week.doy}function Qb(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Xb(e){var t=Dr(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}q("d",0,"do","day");q("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});q("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});q("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});q("e",0,0,"weekday");q("E",0,0,"isoWeekday");ye("day","d");ye("weekday","e");ye("isoWeekday","E");ve("day",11);ve("weekday",11);ve("isoWeekday",11);U("d",Dt);U("e",Dt);U("E",Dt);U("dd",function(e,t){return t.weekdaysMinRegex(e)});U("ddd",function(e,t){return t.weekdaysShortRegex(e)});U("dddd",function(e,t){return t.weekdaysRegex(e)});po(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);i!=null?t.d=i:it(n).invalidWeekday=e});po(["d","e","E"],function(e,t,n,s){t[s]=at(e)});function Jb(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Zb(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Xu(e,t){return e.slice(t,7).concat(e.slice(0,t))}var tw="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),dm="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ew="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nw=go,sw=go,iw=go;function rw(e,t){var n=Qe(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Xu(n,this._week.dow):e?n[e.day()]:n}function ow(e){return e===!0?Xu(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function aw(e){return e===!0?Xu(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function lw(e,t,n){var s,i,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=vn([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?t==="dddd"?(i=Wt.call(this._weekdaysParse,o),i!==-1?i:null):t==="ddd"?(i=Wt.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=Wt.call(this._minWeekdaysParse,o),i!==-1?i:null):t==="dddd"?(i=Wt.call(this._weekdaysParse,o),i!==-1||(i=Wt.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=Wt.call(this._minWeekdaysParse,o),i!==-1?i:null)):t==="ddd"?(i=Wt.call(this._shortWeekdaysParse,o),i!==-1||(i=Wt.call(this._weekdaysParse,o),i!==-1)?i:(i=Wt.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=Wt.call(this._minWeekdaysParse,o),i!==-1||(i=Wt.call(this._weekdaysParse,o),i!==-1)?i:(i=Wt.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function cw(e,t,n){var s,i,r;if(this._weekdaysParseExact)return lw.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=vn([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(n&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(n&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}}function uw(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Jb(e,this.localeData()),this.add(e-t,"d")):t}function hw(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function dw(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Zb(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function fw(e){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||Ju.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(gt(this,"_weekdaysRegex")||(this._weekdaysRegex=nw),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function gw(e){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||Ju.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(gt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=sw),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function pw(e){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||Ju.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(gt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=iw),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ju(){function e(u,h){return h.length-u.length}var t=[],n=[],s=[],i=[],r,o,a,l,c;for(r=0;r<7;r++)o=vn([2e3,1]).day(r),a=Ie(this.weekdaysMin(o,"")),l=Ie(this.weekdaysShort(o,"")),c=Ie(this.weekdays(o,"")),t.push(a),n.push(l),s.push(c),i.push(a),i.push(l),i.push(c);t.sort(e),n.sort(e),s.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Zu(){return this.hours()%12||12}function mw(){return this.hours()||24}q("H",["HH",2],0,"hour");q("h",["hh",2],0,Zu);q("k",["kk",2],0,mw);q("hmm",0,0,function(){return""+Zu.apply(this)+gn(this.minutes(),2)});q("hmmss",0,0,function(){return""+Zu.apply(this)+gn(this.minutes(),2)+gn(this.seconds(),2)});q("Hmm",0,0,function(){return""+this.hours()+gn(this.minutes(),2)});q("Hmmss",0,0,function(){return""+this.hours()+gn(this.minutes(),2)+gn(this.seconds(),2)});function fm(e,t){q(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}fm("a",!0);fm("A",!1);ye("hour","h");ve("hour",13);function gm(e,t){return t._meridiemParse}U("a",gm);U("A",gm);U("H",Dt);U("h",Dt);U("k",Dt);U("HH",Dt,Ce);U("hh",Dt,Ce);U("kk",Dt,Ce);U("hmm",sm);U("hmmss",im);U("Hmm",sm);U("Hmmss",im);Et(["H","HH"],Gt);Et(["k","kk"],function(e,t,n){var s=at(e);t[Gt]=s===24?0:s});Et(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Et(["h","hh"],function(e,t,n){t[Gt]=at(e),it(n).bigHour=!0});Et("hmm",function(e,t,n){var s=e.length-2;t[Gt]=at(e.substr(0,s)),t[je]=at(e.substr(s)),it(n).bigHour=!0});Et("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Gt]=at(e.substr(0,s)),t[je]=at(e.substr(s,2)),t[Mn]=at(e.substr(i)),it(n).bigHour=!0});Et("Hmm",function(e,t,n){var s=e.length-2;t[Gt]=at(e.substr(0,s)),t[je]=at(e.substr(s))});Et("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Gt]=at(e.substr(0,s)),t[je]=at(e.substr(s,2)),t[Mn]=at(e.substr(i))});function _w(e){return(e+"").toLowerCase().charAt(0)==="p"}var yw=/[ap]\.?m?\.?/i,vw=Li("Hours",!0);function bw(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var pm={calendar:cb,longDateFormat:fb,invalidDate:pb,ordinal:_b,dayOfMonthOrdinalParse:yb,relativeTime:bb,months:Ob,monthsShort:rm,week:qb,weekdays:tw,weekdaysMin:ew,weekdaysShort:dm,meridiemParse:yw},Vt={},Qi={},Or;function ww(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function Yd(e){return e&&e.toLowerCase().replace("_","-")}function Tw(e){for(var t=0,n,s,i,r;t<e.length;){for(r=Yd(e[t]).split("-"),n=r.length,s=Yd(e[t+1]),s=s?s.split("-"):null;n>0;){if(i=yl(r.slice(0,n).join("-")),i)return i;if(s&&s.length>=n&&ww(r,s)>=n-1)break;n--}t++}return Or}function Ew(e){return e.match("^[^/\\\\]*$")!=null}function yl(e){var t=null,n;if(Vt[e]===void 0&&typeof wa<"u"&&wa&&wa.exports&&Ew(e))try{t=Or._abbr,n=require,n("./locale/"+e),Xn(t)}catch{Vt[e]=null}return Vt[e]}function Xn(e,t){var n;return e&&(xe(t)?n=$n(e):n=th(e,t),n?Or=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Or._abbr}function th(e,t){if(t!==null){var n,s=pm;if(t.abbr=e,Vt[e]!=null)Xp("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Vt[e]._config;else if(t.parentLocale!=null)if(Vt[t.parentLocale]!=null)s=Vt[t.parentLocale]._config;else if(n=yl(t.parentLocale),n!=null)s=n._config;else return Qi[t.parentLocale]||(Qi[t.parentLocale]=[]),Qi[t.parentLocale].push({name:e,config:t}),null;return Vt[e]=new Yu(qc(s,t)),Qi[e]&&Qi[e].forEach(function(i){th(i.name,i.config)}),Xn(e),Vt[e]}else return delete Vt[e],null}function xw(e,t){if(t!=null){var n,s,i=pm;Vt[e]!=null&&Vt[e].parentLocale!=null?Vt[e].set(qc(Vt[e]._config,t)):(s=yl(e),s!=null&&(i=s._config),t=qc(i,t),s==null&&(t.abbr=e),n=new Yu(t),n.parentLocale=Vt[e],Vt[e]=n),Xn(e)}else Vt[e]!=null&&(Vt[e].parentLocale!=null?(Vt[e]=Vt[e].parentLocale,e===Xn()&&Xn(e)):Vt[e]!=null&&delete Vt[e]);return Vt[e]}function $n(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Or;if(!Qe(e)){if(t=yl(e),t)return t;e=[e]}return Tw(e)}function Sw(){return Gc(Vt)}function eh(e){var t,n=e._a;return n&&it(e).overflow===-2&&(t=n[Pn]<0||n[Pn]>11?Pn:n[sn]<1||n[sn]>_l(n[de],n[Pn])?sn:n[Gt]<0||n[Gt]>24||n[Gt]===24&&(n[je]!==0||n[Mn]!==0||n[bs]!==0)?Gt:n[je]<0||n[je]>59?je:n[Mn]<0||n[Mn]>59?Mn:n[bs]<0||n[bs]>999?bs:-1,it(e)._overflowDayOfYear&&(t<de||t>sn)&&(t=sn),it(e)._overflowWeeks&&t===-1&&(t=Rb),it(e)._overflowWeekday&&t===-1&&(t=Cb),it(e).overflow=t),e}var kw=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Aw=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Iw=/Z|[+-]\d\d(?::?\d\d)?/,Vo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],hc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pw=/^\/?Date\((-?\d+)/i,Mw=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Rw={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mm(e){var t,n,s=e._i,i=kw.exec(s)||Aw.exec(s),r,o,a,l,c=Vo.length,u=hc.length;if(i){for(it(e).iso=!0,t=0,n=c;t<n;t++)if(Vo[t][1].exec(i[1])){o=Vo[t][0],r=Vo[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=u;t<n;t++)if(hc[t][1].exec(i[3])){a=(i[2]||" ")+hc[t][0];break}if(a==null){e._isValid=!1;return}}if(!r&&a!=null){e._isValid=!1;return}if(i[4])if(Iw.exec(i[4]))l="Z";else{e._isValid=!1;return}e._f=o+(a||"")+(l||""),sh(e)}else e._isValid=!1}function Cw(e,t,n,s,i,r){var o=[Dw(e),rm.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&o.push(parseInt(r,10)),o}function Dw(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ow(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Vw(e,t,n){if(e){var s=dm.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(s!==i)return it(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Lw(e,t,n){if(e)return Rw[e];if(t)return 0;var s=parseInt(n,10),i=s%100,r=(s-i)/100;return r*60+i}function _m(e){var t=Mw.exec(Ow(e._i)),n;if(t){if(n=Cw(t[4],t[3],t[2],t[5],t[6],t[7]),!Vw(t[1],n,e))return;e._a=n,e._tzm=Lw(t[8],t[9],t[10]),e._d=Cr.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),it(e).rfc2822=!0}else e._isValid=!1}function Nw(e){var t=Pw.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(mm(e),e._isValid===!1)delete e._isValid;else return;if(_m(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:B.createFromInputFallback(e)}B.createFromInputFallback=$e("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ei(e,t,n){return e??t??n}function Fw(e){var t=new Date(B.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function nh(e){var t,n,s=[],i,r,o;if(!e._d){for(i=Fw(e),e._w&&e._a[sn]==null&&e._a[Pn]==null&&$w(e),e._dayOfYear!=null&&(o=ei(e._a[de],i[de]),(e._dayOfYear>yr(o)||e._dayOfYear===0)&&(it(e)._overflowDayOfYear=!0),n=Cr(o,0,e._dayOfYear),e._a[Pn]=n.getUTCMonth(),e._a[sn]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Gt]===24&&e._a[je]===0&&e._a[Mn]===0&&e._a[bs]===0&&(e._nextDay=!0,e._a[Gt]=0),e._d=(e._useUTC?Cr:Hb).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Gt]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==r&&(it(e).weekdayMismatch=!0)}}function $w(e){var t,n,s,i,r,o,a,l,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(r=1,o=4,n=ei(t.GG,e._a[de],Dr(Mt(),1,4).year),s=ei(t.W,1),i=ei(t.E,1),(i<1||i>7)&&(l=!0)):(r=e._locale._week.dow,o=e._locale._week.doy,c=Dr(Mt(),r,o),n=ei(t.gg,e._a[de],c.year),s=ei(t.w,c.week),t.d!=null?(i=t.d,(i<0||i>6)&&(l=!0)):t.e!=null?(i=t.e+r,(t.e<0||t.e>6)&&(l=!0)):i=r),s<1||s>Dn(n,r,o)?it(e)._overflowWeeks=!0:l!=null?it(e)._overflowWeekday=!0:(a=hm(n,s,i,r,o),e._a[de]=a.year,e._dayOfYear=a.dayOfYear)}B.ISO_8601=function(){};B.RFC_2822=function(){};function sh(e){if(e._f===B.ISO_8601){mm(e);return}if(e._f===B.RFC_2822){_m(e);return}e._a=[],it(e).empty=!0;var t=""+e._i,n,s,i,r,o,a=t.length,l=0,c,u;for(i=Jp(e._f,e._locale).match(qu)||[],u=i.length,n=0;n<u;n++)r=i[n],s=(t.match(Ib(r,e))||[])[0],s&&(o=t.substr(0,t.indexOf(s)),o.length>0&&it(e).unusedInput.push(o),t=t.slice(t.indexOf(s)+s.length),l+=s.length),di[r]?(s?it(e).empty=!1:it(e).unusedTokens.push(r),Mb(r,s,e)):e._strict&&!s&&it(e).unusedTokens.push(r);it(e).charsLeftOver=a-l,t.length>0&&it(e).unusedInput.push(t),e._a[Gt]<=12&&it(e).bigHour===!0&&e._a[Gt]>0&&(it(e).bigHour=void 0),it(e).parsedDateParts=e._a.slice(0),it(e).meridiem=e._meridiem,e._a[Gt]=Bw(e._locale,e._a[Gt],e._meridiem),c=it(e).era,c!==null&&(e._a[de]=e._locale.erasConvertYear(c,e._a[de])),nh(e),eh(e)}function Bw(e,t,n){var s;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(s=e.isPM(n),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function zw(e){var t,n,s,i,r,o,a=!1,l=e._f.length;if(l===0){it(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<l;i++)r=0,o=!1,t=Hu({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],sh(t),ju(t)&&(o=!0),r+=it(t).charsLeftOver,r+=it(t).unusedTokens.length*10,it(t).score=r,a?r<s&&(s=r,n=t):(s==null||r<s||o)&&(s=r,n=t,o&&(a=!0));jn(e,n||t)}function Uw(e){if(!e._d){var t=Gu(e._i),n=t.day===void 0?t.date:t.day;e._a=Kp([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),nh(e)}}function Ww(e){var t=new fo(eh(ym(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ym(e){var t=e._i,n=e._f;return e._locale=e._locale||$n(e._l),t===null||n===void 0&&t===""?ul({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Xe(t)?new fo(eh(t)):(ho(t)?e._d=t:Qe(n)?zw(e):n?sh(e):jw(e),ju(e)||(e._d=null),e))}function jw(e){var t=e._i;xe(t)?e._d=new Date(B.now()):ho(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Nw(e):Qe(t)?(e._a=Kp(t.slice(0),function(n){return parseInt(n,10)}),nh(e)):Ss(t)?Uw(e):Vn(t)?e._d=new Date(t):B.createFromInputFallback(e)}function vm(e,t,n,s,i){var r={};return(t===!0||t===!1)&&(s=t,t=void 0),(n===!0||n===!1)&&(s=n,n=void 0),(Ss(e)&&Wu(e)||Qe(e)&&e.length===0)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=n,r._i=e,r._f=t,r._strict=s,Ww(r)}function Mt(e,t,n,s){return vm(e,t,n,s,!1)}var Hw=$e("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Mt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ul()}),Yw=$e("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Mt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ul()});function bm(e,t){var n,s;if(t.length===1&&Qe(t[0])&&(t=t[0]),!t.length)return Mt();for(n=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](n))&&(n=t[s]);return n}function qw(){var e=[].slice.call(arguments,0);return bm("isBefore",e)}function Gw(){var e=[].slice.call(arguments,0);return bm("isAfter",e)}var Kw=function(){return Date.now?Date.now():+new Date},Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Qw(e){var t,n=!1,s,i=Xi.length;for(t in e)if(gt(e,t)&&!(Wt.call(Xi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<i;++s)if(e[Xi[s]]){if(n)return!1;parseFloat(e[Xi[s]])!==at(e[Xi[s]])&&(n=!0)}return!0}function Xw(){return this._isValid}function Jw(){return Ze(NaN)}function vl(e){var t=Gu(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=Qw(t),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+i+s*3+n*12,this._data={},this._locale=$n(),this._bubble()}function ca(e){return e instanceof vl}function Qc(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Zw(e,t,n){var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,o;for(o=0;o<s;o++)(n&&e[o]!==t[o]||!n&&at(e[o])!==at(t[o]))&&r++;return r+i}function wm(e,t){q(e,0,0,function(){var n=this.utcOffset(),s="+";return n<0&&(n=-n,s="-"),s+gn(~~(n/60),2)+t+gn(~~n%60,2)})}wm("Z",":");wm("ZZ","");U("Z",ml);U("ZZ",ml);Et(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=ih(ml,e)});var t1=/([\+\-]|\d\d)/gi;function ih(e,t){var n=(t||"").match(e),s,i,r;return n===null?null:(s=n[n.length-1]||[],i=(s+"").match(t1)||["-",0,0],r=+(i[1]*60)+at(i[2]),r===0?0:i[0]==="+"?r:-r)}function rh(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(Xe(e)||ho(e)?e.valueOf():Mt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),B.updateOffset(n,!1),n):Mt(e).local()}function Xc(e){return-Math.round(e._d.getTimezoneOffset())}B.updateOffset=function(){};function e1(e,t,n){var s=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=ih(ml,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=Xc(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?xm(this,Ze(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,B.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:Xc(this)}function n1(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function s1(e){return this.utcOffset(0,e)}function i1(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Xc(this),"m")),this}function r1(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=ih(kb,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function o1(e){return this.isValid()?(e=e?Mt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function a1(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function l1(){if(!xe(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Hu(e,this),e=ym(e),e._a?(t=e._isUTC?vn(e._a):Mt(e._a),this._isDSTShifted=this.isValid()&&Zw(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function c1(){return this.isValid()?!this._isUTC:!1}function u1(){return this.isValid()?this._isUTC:!1}function Tm(){return this.isValid()?this._isUTC&&this._offset===0:!1}var h1=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,d1=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ze(e,t){var n=e,s=null,i,r,o;return ca(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Vn(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(s=h1.exec(e))?(i=s[1]==="-"?-1:1,n={y:0,d:at(s[sn])*i,h:at(s[Gt])*i,m:at(s[je])*i,s:at(s[Mn])*i,ms:at(Qc(s[bs]*1e3))*i}):(s=d1.exec(e))?(i=s[1]==="-"?-1:1,n={y:ds(s[2],i),M:ds(s[3],i),w:ds(s[4],i),d:ds(s[5],i),h:ds(s[6],i),m:ds(s[7],i),s:ds(s[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=f1(Mt(n.from),Mt(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new vl(n),ca(e)&&gt(e,"_locale")&&(r._locale=e._locale),ca(e)&&gt(e,"_isValid")&&(r._isValid=e._isValid),r}Ze.fn=vl.prototype;Ze.invalid=Jw;function ds(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qd(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function f1(e,t){var n;return e.isValid()&&t.isValid()?(t=rh(t,e),e.isBefore(t)?n=qd(e,t):(n=qd(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Em(e,t){return function(n,s){var i,r;return s!==null&&!isNaN(+s)&&(Xp(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=s,s=r),i=Ze(n,s),xm(this,i,e),this}}function xm(e,t,n,s){var i=t._milliseconds,r=Qc(t._days),o=Qc(t._months);e.isValid()&&(s=s??!0,o&&am(e,ka(e,"Month")+o*n),r&&tm(e,"Date",ka(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&B.updateOffset(e,r||o))}var g1=Em(1,"add"),p1=Em(-1,"subtract");function Sm(e){return typeof e=="string"||e instanceof String}function m1(e){return Xe(e)||ho(e)||Sm(e)||Vn(e)||y1(e)||_1(e)||e===null||e===void 0}function _1(e){var t=Ss(e)&&!Wu(e),n=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,r,o=s.length;for(i=0;i<o;i+=1)r=s[i],n=n||gt(e,r);return t&&n}function y1(e){var t=Qe(e),n=!1;return t&&(n=e.filter(function(s){return!Vn(s)&&Sm(e)}).length===0),t&&n}function v1(e){var t=Ss(e)&&!Wu(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,r;for(i=0;i<s.length;i+=1)r=s[i],n=n||gt(e,r);return t&&n}function b1(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function w1(e,t){arguments.length===1&&(arguments[0]?m1(arguments[0])?(e=arguments[0],t=void 0):v1(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Mt(),s=rh(n,this).startOf("day"),i=B.calendarFormat(this,s)||"sameElse",r=t&&(bn(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Mt(n)))}function T1(){return new fo(this)}function E1(e,t){var n=Xe(e)?e:Mt(e);return this.isValid()&&n.isValid()?(t=Be(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function x1(e,t){var n=Xe(e)?e:Mt(e);return this.isValid()&&n.isValid()?(t=Be(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function S1(e,t,n,s){var i=Xe(e)?e:Mt(e),r=Xe(t)?t:Mt(t);return this.isValid()&&i.isValid()&&r.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(s[1]===")"?this.isBefore(r,n):!this.isAfter(r,n))):!1}function k1(e,t){var n=Xe(e)?e:Mt(e),s;return this.isValid()&&n.isValid()?(t=Be(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function A1(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function I1(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function P1(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(s=rh(e,this),!s.isValid())return NaN;switch(i=(s.utcOffset()-this.utcOffset())*6e4,t=Be(t),t){case"year":r=ua(this,s)/12;break;case"month":r=ua(this,s);break;case"quarter":r=ua(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:Ve(r)}function ua(e,t){if(e.date()<t.date())return-ua(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(n,"months"),i,r;return t-s<0?(i=e.clone().add(n-1,"months"),r=(t-s)/(s-i)):(i=e.clone().add(n+1,"months"),r=(t-s)/(i-s)),-(n+r)||0}B.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";B.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function M1(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function R1(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?la(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):bn(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",la(n,"Z")):la(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function C1(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,s,i,r;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",r=t+'[")]',this.format(n+s+i+r)}function D1(e){e||(e=this.isUtc()?B.defaultFormatUtc:B.defaultFormat);var t=la(this,e);return this.localeData().postformat(t)}function O1(e,t){return this.isValid()&&(Xe(e)&&e.isValid()||Mt(e).isValid())?Ze({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function V1(e){return this.from(Mt(),e)}function L1(e,t){return this.isValid()&&(Xe(e)&&e.isValid()||Mt(e).isValid())?Ze({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function N1(e){return this.to(Mt(),e)}function km(e){var t;return e===void 0?this._locale._abbr:(t=$n(e),t!=null&&(this._locale=t),this)}var Am=$e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Im(){return this._locale}var Pa=1e3,fi=60*Pa,Ma=60*fi,Pm=(365*400+97)*24*Ma;function gi(e,t){return(e%t+t)%t}function Mm(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Pm:new Date(e,t,n).valueOf()}function Rm(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Pm:Date.UTC(e,t,n)}function F1(e){var t,n;if(e=Be(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Rm:Mm,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=gi(t+(this._isUTC?0:this.utcOffset()*fi),Ma);break;case"minute":t=this._d.valueOf(),t-=gi(t,fi);break;case"second":t=this._d.valueOf(),t-=gi(t,Pa);break}return this._d.setTime(t),B.updateOffset(this,!0),this}function $1(e){var t,n;if(e=Be(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Rm:Mm,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ma-gi(t+(this._isUTC?0:this.utcOffset()*fi),Ma)-1;break;case"minute":t=this._d.valueOf(),t+=fi-gi(t,fi)-1;break;case"second":t=this._d.valueOf(),t+=Pa-gi(t,Pa)-1;break}return this._d.setTime(t),B.updateOffset(this,!0),this}function B1(){return this._d.valueOf()-(this._offset||0)*6e4}function z1(){return Math.floor(this.valueOf()/1e3)}function U1(){return new Date(this.valueOf())}function W1(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function j1(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function H1(){return this.isValid()?this.toISOString():null}function Y1(){return ju(this)}function q1(){return jn({},it(this))}function G1(){return it(this).overflow}function K1(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}q("N",0,0,"eraAbbr");q("NN",0,0,"eraAbbr");q("NNN",0,0,"eraAbbr");q("NNNN",0,0,"eraName");q("NNNNN",0,0,"eraNarrow");q("y",["y",1],"yo","eraYear");q("y",["yy",2],0,"eraYear");q("y",["yyy",3],0,"eraYear");q("y",["yyyy",4],0,"eraYear");U("N",oh);U("NN",oh);U("NNN",oh);U("NNNN",oT);U("NNNNN",aT);Et(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?it(n).era=i:it(n).invalidEra=e});U("y",Ni);U("yy",Ni);U("yyy",Ni);U("yyyy",Ni);U("yo",lT);Et(["y","yy","yyy","yyyy"],de);Et(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[de]=n._locale.eraYearOrdinalParse(e,i):t[de]=parseInt(e,10)});function Q1(e,t){var n,s,i,r=this._eras||$n("en")._eras;for(n=0,s=r.length;n<s;++n){switch(typeof r[n].since){case"string":i=B(r[n].since).startOf("day"),r[n].since=i.valueOf();break}switch(typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":i=B(r[n].until).startOf("day").valueOf(),r[n].until=i.valueOf();break}}return r}function X1(e,t,n){var s,i,r=this.eras(),o,a,l;for(e=e.toUpperCase(),s=0,i=r.length;s<i;++s)if(o=r[s].name.toUpperCase(),a=r[s].abbr.toUpperCase(),l=r[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return r[s];break;case"NNNN":if(o===e)return r[s];break;case"NNNNN":if(l===e)return r[s];break}else if([o,a,l].indexOf(e)>=0)return r[s]}function J1(e,t){var n=e.since<=e.until?1:-1;return t===void 0?B(e.since).year():B(e.since).year()+(t-e.offset)*n}function Z1(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].name;return""}function tT(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].narrow;return""}function eT(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return s[e].abbr;return""}function nT(){var e,t,n,s,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,s=this.clone().startOf("day").valueOf(),i[e].since<=s&&s<=i[e].until||i[e].until<=s&&s<=i[e].since)return(this.year()-B(i[e].since).year())*n+i[e].offset;return this.year()}function sT(e){return gt(this,"_erasNameRegex")||ah.call(this),e?this._erasNameRegex:this._erasRegex}function iT(e){return gt(this,"_erasAbbrRegex")||ah.call(this),e?this._erasAbbrRegex:this._erasRegex}function rT(e){return gt(this,"_erasNarrowRegex")||ah.call(this),e?this._erasNarrowRegex:this._erasRegex}function oh(e,t){return t.erasAbbrRegex(e)}function oT(e,t){return t.erasNameRegex(e)}function aT(e,t){return t.erasNarrowRegex(e)}function lT(e,t){return t._eraYearOrdinalRegex||Ni}function ah(){var e=[],t=[],n=[],s=[],i,r,o=this.eras();for(i=0,r=o.length;i<r;++i)t.push(Ie(o[i].name)),e.push(Ie(o[i].abbr)),n.push(Ie(o[i].narrow)),s.push(Ie(o[i].name)),s.push(Ie(o[i].abbr)),s.push(Ie(o[i].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}q(0,["gg",2],0,function(){return this.weekYear()%100});q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function bl(e,t){q(0,[e,e.length],0,t)}bl("gggg","weekYear");bl("ggggg","weekYear");bl("GGGG","isoWeekYear");bl("GGGGG","isoWeekYear");ye("weekYear","gg");ye("isoWeekYear","GG");ve("weekYear",1);ve("isoWeekYear",1);U("G",pl);U("g",pl);U("GG",Dt,Ce);U("gg",Dt,Ce);U("GGGG",Qu,Ku);U("gggg",Qu,Ku);U("GGGGG",gl,dl);U("ggggg",gl,dl);po(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=at(e)});po(["gg","GG"],function(e,t,n,s){t[s]=B.parseTwoDigitYear(e)});function cT(e){return Cm.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function uT(e){return Cm.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function hT(){return Dn(this.year(),1,4)}function dT(){return Dn(this.isoWeekYear(),1,4)}function fT(){var e=this.localeData()._week;return Dn(this.year(),e.dow,e.doy)}function gT(){var e=this.localeData()._week;return Dn(this.weekYear(),e.dow,e.doy)}function Cm(e,t,n,s,i){var r;return e==null?Dr(this,s,i).year:(r=Dn(e,s,i),t>r&&(t=r),pT.call(this,e,t,n,s,i))}function pT(e,t,n,s,i){var r=hm(e,t,n,s,i),o=Cr(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}q("Q",0,"Qo","quarter");ye("quarter","Q");ve("quarter",7);U("Q",em);Et("Q",function(e,t){t[Pn]=(at(e)-1)*3});function mT(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}q("D",["DD",2],"Do","date");ye("date","D");ve("date",9);U("D",Dt);U("DD",Dt,Ce);U("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Et(["D","DD"],sn);Et("Do",function(e,t){t[sn]=at(e.match(Dt)[0])});var Dm=Li("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear");ye("dayOfYear","DDD");ve("dayOfYear",4);U("DDD",fl);U("DDDD",nm);Et(["DDD","DDDD"],function(e,t,n){n._dayOfYear=at(e)});function _T(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}q("m",["mm",2],0,"minute");ye("minute","m");ve("minute",14);U("m",Dt);U("mm",Dt,Ce);Et(["m","mm"],je);var yT=Li("Minutes",!1);q("s",["ss",2],0,"second");ye("second","s");ve("second",15);U("s",Dt);U("ss",Dt,Ce);Et(["s","ss"],Mn);var vT=Li("Seconds",!1);q("S",0,0,function(){return~~(this.millisecond()/100)});q(0,["SS",2],0,function(){return~~(this.millisecond()/10)});q(0,["SSS",3],0,"millisecond");q(0,["SSSS",4],0,function(){return this.millisecond()*10});q(0,["SSSSS",5],0,function(){return this.millisecond()*100});q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ye("millisecond","ms");ve("millisecond",16);U("S",fl,em);U("SS",fl,Ce);U("SSS",fl,nm);var Hn,Om;for(Hn="SSSS";Hn.length<=9;Hn+="S")U(Hn,Ni);function bT(e,t){t[bs]=at(("0."+e)*1e3)}for(Hn="S";Hn.length<=9;Hn+="S")Et(Hn,bT);Om=Li("Milliseconds",!1);q("z",0,0,"zoneAbbr");q("zz",0,0,"zoneName");function wT(){return this._isUTC?"UTC":""}function TT(){return this._isUTC?"Coordinated Universal Time":""}var C=fo.prototype;C.add=g1;C.calendar=w1;C.clone=T1;C.diff=P1;C.endOf=$1;C.format=D1;C.from=O1;C.fromNow=V1;C.to=L1;C.toNow=N1;C.get=xb;C.invalidAt=G1;C.isAfter=E1;C.isBefore=x1;C.isBetween=S1;C.isSame=k1;C.isSameOrAfter=A1;C.isSameOrBefore=I1;C.isValid=Y1;C.lang=Am;C.locale=km;C.localeData=Im;C.max=Yw;C.min=Hw;C.parsingFlags=q1;C.set=Sb;C.startOf=F1;C.subtract=p1;C.toArray=W1;C.toObject=j1;C.toDate=U1;C.toISOString=R1;C.inspect=C1;typeof Symbol<"u"&&Symbol.for!=null&&(C[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});C.toJSON=H1;C.toString=M1;C.unix=z1;C.valueOf=B1;C.creationData=K1;C.eraName=Z1;C.eraNarrow=tT;C.eraAbbr=eT;C.eraYear=nT;C.year=um;C.isLeapYear=jb;C.weekYear=cT;C.isoWeekYear=uT;C.quarter=C.quarters=mT;C.month=lm;C.daysInMonth=zb;C.week=C.weeks=Qb;C.isoWeek=C.isoWeeks=Xb;C.weeksInYear=fT;C.weeksInWeekYear=gT;C.isoWeeksInYear=hT;C.isoWeeksInISOWeekYear=dT;C.date=Dm;C.day=C.days=uw;C.weekday=hw;C.isoWeekday=dw;C.dayOfYear=_T;C.hour=C.hours=vw;C.minute=C.minutes=yT;C.second=C.seconds=vT;C.millisecond=C.milliseconds=Om;C.utcOffset=e1;C.utc=s1;C.local=i1;C.parseZone=r1;C.hasAlignedHourOffset=o1;C.isDST=a1;C.isLocal=c1;C.isUtcOffset=u1;C.isUtc=Tm;C.isUTC=Tm;C.zoneAbbr=wT;C.zoneName=TT;C.dates=$e("dates accessor is deprecated. Use date instead.",Dm);C.months=$e("months accessor is deprecated. Use month instead",lm);C.years=$e("years accessor is deprecated. Use year instead",um);C.zone=$e("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",n1);C.isDSTShifted=$e("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",l1);function ET(e){return Mt(e*1e3)}function xT(){return Mt.apply(null,arguments).parseZone()}function Vm(e){return e}var pt=Yu.prototype;pt.calendar=ub;pt.longDateFormat=gb;pt.invalidDate=mb;pt.ordinal=vb;pt.preparse=Vm;pt.postformat=Vm;pt.relativeTime=wb;pt.pastFuture=Tb;pt.set=lb;pt.eras=Q1;pt.erasParse=X1;pt.erasConvertYear=J1;pt.erasAbbrRegex=iT;pt.erasNameRegex=sT;pt.erasNarrowRegex=rT;pt.months=Nb;pt.monthsShort=Fb;pt.monthsParse=Bb;pt.monthsRegex=Wb;pt.monthsShortRegex=Ub;pt.week=Yb;pt.firstDayOfYear=Kb;pt.firstDayOfWeek=Gb;pt.weekdays=rw;pt.weekdaysMin=aw;pt.weekdaysShort=ow;pt.weekdaysParse=cw;pt.weekdaysRegex=fw;pt.weekdaysShortRegex=gw;pt.weekdaysMinRegex=pw;pt.isPM=_w;pt.meridiem=bw;function Ra(e,t,n,s){var i=$n(),r=vn().set(s,t);return i[n](r,e)}function Lm(e,t,n){if(Vn(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ra(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=Ra(e,s,n,"month");return i}function lh(e,t,n,s){typeof e=="boolean"?(Vn(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Vn(t)&&(n=t,t=void 0),t=t||"");var i=$n(),r=e?i._week.dow:0,o,a=[];if(n!=null)return Ra(t,(n+r)%7,s,"day");for(o=0;o<7;o++)a[o]=Ra(t,(o+r)%7,s,"day");return a}function ST(e,t){return Lm(e,t,"months")}function kT(e,t){return Lm(e,t,"monthsShort")}function AT(e,t,n){return lh(e,t,n,"weekdays")}function IT(e,t,n){return lh(e,t,n,"weekdaysShort")}function PT(e,t,n){return lh(e,t,n,"weekdaysMin")}Xn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=at(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});B.lang=$e("moment.lang is deprecated. Use moment.locale instead.",Xn);B.langData=$e("moment.langData is deprecated. Use moment.localeData instead.",$n);var wn=Math.abs;function MT(){var e=this._data;return this._milliseconds=wn(this._milliseconds),this._days=wn(this._days),this._months=wn(this._months),e.milliseconds=wn(e.milliseconds),e.seconds=wn(e.seconds),e.minutes=wn(e.minutes),e.hours=wn(e.hours),e.months=wn(e.months),e.years=wn(e.years),this}function Nm(e,t,n,s){var i=Ze(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function RT(e,t){return Nm(this,e,t,1)}function CT(e,t){return Nm(this,e,t,-1)}function Gd(e){return e<0?Math.floor(e):Math.ceil(e)}function DT(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data,i,r,o,a,l;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Gd(Jc(n)+t)*864e5,t=0,n=0),s.milliseconds=e%1e3,i=Ve(e/1e3),s.seconds=i%60,r=Ve(i/60),s.minutes=r%60,o=Ve(r/60),s.hours=o%24,t+=Ve(o/24),l=Ve(Fm(t)),n+=l,t-=Gd(Jc(l)),a=Ve(n/12),n%=12,s.days=t,s.months=n,s.years=a,this}function Fm(e){return e*4800/146097}function Jc(e){return e*146097/4800}function OT(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if(e=Be(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,n=this._months+Fm(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Jc(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function VT(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+at(this._months/12)*31536e6:NaN}function Bn(e){return function(){return this.as(e)}}var LT=Bn("ms"),NT=Bn("s"),FT=Bn("m"),$T=Bn("h"),BT=Bn("d"),zT=Bn("w"),UT=Bn("M"),WT=Bn("Q"),jT=Bn("y");function HT(){return Ze(this)}function YT(e){return e=Be(e),this.isValid()?this[e+"s"]():NaN}function Us(e){return function(){return this.isValid()?this._data[e]:NaN}}var qT=Us("milliseconds"),GT=Us("seconds"),KT=Us("minutes"),QT=Us("hours"),XT=Us("days"),JT=Us("months"),ZT=Us("years");function tE(){return Ve(this.days()/7)}var Sn=Math.round,oi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eE(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}function nE(e,t,n,s){var i=Ze(e).abs(),r=Sn(i.as("s")),o=Sn(i.as("m")),a=Sn(i.as("h")),l=Sn(i.as("d")),c=Sn(i.as("M")),u=Sn(i.as("w")),h=Sn(i.as("y")),d=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=t,d[3]=+e>0,d[4]=s,eE.apply(null,d)}function sE(e){return e===void 0?Sn:typeof e=="function"?(Sn=e,!0):!1}function iE(e,t){return oi[e]===void 0?!1:t===void 0?oi[e]:(oi[e]=t,e==="s"&&(oi.ss=t-1),!0)}function rE(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=oi,i,r;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(s=Object.assign({},oi,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),i=this.localeData(),r=nE(this,!n,s,i),n&&(r=i.pastFuture(+this,r)),i.postformat(r)}var dc=Math.abs;function Qs(e){return(e>0)-(e<0)||+e}function wl(){if(!this.isValid())return this.localeData().invalidDate();var e=dc(this._milliseconds)/1e3,t=dc(this._days),n=dc(this._months),s,i,r,o,a=this.asSeconds(),l,c,u,h;return a?(s=Ve(e/60),i=Ve(s/60),e%=60,s%=60,r=Ve(n/12),n%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Qs(this._months)!==Qs(a)?"-":"",u=Qs(this._days)!==Qs(a)?"-":"",h=Qs(this._milliseconds)!==Qs(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(n?c+n+"M":"")+(t?u+t+"D":"")+(i||s||e?"T":"")+(i?h+i+"H":"")+(s?h+s+"M":"")+(e?h+o+"S":"")):"P0D"}var ht=vl.prototype;ht.isValid=Xw;ht.abs=MT;ht.add=RT;ht.subtract=CT;ht.as=OT;ht.asMilliseconds=LT;ht.asSeconds=NT;ht.asMinutes=FT;ht.asHours=$T;ht.asDays=BT;ht.asWeeks=zT;ht.asMonths=UT;ht.asQuarters=WT;ht.asYears=jT;ht.valueOf=VT;ht._bubble=DT;ht.clone=HT;ht.get=YT;ht.milliseconds=qT;ht.seconds=GT;ht.minutes=KT;ht.hours=QT;ht.days=XT;ht.weeks=tE;ht.months=JT;ht.years=ZT;ht.humanize=rE;ht.toISOString=wl;ht.toString=wl;ht.toJSON=wl;ht.locale=km;ht.localeData=Im;ht.toIsoString=$e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wl);ht.lang=Am;q("X",0,0,"unix");q("x",0,0,"valueOf");U("x",pl);U("X",Ab);Et("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Et("x",function(e,t,n){n._d=new Date(at(e))});//! moment.js
B.version="2.29.4";ob(Mt);B.fn=C;B.min=qw;B.max=Gw;B.now=Kw;B.utc=vn;B.unix=ET;B.months=ST;B.isDate=ho;B.locale=Xn;B.invalid=ul;B.duration=Ze;B.isMoment=Xe;B.weekdays=AT;B.parseZone=xT;B.localeData=$n;B.isDuration=ca;B.monthsShort=kT;B.weekdaysMin=PT;B.defineLocale=th;B.updateLocale=xw;B.locales=Sw;B.weekdaysShort=IT;B.normalizeUnits=Be;B.relativeTimeRounding=sE;B.relativeTimeThreshold=iE;B.calendarFormat=b1;B.prototype=C;B.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function oE(e){let t,n,s,i,r,o,a,l,c,u,h;return{c(){t=b("form"),n=b("div"),s=b("input"),i=L(),r=b("input"),o=L(),a=b("input"),l=L(),c=b("button"),c.textContent="Submit",y(s,"type","text"),y(s,"placeholder","First Name"),y(s,"class","svelte-gomr9i"),y(r,"type","text"),y(r,"placeholder","Last Name"),y(r,"class","svelte-gomr9i"),y(n,"class","name svelte-gomr9i"),y(a,"type","email"),y(a,"placeholder","Email"),y(a,"class","svelte-gomr9i"),y(c,"type","submit"),y(c,"class","svelte-gomr9i")},m(d,f){D(d,t,f),v(t,n),v(n,s),Zt(s,e[0]),v(n,i),v(n,r),Zt(r,e[1]),v(t,o),v(t,a),Zt(a,e[2]),v(t,l),v(t,c),u||(h=[Tt(s,"input",e[4]),Tt(r,"input",e[5]),Tt(a,"input",e[6]),Tt(t,"submit",Fu(e[3]))],u=!0)},p(d,[f]){f&1&&s.value!==d[0]&&Zt(s,d[0]),f&2&&r.value!==d[1]&&Zt(r,d[1]),f&4&&a.value!==d[2]&&Zt(a,d[2])},i:V,o:V,d(d){d&&R(t),u=!1,Re(h)}}}function aE(e,t,n){let s,i,r;const o=()=>{const u={first_name:s,last_name:i,email:r,date_joined:B(new Date).format("YYYY-MM-DD"),id:rb()};console.log(u),ll.update(h=>[...h,u]),n(0,s=""),n(1,i=""),n(2,r="")};function a(){s=this.value,n(0,s)}function l(){i=this.value,n(1,i)}function c(){r=this.value,n(2,r)}return[s,i,r,o,a,l,c]}class lE extends Ct{constructor(t){super(),Rt(this,t,aE,oE,xt,{})}}function cE(e){let t,n,s;const i=e[2].default,r=Ns(i,e,e[1],null);return{c(){t=b("div"),r&&r.c(),y(t,"class",n="card "+(e[0]===!0&&"full-height")+" svelte-behdv0")},m(o,a){D(o,t,a),r&&r.m(t,null),s=!0},p(o,[a]){r&&r.p&&(!s||a&2)&&$s(r,i,o,o[1],s?Fs(i,o[1],a,null):Bs(o[1]),null),(!s||a&1&&n!==(n="card "+(o[0]===!0&&"full-height")+" svelte-behdv0"))&&y(t,"class",n)},i(o){s||(N(r,o),s=!0)},o(o){$(r,o),s=!1},d(o){o&&R(t),r&&r.d(o)}}}function uE(e,t,n){let{$$slots:s={},$$scope:i}=t,{fullHeight:r}=t;return e.$$set=o=>{"fullHeight"in o&&n(0,r=o.fullHeight),"$$scope"in o&&n(1,i=o.$$scope)},[r,i,s]}class He extends Ct{constructor(t){super(),Rt(this,t,uE,cE,xt,{fullHeight:0})}}function Kd(e,t,n){const s=e.slice();return s[12]=t[n],s}function Qd(e,t,n){const s=e.slice();return s[15]=t[n],s}function Xd(e,t,n){const s=e.slice();return s[12]=t[n],s}function Jd(e,t,n){const s=e.slice();return s[15]=t[n],s}function Zd(e,t,n){const s=e.slice();return s[15]=t[n],s}function tf(e){let t,n,s,i,r;return{c(){t=b("button"),n=b("span"),s=Te(e[4]),y(n,"class","material-icons-sharp svelte-16yx7k"),y(t,"class","sort-icon svelte-16yx7k")},m(o,a){D(o,t,a),v(t,n),v(n,s),i||(r=Tt(t,"click",e[9]),i=!0)},p(o,a){a&16&&Pr(s,o[4])},d(o){o&&R(t),i=!1,r()}}}function ef(e){let t,n=e[15].replace("_"," ")+"",s,i,r,o,a,l=e[15]===e[2]&&tf(e);function c(){return e[10](e[15])}return{c(){t=b("th"),s=Te(n),i=L(),l&&l.c(),r=L(),y(t,"class","svelte-16yx7k"),Dd(t,"highlighted",e[2]===e[15])},m(u,h){D(u,t,h),v(t,s),v(t,i),l&&l.m(t,null),v(t,r),o||(a=Tt(t,"click",c),o=!0)},p(u,h){e=u,e[15]===e[2]?l?l.p(e,h):(l=tf(e),l.c(),l.m(t,r)):l&&(l.d(1),l=null),h&36&&Dd(t,"highlighted",e[2]===e[15])},d(u){u&&R(t),l&&l.d(),o=!1,a()}}}function nf(e){let t,n,s=e[12][e[15]]+"",i,r;return{c(){t=b("td"),n=b("span"),i=Te(s),y(n,"class","svelte-16yx7k"),y(t,"data-value",r=e[12][e[15]]),y(t,"class","svelte-16yx7k")},m(o,a){D(o,t,a),v(t,n),v(n,i)},p(o,a){a&8&&s!==(s=o[12][o[15]]+"")&&Pr(i,s),a&8&&r!==(r=o[12][o[15]])&&y(t,"data-value",r)},d(o){o&&R(t)}}}function sf(e){let t,n,s,i,r,o,a,l=e[5],c=[];for(let h=0;h<l.length;h+=1)c[h]=nf(Jd(e,l,h));function u(){return e[11](e[12])}return{c(){t=b("tr");for(let h=0;h<c.length;h+=1)c[h].c();n=L(),s=b("td"),i=b("button"),i.innerHTML='<span class="material-icons-sharp delete svelte-16yx7k">delete</span>',r=L(),y(i,"class","svelte-16yx7k")},m(h,d){D(h,t,d);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(t,null);v(t,n),v(t,s),v(s,i),v(t,r),o||(a=Tt(i,"click",u),o=!0)},p(h,d){if(e=h,d&40){l=e[5];let f;for(f=0;f<l.length;f+=1){const g=Jd(e,l,f);c[f]?c[f].p(g,d):(c[f]=nf(g),c[f].c(),c[f].m(t,n))}for(;f<c.length;f+=1)c[f].d(1);c.length=l.length}},d(h){h&&R(t),ci(c,h),o=!1,a()}}}function rf(e){let t,n,s=e[15].replace("_"," ")+"",i,r,o,a,l=e[12][e[15]]+"",c,u,h;return{c(){t=b("tr"),n=b("th"),i=Te(s),r=L(),o=b("td"),a=b("span"),c=Te(l),h=L(),y(n,"class","svelte-16yx7k"),y(a,"class","svelte-16yx7k"),y(o,"data-value",u=e[12][e[15]]),y(o,"class","svelte-16yx7k")},m(d,f){D(d,t,f),v(t,n),v(n,i),v(t,r),v(t,o),v(o,a),v(a,c),v(t,h)},p(d,f){f&8&&l!==(l=d[12][d[15]]+"")&&Pr(c,l),f&8&&u!==(u=d[12][d[15]])&&y(o,"data-value",u)},d(d){d&&R(t)}}}function of(e){let t,n,s,i=e[5],r=[];for(let o=0;o<i.length;o+=1)r[o]=rf(Qd(e,i,o));return{c(){t=b("table"),n=b("tbody");for(let o=0;o<r.length;o+=1)r[o].c();s=L(),y(t,"class","svelte-16yx7k")},m(o,a){D(o,t,a),v(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);v(t,s)},p(o,a){if(a&40){i=o[5];let l;for(l=0;l<i.length;l+=1){const c=Qd(o,i,l);r[l]?r[l].p(c,a):(r[l]=rf(c),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=i.length}},d(o){o&&R(t),ci(r,o)}}}function hE(e){let t,n,s,i,r,o,a,l=e[5],c=[];for(let g=0;g<l.length;g+=1)c[g]=ef(Zd(e,l,g));let u=e[3],h=[];for(let g=0;g<u.length;g+=1)h[g]=sf(Xd(e,u,g));let d=e[3],f=[];for(let g=0;g<d.length;g+=1)f[g]=of(Kd(e,d,g));return{c(){t=b("table"),n=b("thead"),s=b("tr");for(let g=0;g<c.length;g+=1)c[g].c();i=L(),r=b("tbody");for(let g=0;g<h.length;g+=1)h[g].c();o=L(),a=b("div");for(let g=0;g<f.length;g+=1)f[g].c();y(t,"class","table-desktop svelte-16yx7k"),y(a,"class","table-mobile svelte-16yx7k")},m(g,m){D(g,t,m),v(t,n),v(n,s);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(s,null);v(t,i),v(t,r);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(r,null);D(g,o,m),D(g,a,m);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(a,null)},p(g,[m]){if(m&246){l=g[5];let p;for(p=0;p<l.length;p+=1){const _=Zd(g,l,p);c[p]?c[p].p(_,m):(c[p]=ef(_),c[p].c(),c[p].m(s,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}if(m&41){u=g[3];let p;for(p=0;p<u.length;p+=1){const _=Xd(g,u,p);h[p]?h[p].p(_,m):(h[p]=sf(_),h[p].c(),h[p].m(r,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=u.length}if(m&40){d=g[3];let p;for(p=0;p<d.length;p+=1){const _=Kd(g,d,p);f[p]?f[p].p(_,m):(f[p]=of(_),f[p].c(),f[p].m(a,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=d.length}},i:V,o:V,d(g){g&&R(t),ci(c,g),ci(h,g),g&&R(o),g&&R(a),ci(f,g)}}}function dE(e,t,n){let s,i,{data:r}=t,{deleteItem:o}=t;const a=Object.keys(r[0]);let l,c=!1;const u=m=>{n(3,s=s.sort((p,_)=>c?Number(p[m])-Number(_[m]):Number(_[m])-Number(p[m]))),n(2,l=m)},h=m=>{n(3,s=s.sort((p,_)=>p[m]<_[m]?-1:p[m]>_[m]?1:0)),c||n(3,s=s.reverse()),n(2,l=m)},d=()=>n(1,c=!c),f=m=>m.includes("price")||m.includes("total")||m.includes("items")?u(m):h(m),g=m=>o(m.id);return e.$$set=m=>{"data"in m&&n(8,r=m.data),"deleteItem"in m&&n(0,o=m.deleteItem)},e.$$.update=()=>{e.$$.dirty&256&&n(3,s=r),e.$$.dirty&2&&n(4,i=c?"keyboard_arrow_down":"keyboard_arrow_up")},[o,c,l,s,i,a,u,h,r,d,f,g]}class Tl extends Ct{constructor(t){super(),Rt(this,t,dE,hE,xt,{data:8,deleteItem:0})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},fE=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Bm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),s.push(n[u],n[h],n[d],n[f])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($m(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const h=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||h==null)throw new gE;const d=r<<2|a>>4;if(s.push(d),c!==64){const f=a<<4&240|c>>2;if(s.push(f),h!==64){const g=c<<6&192|h;s.push(g)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class gE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pE=function(e){const t=$m(e);return Bm.encodeByteArray(t,!0)},Ca=function(e){return pE(e).replace(/\./g,"")},mE=function(e){try{return Bm.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>_E().__FIREBASE_DEFAULTS__,vE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},bE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mE(e[1]);return t&&JSON.parse(t)},zm=()=>{try{return yE()||vE()||bE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wE=e=>{var t,n;return(n=(t=zm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},TE=e=>{const t=wE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Um=()=>{var e;return(e=zm())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Ca(JSON.stringify(n)),Ca(JSON.stringify(o)),a].join(".")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function kE(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="FirebaseError";class Fi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=AE,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wm.prototype.create)}}class Wm{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?IE(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fi(i,a,s)}}function IE(e,t){return e.replace(PE,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const PE=/\{\$([^}]+)}/g;function Zc(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(af(r)&&af(o)){if(!Zc(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function af(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(e){return e&&e._delegate?e._delegate:e}class Lr{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new EE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CE(t))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=_s){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_s){return this.instances.has(t)}getOptions(t=_s){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:RE(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=_s){return this.component?this.component.multipleInstances?t:_s:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RE(e){return e===_s?void 0:e}function CE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ME(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const OE={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},VE=dt.INFO,LE={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},NE=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=LE[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jm{constructor(t){this.name=t,this._logLevel=VE,this._logHandler=NE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const FE=(e,t)=>t.some(n=>e instanceof n);let lf,cf;function $E(){return lf||(lf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BE(){return cf||(cf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hm=new WeakMap,tu=new WeakMap,Ym=new WeakMap,fc=new WeakMap,ch=new WeakMap;function zE(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Jn(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Hm.set(n,e)}).catch(()=>{}),ch.set(t,e),t}function UE(e){if(tu.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});tu.set(e,t)}let eu={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return tu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ym.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WE(e){eu=e(eu)}function jE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(gc(this),t,...n);return Ym.set(s,t.sort?t.sort():[t]),Jn(s)}:BE().includes(e)?function(...t){return e.apply(gc(this),t),Jn(Hm.get(this))}:function(...t){return Jn(e.apply(gc(this),t))}}function HE(e){return typeof e=="function"?jE(e):(e instanceof IDBTransaction&&UE(e),FE(e,$E())?new Proxy(e,eu):e)}function Jn(e){if(e instanceof IDBRequest)return zE(e);if(fc.has(e))return fc.get(e);const t=HE(e);return t!==e&&(fc.set(e,t),ch.set(t,e)),t}const gc=e=>ch.get(e);function YE(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Jn(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Jn(o.result),l.oldVersion,l.newVersion,Jn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qE=["get","getKey","getAll","getAllKeys","count"],GE=["put","add","delete","clear"],pc=new Map;function uf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(pc.get(t))return pc.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=GE.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||qE.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return pc.set(t,r),r}WE(e=>({...e,get:(t,n,s)=>uf(t,n)||e.get(t,n,s),has:(t,n)=>!!uf(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QE(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const nu="@firebase/app",hf="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new jm("@firebase/app"),XE="@firebase/app-compat",JE="@firebase/analytics-compat",ZE="@firebase/analytics",tx="@firebase/app-check-compat",ex="@firebase/app-check",nx="@firebase/auth",sx="@firebase/auth-compat",ix="@firebase/database",rx="@firebase/database-compat",ox="@firebase/functions",ax="@firebase/functions-compat",lx="@firebase/installations",cx="@firebase/installations-compat",ux="@firebase/messaging",hx="@firebase/messaging-compat",dx="@firebase/performance",fx="@firebase/performance-compat",gx="@firebase/remote-config",px="@firebase/remote-config-compat",mx="@firebase/storage",_x="@firebase/storage-compat",yx="@firebase/firestore",vx="@firebase/firestore-compat",bx="firebase",wx="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="[DEFAULT]",Tx={[nu]:"fire-core",[XE]:"fire-core-compat",[ZE]:"fire-analytics",[JE]:"fire-analytics-compat",[ex]:"fire-app-check",[tx]:"fire-app-check-compat",[nx]:"fire-auth",[sx]:"fire-auth-compat",[ix]:"fire-rtdb",[rx]:"fire-rtdb-compat",[ox]:"fire-fn",[ax]:"fire-fn-compat",[lx]:"fire-iid",[cx]:"fire-iid-compat",[ux]:"fire-fcm",[hx]:"fire-fcm-compat",[dx]:"fire-perf",[fx]:"fire-perf-compat",[gx]:"fire-rc",[px]:"fire-rc-compat",[mx]:"fire-gcs",[_x]:"fire-gcs-compat",[yx]:"fire-fst",[vx]:"fire-fst-compat","fire-js":"fire-js",[bx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Map,iu=new Map;function Ex(e,t){try{e.container.addComponent(t)}catch(n){Ms.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Oa(e){const t=e.name;if(iu.has(t))return Ms.debug(`There were multiple attempts to register component ${t}.`),!1;iu.set(t,e);for(const n of Da.values())Ex(n,e);return!0}function xx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Zn=new Wm("app","Firebase",Sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=wx;function qm(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:su,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw Zn.create("bad-app-name",{appName:String(i)});if(n||(n=Um()),!n)throw Zn.create("no-options");const r=Da.get(i);if(r){if(Zc(n,r.options)&&Zc(s,r.config))return r;throw Zn.create("duplicate-app",{appName:i})}const o=new DE(i);for(const l of iu.values())o.addComponent(l);const a=new kx(n,s,o);return Da.set(i,a),a}function Ix(e=su){const t=Da.get(e);if(!t&&e===su&&Um())return qm();if(!t)throw Zn.create("no-app",{appName:e});return t}function pi(e,t,n){var s;let i=(s=Tx[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ms.warn(a.join(" "));return}Oa(new Lr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firebase-heartbeat-database",Mx=1,Nr="firebase-heartbeat-store";let mc=null;function Gm(){return mc||(mc=YE(Px,Mx,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Nr)}}}).catch(e=>{throw Zn.create("idb-open",{originalErrorMessage:e.message})})),mc}async function Rx(e){try{return await(await Gm()).transaction(Nr).objectStore(Nr).get(Km(e))}catch(t){if(t instanceof Fi)Ms.warn(t.message);else{const n=Zn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ms.warn(n.message)}}}async function df(e,t){try{const s=(await Gm()).transaction(Nr,"readwrite");await s.objectStore(Nr).put(t,Km(e)),await s.done}catch(n){if(n instanceof Fi)Ms.warn(n.message);else{const s=Zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(s.message)}}}function Km(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=1024,Dx=30*24*60*60*1e3;class Ox{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Lx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ff();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const r=new Date(i.date).valueOf();return Date.now()-r<=Dx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ff(),{heartbeatsToSend:n,unsentEntries:s}=Vx(this._heartbeatsCache.heartbeats),i=Ca(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ff(){return new Date().toISOString().substring(0,10)}function Vx(e,t=Cx){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),gf(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gf(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Lx{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?kE().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Rx(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return df(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return df(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function gf(e){return Ca(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(e){Oa(new Lr("platform-logger",t=>new KE(t),"PRIVATE")),Oa(new Lr("heartbeat",t=>new Ox(t),"PRIVATE")),pi(nu,hf,e),pi(nu,hf,"esm2017"),pi("fire-js","")}Nx("");var Fx="firebase",$x="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(Fx,$x,"app");var Bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F,uh=uh||{},tt=Bx||self;function El(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function mo(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function zx(e){return Object.prototype.hasOwnProperty.call(e,_c)&&e[_c]||(e[_c]=++Ux)}var _c="closure_uid_"+(1e9*Math.random()>>>0),Ux=0;function Wx(e,t,n){return e.call.apply(e.bind,arguments)}function jx(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function fe(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?fe=Wx:fe=jx,fe.apply(null,arguments)}function Lo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),e.apply(this,s)}}function ne(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(s,o)}}function as(){this.s=this.s,this.o=this.o}var Hx=0;as.prototype.s=!1;as.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Hx!=0)&&zx(this)};as.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qm=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function hh(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function pf(e,t){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(El(s)){const i=e.length||0,r=s.length||0;e.length=i+r;for(let o=0;o<r;o++)e[i+o]=s[o]}else e.push(s)}}function ge(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Yx=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tt.addEventListener("test",()=>{},t),tt.removeEventListener("test",()=>{},t)}catch{}return e}();function Fr(e){return/^[\s\xa0]*$/.test(e)}function xl(){var e=tt.navigator;return e&&(e=e.userAgent)?e:""}function rn(e){return xl().indexOf(e)!=-1}function dh(e){return dh[" "](e),e}dh[" "]=function(){};function qx(e,t){var n=$S;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var Gx=rn("Opera"),Ei=rn("Trident")||rn("MSIE"),Xm=rn("Edge"),ru=Xm||Ei,Jm=rn("Gecko")&&!(xl().toLowerCase().indexOf("webkit")!=-1&&!rn("Edge"))&&!(rn("Trident")||rn("MSIE"))&&!rn("Edge"),Kx=xl().toLowerCase().indexOf("webkit")!=-1&&!rn("Edge");function Zm(){var e=tt.document;return e?e.documentMode:void 0}var ou;t:{var yc="",vc=function(){var e=xl();if(Jm)return/rv:([^\);]+)(\)|;)/.exec(e);if(Xm)return/Edge\/([\d\.]+)/.exec(e);if(Ei)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Kx)return/WebKit\/(\S+)/.exec(e);if(Gx)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(vc&&(yc=vc?vc[1]:""),Ei){var bc=Zm();if(bc!=null&&bc>parseFloat(yc)){ou=String(bc);break t}}ou=yc}var au;if(tt.document&&Ei){var mf=Zm();au=mf||parseInt(ou,10)||void 0}else au=void 0;var Qx=au;function $r(e,t){if(ge.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Jm){t:{try{dh(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Xx[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$r.$.h.call(this)}}ne($r,ge);var Xx={2:"touch",3:"pen",4:"mouse"};$r.prototype.h=function(){$r.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _o="closure_listenable_"+(1e6*Math.random()|0),Jx=0;function Zx(e,t,n,s,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.la=i,this.key=++Jx,this.fa=this.ia=!1}function Sl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function fh(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function tS(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function t_(e){const t={};for(const n in e)t[n]=e[n];return t}const _f="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function e_(e,t){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)e[n]=s[n];for(let r=0;r<_f.length;r++)n=_f[r],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function kl(e){this.src=e,this.g={},this.h=0}kl.prototype.add=function(e,t,n,s,i){var r=e.toString();e=this.g[r],e||(e=this.g[r]=[],this.h++);var o=cu(e,t,s,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new Zx(t,this.src,r,!!s,i),t.ia=n,e.push(t)),t};function lu(e,t){var n=t.type;if(n in e.g){var s=e.g[n],i=Qm(s,t),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Sl(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function cu(e,t,n,s){for(var i=0;i<e.length;++i){var r=e[i];if(!r.fa&&r.listener==t&&r.capture==!!n&&r.la==s)return i}return-1}var gh="closure_lm_"+(1e6*Math.random()|0),wc={};function n_(e,t,n,s,i){if(s&&s.once)return i_(e,t,n,s,i);if(Array.isArray(t)){for(var r=0;r<t.length;r++)n_(e,t[r],n,s,i);return null}return n=_h(n),e&&e[_o]?e.O(t,n,mo(s)?!!s.capture:!!s,i):s_(e,t,n,!1,s,i)}function s_(e,t,n,s,i,r){if(!t)throw Error("Invalid event type");var o=mo(i)?!!i.capture:!!i,a=mh(e);if(a||(e[gh]=a=new kl(e)),n=a.add(t,n,s,o,r),n.proxy)return n;if(s=eS(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)Yx||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),s,i);else if(e.attachEvent)e.attachEvent(o_(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eS(){function e(n){return t.call(e.src,e.listener,n)}const t=nS;return e}function i_(e,t,n,s,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)i_(e,t[r],n,s,i);return null}return n=_h(n),e&&e[_o]?e.P(t,n,mo(s)?!!s.capture:!!s,i):s_(e,t,n,!0,s,i)}function r_(e,t,n,s,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)r_(e,t[r],n,s,i);else s=mo(s)?!!s.capture:!!s,n=_h(n),e&&e[_o]?(e=e.i,t=String(t).toString(),t in e.g&&(r=e.g[t],n=cu(r,n,s,i),-1<n&&(Sl(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete e.g[t],e.h--)))):e&&(e=mh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cu(t,n,s,i)),(n=-1<e?t[e]:null)&&ph(n))}function ph(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[_o])lu(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(o_(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=mh(t))?(lu(n,e),n.h==0&&(n.src=null,t[gh]=null)):Sl(e)}}}function o_(e){return e in wc?wc[e]:wc[e]="on"+e}function nS(e,t){if(e.fa)e=!0;else{t=new $r(t,this);var n=e.listener,s=e.la||e.src;e.ia&&ph(e),e=n.call(s,t)}return e}function mh(e){return e=e[gh],e instanceof kl?e:null}var Tc="__closure_events_fn_"+(1e9*Math.random()>>>0);function _h(e){return typeof e=="function"?e:(e[Tc]||(e[Tc]=function(t){return e.handleEvent(t)}),e[Tc])}function ee(){as.call(this),this.i=new kl(this),this.S=this,this.J=null}ne(ee,as);ee.prototype[_o]=!0;ee.prototype.removeEventListener=function(e,t,n,s){r_(this,e,t,n,s)};function re(e,t){var n,s=e.J;if(s)for(n=[];s;s=s.J)n.push(s);if(e=e.S,s=t.type||t,typeof t=="string")t=new ge(t,e);else if(t instanceof ge)t.target=t.target||e;else{var i=t;t=new ge(s,e),e_(t,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];i=No(o,s,!0,t)&&i}if(o=t.g=e,i=No(o,s,!0,t)&&i,i=No(o,s,!1,t)&&i,n)for(r=0;r<n.length;r++)o=t.g=n[r],i=No(o,s,!1,t)&&i}ee.prototype.N=function(){if(ee.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Sl(n[s]);delete e.g[t],e.h--}}this.J=null};ee.prototype.O=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)};ee.prototype.P=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};function No(e,t,n,s){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&lu(e.i,o),i=a.call(l,s)!==!1&&i}}return i&&!s.defaultPrevented}var yh=tt.JSON.stringify;class sS{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function iS(){var e=vh;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class rS{constructor(){this.h=this.g=null}add(t,n){const s=a_.get();s.set(t,n),this.h?this.h.next=s:this.g=s,this.h=s}}var a_=new sS(()=>new oS,e=>e.reset());class oS{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function aS(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function lS(e){tt.setTimeout(()=>{throw e},0)}let Br,zr=!1,vh=new rS,l_=()=>{const e=tt.Promise.resolve(void 0);Br=()=>{e.then(cS)}};var cS=()=>{for(var e;e=iS();){try{e.h.call(e.g)}catch(n){lS(n)}var t=a_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zr=!1};function Al(e,t){ee.call(this),this.h=e||1,this.g=t||tt,this.j=fe(this.qb,this),this.l=Date.now()}ne(Al,ee);F=Al.prototype;F.ga=!1;F.T=null;F.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),re(this,"tick"),this.ga&&(bh(this),this.start()))}};F.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function bh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}F.N=function(){Al.$.N.call(this),bh(this),delete this.g};function wh(e,t,n){if(typeof e=="function")n&&(e=fe(e,n));else if(e&&typeof e.handleEvent=="function")e=fe(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:tt.setTimeout(e,t||0)}function c_(e){e.g=wh(()=>{e.g=null,e.i&&(e.i=!1,c_(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class uS extends as{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:c_(this)}N(){super.N(),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(e){as.call(this),this.h=e,this.g={}}ne(Ur,as);var yf=[];function u_(e,t,n,s){Array.isArray(n)||(n&&(yf[0]=n.toString()),n=yf);for(var i=0;i<n.length;i++){var r=n_(t,n[i],s||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function h_(e){fh(e.g,function(t,n){this.g.hasOwnProperty(n)&&ph(t)},e),e.g={}}Ur.prototype.N=function(){Ur.$.N.call(this),h_(this)};Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Il(){this.g=!0}Il.prototype.Ea=function(){this.g=!1};function hS(e,t,n,s,i,r){e.info(function(){if(e.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function dS(e,t,n,s,i,r,o){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+t+`
`+n+`
`+r+" "+o})}function ai(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+gS(e,n)+(s?" "+s:"")})}function fS(e,t){e.info(function(){return"TIMEOUT: "+t})}Il.prototype.info=function(){};function gS(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return yh(n)}catch{return t}}var Ws={},vf=null;function Pl(){return vf=vf||new ee}Ws.Ta="serverreachability";function d_(e){ge.call(this,Ws.Ta,e)}ne(d_,ge);function Wr(e){const t=Pl();re(t,new d_(t))}Ws.STAT_EVENT="statevent";function f_(e,t){ge.call(this,Ws.STAT_EVENT,e),this.stat=t}ne(f_,ge);function we(e){const t=Pl();re(t,new f_(t,e))}Ws.Ua="timingevent";function g_(e,t){ge.call(this,Ws.Ua,e),this.size=t}ne(g_,ge);function yo(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){e()},t)}var Ml={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},p_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Th(){}Th.prototype.h=null;function bf(e){return e.h||(e.h=e.i())}function m_(){}var vo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Eh(){ge.call(this,"d")}ne(Eh,ge);function xh(){ge.call(this,"c")}ne(xh,ge);var uu;function Rl(){}ne(Rl,Th);Rl.prototype.g=function(){return new XMLHttpRequest};Rl.prototype.i=function(){return{}};uu=new Rl;function bo(e,t,n,s){this.l=e,this.j=t,this.m=n,this.W=s||1,this.U=new Ur(this),this.P=pS,e=ru?125:void 0,this.V=new Al(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new __}function __(){this.i=null,this.g="",this.h=!1}var pS=45e3,hu={},Va={};F=bo.prototype;F.setTimeout=function(e){this.P=e};function du(e,t,n){e.L=1,e.v=Dl(Ln(t)),e.s=n,e.S=!0,y_(e,null)}function y_(e,t){e.G=Date.now(),wo(e),e.A=Ln(e.v);var n=e.A,s=e.W;Array.isArray(s)||(s=[String(s)]),k_(n.i,"t",s),e.C=0,n=e.l.J,e.h=new __,e.g=q_(e.l,n?t:null,!e.s),0<e.O&&(e.M=new uS(fe(e.Pa,e,e.g),e.O)),u_(e.U,e.g,"readystatechange",e.nb),t=e.I?t_(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Wr(),hS(e.j,e.u,e.A,e.m,e.W,e.s)}F.nb=function(e){e=e.target;const t=this.M;t&&an(e)==3?t.l():this.Pa(e)};F.Pa=function(e){try{if(e==this.g)t:{const u=an(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ru||this.g&&(this.h.h||this.g.ja()||xf(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Wr(3):Wr(2)),Cl(this);var n=this.g.da();this.ca=n;e:if(v_(this)){var s=xf(this.g);e="";var i=s.length,r=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),vr(this);var o="";break e}this.h.i=new tt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:r&&t==i-1});s.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,dS(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fr(a)){var c=a;break e}}c=null}if(n=c)ai(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fu(this,n);else{this.i=!1,this.o=3,we(12),ws(this),vr(this);break t}}this.S?(b_(this,u,o),ru&&this.i&&u==3&&(u_(this.U,this.V,"tick",this.mb),this.V.start())):(ai(this.j,this.m,o,null),fu(this,o)),u==4&&ws(this),this.i&&!this.J&&(u==4?W_(this.l,this):(this.i=!1,wo(this)))}else LS(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,we(12)):(this.o=0,we(13)),ws(this),vr(this)}}}catch{}finally{}};function v_(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function b_(e,t,n){let s=!0,i;for(;!e.J&&e.C<n.length;)if(i=mS(e,n),i==Va){t==4&&(e.o=4,we(14),s=!1),ai(e.j,e.m,null,"[Incomplete Response]");break}else if(i==hu){e.o=4,we(15),ai(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}else ai(e.j,e.m,i,null),fu(e,i);v_(e)&&i!=Va&&i!=hu&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,we(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mh(t),t.M=!0,we(11))):(ai(e.j,e.m,n,"[Invalid Chunked Response]"),ws(e),vr(e))}F.mb=function(){if(this.g){var e=an(this.g),t=this.g.ja();this.C<t.length&&(Cl(this),b_(this,e,t),this.i&&e!=4&&wo(this))}};function mS(e,t){var n=e.C,s=t.indexOf(`
`,n);return s==-1?Va:(n=Number(t.substring(n,s)),isNaN(n)?hu:(s+=1,s+n>t.length?Va:(t=t.slice(s,s+n),e.C=s+n,t)))}F.cancel=function(){this.J=!0,ws(this)};function wo(e){e.Y=Date.now()+e.P,w_(e,e.P)}function w_(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=yo(fe(e.lb,e),t)}function Cl(e){e.B&&(tt.clearTimeout(e.B),e.B=null)}F.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(fS(this.j,this.A),this.L!=2&&(Wr(),we(17)),ws(this),this.o=2,vr(this)):w_(this,this.Y-e)};function vr(e){e.l.H==0||e.J||W_(e.l,e)}function ws(e){Cl(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,bh(e.V),h_(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function fu(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||gu(n.i,e))){if(!e.K&&gu(n.i,e)&&n.H==3){try{var s=n.Ja.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Fa(n),Nl(n);else break t;Ph(n),we(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=yo(fe(n.ib,n),6e3));if(1>=P_(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ts(n,11)}else if((e.K||n.g==e)&&Fa(n),!Fr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const f=e.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var r=s.i;r.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(Sh(r,r.h),r.h=null))}if(s.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(s.Da=m,It(s.I,s.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=e;if(s.wa=Y_(s,s.J?s.pa:null,s.Y),o.K){M_(s.i,o);var a=o,l=s.L;l&&a.setTimeout(l),a.B&&(Cl(a),wo(a)),s.g=o}else z_(s);0<n.j.length&&Fl(n)}else c[0]!="stop"&&c[0]!="close"||Ts(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ts(n,7):Ih(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Wr(4)}catch{}}function _S(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(El(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}t=[],n=0;for(s in e)t[n++]=e[s];return t}function yS(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(El(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}function T_(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(El(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=yS(e),s=_S(e),i=s.length,r=0;r<i;r++)t.call(void 0,s[r],n&&n[r],e)}var E_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vS(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),i=null;if(0<=s){var r=e[n].substring(0,s);i=e[n].substring(s+1)}else r=e[n];t(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ks(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ks){this.h=e.h,La(this,e.j),this.s=e.s,this.g=e.g,Na(this,e.m),this.l=e.l;var t=e.i,n=new jr;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wf(this,n),this.o=e.o}else e&&(t=String(e).match(E_))?(this.h=!1,La(this,t[1]||"",!0),this.s=ar(t[2]||""),this.g=ar(t[3]||"",!0),Na(this,t[4]),this.l=ar(t[5]||"",!0),wf(this,t[6]||"",!0),this.o=ar(t[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}ks.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lr(t,Tf,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(lr(t,Tf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(lr(n,n.charAt(0)=="/"?TS:wS,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lr(n,xS)),e.join("")};function Ln(e){return new ks(e)}function La(e,t,n){e.j=n?ar(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Na(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wf(e,t,n){t instanceof jr?(e.i=t,SS(e.i,e.h)):(n||(t=lr(t,ES)),e.i=new jr(t,e.h))}function It(e,t,n){e.i.set(t,n)}function Dl(e){return It(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ar(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,bS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bS(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Tf=/[#\/\?@]/g,wS=/[#\?:]/g,TS=/[#\?]/g,ES=/[#\?@]/g,xS=/#/g;function jr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ls(e){e.g||(e.g=new Map,e.h=0,e.i&&vS(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}F=jr.prototype;F.add=function(e,t){ls(this),this.i=null,e=$i(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function x_(e,t){ls(e),t=$i(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function S_(e,t){return ls(e),t=$i(e,t),e.g.has(t)}F.forEach=function(e,t){ls(this),this.g.forEach(function(n,s){n.forEach(function(i){e.call(t,i,s,this)},this)},this)};F.ta=function(){ls(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const i=e[s];for(let r=0;r<i.length;r++)n.push(t[s])}return n};F.Z=function(e){ls(this);let t=[];if(typeof e=="string")S_(this,e)&&(t=t.concat(this.g.get($i(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};F.set=function(e,t){return ls(this),this.i=null,e=$i(this,e),S_(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};F.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function k_(e,t,n){x_(e,t),0<n.length&&(e.i=null,e.g.set($i(e,t),hh(n)),e.h+=n.length)}F.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),e.push(i)}}return this.i=e.join("&")};function $i(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function SS(e,t){t&&!e.j&&(ls(e),e.i=null,e.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(x_(this,s),k_(this,i,n))},e)),e.j=t}var kS=class{constructor(e,t){this.g=e,this.map=t}};function A_(e){this.l=e||AS,tt.PerformanceNavigationTiming?(e=tt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(tt.g&&tt.g.Ka&&tt.g.Ka()&&tt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var AS=10;function I_(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function P_(e){return e.h?1:e.g?e.g.size:0}function gu(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Sh(e,t){e.g?e.g.add(t):e.h=t}function M_(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}A_.prototype.cancel=function(){if(this.i=R_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function R_(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return hh(e.i)}var IS=class{stringify(e){return tt.JSON.stringify(e,void 0)}parse(e){return tt.JSON.parse(e,void 0)}};function PS(){this.g=new IS}function MS(e,t,n){const s=n||"";try{T_(e,function(i,r){let o=i;mo(i)&&(o=yh(i)),t.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw t.push(s+"type="+encodeURIComponent("_badmap")),i}}function RS(e,t){const n=new Il;if(tt.Image){const s=new Image;s.onload=Lo(Fo,n,s,"TestLoadImage: loaded",!0,t),s.onerror=Lo(Fo,n,s,"TestLoadImage: error",!1,t),s.onabort=Lo(Fo,n,s,"TestLoadImage: abort",!1,t),s.ontimeout=Lo(Fo,n,s,"TestLoadImage: timeout",!1,t),tt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}function Fo(e,t,n,s,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(s)}catch{}}function Ol(e){this.l=e.ec||null,this.j=e.ob||!1}ne(Ol,Th);Ol.prototype.g=function(){return new Vl(this.l,this.j)};Ol.prototype.i=function(e){return function(){return e}}({});function Vl(e,t){ee.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=kh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ne(Vl,ee);var kh=0;F=Vl.prototype;F.open=function(e,t){if(this.readyState!=kh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hr(this)};F.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||tt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};F.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=kh};F.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof tt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;C_(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function C_(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}F.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?To(this):Hr(this),this.readyState==3&&C_(this)}};F.Za=function(e){this.g&&(this.response=this.responseText=e,To(this))};F.Ya=function(e){this.g&&(this.response=e,To(this))};F.ka=function(){this.g&&To(this)};function To(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hr(e)}F.setRequestHeader=function(e,t){this.v.append(e,t)};F.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};F.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Hr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var CS=tt.JSON.parse;function Ut(e){ee.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=D_,this.L=this.M=!1}ne(Ut,ee);var D_="",DS=/^https?$/i,OS=["POST","PUT"];F=Ut.prototype;F.Oa=function(e){this.M=e};F.ha=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uu.g(),this.C=this.u?bf(this.u):bf(uu),this.g.onreadystatechange=fe(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(r){Ef(this,r);return}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=tt.FormData&&e instanceof tt.FormData,!(0<=Qm(OS,t))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{L_(this),0<this.B&&((this.L=VS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fe(this.ua,this)):this.A=wh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(r){Ef(this,r)}};function VS(e){return Ei&&typeof e.timeout=="number"&&e.ontimeout!==void 0}F.ua=function(){typeof uh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,re(this,"timeout"),this.abort(8))};function Ef(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,O_(e),Ll(e)}function O_(e){e.F||(e.F=!0,re(e,"complete"),re(e,"error"))}F.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ll(this))};F.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ll(this,!0)),Ut.$.N.call(this)};F.La=function(){this.s||(this.G||this.v||this.l?V_(this):this.kb())};F.kb=function(){V_(this)};function V_(e){if(e.h&&typeof uh<"u"&&(!e.C[1]||an(e)!=4||e.da()!=2)){if(e.v&&an(e)==4)wh(e.La,0,e);else if(re(e,"readystatechange"),an(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var s;if(s=o===0){var i=String(e.I).match(E_)[1]||null;!i&&tt.self&&tt.self.location&&(i=tt.self.location.protocol.slice(0,-1)),s=!DS.test(i?i.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var r=2<an(e)?e.g.statusText:""}catch{r=""}e.j=r+" ["+e.da()+"]",O_(e)}}finally{Ll(e)}}}}function Ll(e,t){if(e.g){L_(e);const n=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||re(e,"ready");try{n.onreadystatechange=s}catch{}}}function L_(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(tt.clearTimeout(e.A),e.A=null)}F.isActive=function(){return!!this.g};function an(e){return e.g?e.g.readyState:0}F.da=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}};F.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};F.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),CS(t)}};function xf(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case D_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function LS(e){const t={};e=(e.g&&2<=an(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<e.length;s++){if(Fr(e[s]))continue;var n=aS(e[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=t[i]||[];t[i]=r,r.push(n)}tS(t,function(s){return s.join(", ")})}F.Ia=function(){return this.m};F.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function N_(e){let t="";return fh(e,function(n,s){t+=s,t+=":",t+=n,t+=`\r
`}),t}function Ah(e,t,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=N_(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):It(e,t,n))}function Ji(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function F_(e){this.Ga=0,this.j=[],this.l=new Il,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ji("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ji("baseRetryDelayMs",5e3,e),this.hb=Ji("retryDelaySeedMs",1e4,e),this.eb=Ji("forwardChannelMaxRetries",2,e),this.xa=Ji("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new A_(e&&e.concurrentRequestLimit),this.Ja=new PS,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}F=F_.prototype;F.ra=8;F.H=1;function Ih(e){if($_(e),e.H==3){var t=e.W++,n=Ln(e.I);if(It(n,"SID",e.K),It(n,"RID",t),It(n,"TYPE","terminate"),Eo(e,n),t=new bo(e,e.l,t),t.L=2,t.v=Dl(Ln(n)),n=!1,tt.navigator&&tt.navigator.sendBeacon)try{n=tt.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&tt.Image&&(new Image().src=t.v,n=!0),n||(t.g=q_(t.l,null),t.g.ha(t.v)),t.G=Date.now(),wo(t)}H_(e)}function Nl(e){e.g&&(Mh(e),e.g.cancel(),e.g=null)}function $_(e){Nl(e),e.u&&(tt.clearTimeout(e.u),e.u=null),Fa(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&tt.clearTimeout(e.m),e.m=null)}function Fl(e){if(!I_(e.i)&&!e.m){e.m=!0;var t=e.Na;Br||l_(),zr||(Br(),zr=!0),vh.add(t,e),e.C=0}}function NS(e,t){return P_(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=yo(fe(e.Na,e,t),j_(e,e.C)),e.C++,!0)}F.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new bo(this,this.l,e);let r=this.s;if(this.U&&(r?(r=t_(r),e_(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=B_(this,i,t),n=Ln(this.I),It(n,"RID",e),It(n,"CVER",22),this.F&&It(n,"X-HTTP-Session-Id",this.F),Eo(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(N_(r)))+"&"+t:this.o&&Ah(n,this.o,r)),Sh(this.i,i),this.bb&&It(n,"TYPE","init"),this.P?(It(n,"$req",t),It(n,"SID","null"),i.aa=!0,du(i,n,null)):du(i,n,t),this.H=2}}else this.H==3&&(e?Sf(this,e):this.j.length==0||I_(this.i)||Sf(this))};function Sf(e,t){var n;t?n=t.m:n=e.W++;const s=Ln(e.I);It(s,"SID",e.K),It(s,"RID",n),It(s,"AID",e.V),Eo(e,s),e.o&&e.s&&Ah(s,e.o,e.s),n=new bo(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=B_(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Sh(e.i,n),du(n,s,t)}function Eo(e,t){e.na&&fh(e.na,function(n,s){It(t,s,n)}),e.h&&T_({},function(n,s){It(t,s,n)})}function B_(e,t,n){n=Math.min(e.j.length,n);var s=e.h?fe(e.h.Va,e.h,e):null;t:{var i=e.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=r,0>c)r=Math.max(0,i[l].g-100),a=!1;else try{MS(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,s}function z_(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Br||l_(),zr||(Br(),zr=!0),vh.add(t,e),e.A=0}}function Ph(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=yo(fe(e.Ma,e),j_(e,e.A)),e.A++,!0)}F.Ma=function(){if(this.u=null,U_(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=yo(fe(this.jb,this),e)}};F.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,we(10),Nl(this),U_(this))};function Mh(e){e.B!=null&&(tt.clearTimeout(e.B),e.B=null)}function U_(e){e.g=new bo(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ln(e.wa);It(t,"RID","rpc"),It(t,"SID",e.K),It(t,"AID",e.V),It(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&It(t,"TO",e.qa),It(t,"TYPE","xmlhttp"),Eo(e,t),e.o&&e.s&&Ah(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Dl(Ln(t)),n.s=null,n.S=!0,y_(n,e)}F.ib=function(){this.v!=null&&(this.v=null,Nl(this),Ph(this),we(19))};function Fa(e){e.v!=null&&(tt.clearTimeout(e.v),e.v=null)}function W_(e,t){var n=null;if(e.g==t){Fa(e),Mh(e),e.g=null;var s=2}else if(gu(e.i,t))n=t.F,M_(e.i,t),s=1;else return;if(e.H!=0){if(t.i)if(s==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;s=Pl(),re(s,new g_(s,n)),Fl(e)}else z_(e);else if(i=t.o,i==3||i==0&&0<t.ca||!(s==1&&NS(e,t)||s==2&&Ph(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ts(e,5);break;case 4:Ts(e,10);break;case 3:Ts(e,6);break;default:Ts(e,2)}}}function j_(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ts(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var s=fe(e.pb,e);n||(n=new ks("//www.google.com/images/cleardot.gif"),tt.location&&tt.location.protocol=="http"||La(n,"https"),Dl(n)),RS(n.toString(),s)}else we(2);e.H=0,e.h&&e.h.za(t),H_(e),$_(e)}F.pb=function(e){e?(this.l.info("Successfully pinged google.com"),we(2)):(this.l.info("Failed to ping google.com"),we(1))};function H_(e){if(e.H=0,e.ma=[],e.h){const t=R_(e.i);(t.length!=0||e.j.length!=0)&&(pf(e.ma,t),pf(e.ma,e.j),e.i.i.length=0,hh(e.j),e.j.length=0),e.h.ya()}}function Y_(e,t,n){var s=n instanceof ks?Ln(n):new ks(n);if(s.g!="")t&&(s.g=t+"."+s.g),Na(s,s.m);else{var i=tt.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var r=new ks(null);s&&La(r,s),t&&(r.g=t),i&&Na(r,i),n&&(r.l=n),s=r}return n=e.F,t=e.Da,n&&t&&It(s,n,t),It(s,"VER",e.ra),Eo(e,s),s}function q_(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new Ut(new Ol({ob:!0})):new Ut(e.va),t.Oa(e.J),t}F.isActive=function(){return!!this.h&&this.h.isActive(this)};function G_(){}F=G_.prototype;F.Ba=function(){};F.Aa=function(){};F.za=function(){};F.ya=function(){};F.isActive=function(){return!0};F.Va=function(){};function $a(){if(Ei&&!(10<=Number(Qx)))throw Error("Environmental error: no available transport.")}$a.prototype.g=function(e,t){return new Pe(e,t)};function Pe(e,t){ee.call(this),this.g=new F_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Fr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Fr(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Bi(this)}ne(Pe,ee);Pe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;we(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Y_(e,null,e.Y),Fl(e)};Pe.prototype.close=function(){Ih(this.g)};Pe.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=yh(e),e=n);t.j.push(new kS(t.fb++,e)),t.H==3&&Fl(t)};Pe.prototype.N=function(){this.g.h=null,delete this.j,Ih(this.g),delete this.g,Pe.$.N.call(this)};function K_(e){Eh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}ne(K_,Eh);function Q_(){xh.call(this),this.status=1}ne(Q_,xh);function Bi(e){this.g=e}ne(Bi,G_);Bi.prototype.Ba=function(){re(this.g,"a")};Bi.prototype.Aa=function(e){re(this.g,new K_(e))};Bi.prototype.za=function(e){re(this.g,new Q_)};Bi.prototype.ya=function(){re(this.g,"b")};function FS(){this.blockSize=-1}function Je(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ne(Je,FS);Je.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ec(e,t,n){n||(n=0);var s=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)s[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var r=e.g[3],o=t+(r^n&(i^r))+s[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[1]+3905402710&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[5]+1200080426&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[9]+2336552879&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[13]+4254626195&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^r&(n^i))+s[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[6]+3225465664&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[10]+38016083&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[14]+3275163606&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[2]+4243563512&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^r)+s[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[8]+2272392833&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[4]+1272893353&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[0]+3936430074&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[12]+3873151461&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~r))+s[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[7]+1126891415&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[3]+2399980690&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[15]+4264355552&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[11]+3174756917&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+r&4294967295}Je.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,s=this.m,i=this.h,r=0;r<t;){if(i==0)for(;r<=n;)Ec(this,e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[i++]=e.charCodeAt(r++),i==this.blockSize){Ec(this,s),i=0;break}}else for(;r<t;)if(s[i++]=e[r++],i==this.blockSize){Ec(this,s),i=0;break}}this.h=i,this.i+=t};Je.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};function bt(e,t){this.h=t;for(var n=[],s=!0,i=e.length-1;0<=i;i--){var r=e[i]|0;s&&r==t||(n[i]=r,s=!1)}this.g=n}var $S={};function Rh(e){return-128<=e&&128>e?qx(e,function(t){return new bt([t|0],0>t?-1:0)}):new bt([e|0],0>e?-1:0)}function ln(e){if(isNaN(e)||!isFinite(e))return mi;if(0>e)return ie(ln(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=pu;return new bt(t,0)}function X_(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return ie(X_(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ln(Math.pow(t,8)),s=mi,i=0;i<e.length;i+=8){var r=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+r),t);8>r?(r=ln(Math.pow(t,r)),s=s.R(r).add(ln(o))):(s=s.R(n),s=s.add(ln(o)))}return s}var pu=4294967296,mi=Rh(0),mu=Rh(1),kf=Rh(16777216);F=bt.prototype;F.ea=function(){if(Le(this))return-ie(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.D(n);e+=(0<=s?s:pu+s)*t,t*=pu}return e};F.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Rn(this))return"0";if(Le(this))return"-"+ie(this).toString(e);for(var t=ln(Math.pow(e,6)),n=this,s="";;){var i=za(n,t).g;n=Ba(n,i.R(t));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Rn(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};F.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Rn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Le(e){return e.h==-1}F.X=function(e){return e=Ba(this,e),Le(e)?-1:Rn(e)?0:1};function ie(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new bt(n,~e.h).add(mu)}F.abs=function(){return Le(this)?ie(this):this};F.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var r=s+(this.D(i)&65535)+(e.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new bt(n,n[n.length-1]&-2147483648?-1:0)};function Ba(e,t){return e.add(ie(t))}F.R=function(e){if(Rn(this)||Rn(e))return mi;if(Le(this))return Le(e)?ie(this).R(ie(e)):ie(ie(this).R(e));if(Le(e))return ie(this.R(ie(e)));if(0>this.X(kf)&&0>e.X(kf))return ln(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=e.D(i)>>>16,l=e.D(i)&65535;n[2*s+2*i]+=o*l,$o(n,2*s+2*i),n[2*s+2*i+1]+=r*l,$o(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,$o(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,$o(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new bt(n,0)};function $o(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Zi(e,t){this.g=e,this.h=t}function za(e,t){if(Rn(t))throw Error("division by zero");if(Rn(e))return new Zi(mi,mi);if(Le(e))return t=za(ie(e),t),new Zi(ie(t.g),ie(t.h));if(Le(t))return t=za(e,ie(t)),new Zi(ie(t.g),t.h);if(30<e.g.length){if(Le(e)||Le(t))throw Error("slowDivide_ only works with positive integers.");for(var n=mu,s=t;0>=s.X(e);)n=Af(n),s=Af(s);var i=Xs(n,1),r=Xs(s,1);for(s=Xs(s,2),n=Xs(n,2);!Rn(s);){var o=r.add(s);0>=o.X(e)&&(i=i.add(n),r=o),s=Xs(s,1),n=Xs(n,1)}return t=Ba(e,i.R(t)),new Zi(i,t)}for(i=mi;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=ln(n),o=r.R(t);Le(o)||0<o.X(e);)n-=s,r=ln(n),o=r.R(t);Rn(r)&&(r=mu),i=i.add(r),e=Ba(e,o)}return new Zi(i,e)}F.gb=function(e){return za(this,e).h};F.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)&e.D(s);return new bt(n,this.h&e.h)};F.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)|e.D(s);return new bt(n,this.h|e.h)};F.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)^e.D(s);return new bt(n,this.h^e.h)};function Af(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.D(s)<<1|e.D(s-1)>>>31;return new bt(n,e.h)}function Xs(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],r=0;r<s;r++)i[r]=0<t?e.D(r+n)>>>t|e.D(r+n+1)<<32-t:e.D(r+n);return new bt(i,e.h)}$a.prototype.createWebChannel=$a.prototype.g;Pe.prototype.send=Pe.prototype.u;Pe.prototype.open=Pe.prototype.m;Pe.prototype.close=Pe.prototype.close;Ml.NO_ERROR=0;Ml.TIMEOUT=8;Ml.HTTP_ERROR=6;p_.COMPLETE="complete";m_.EventType=vo;vo.OPEN="a";vo.CLOSE="b";vo.ERROR="c";vo.MESSAGE="d";ee.prototype.listen=ee.prototype.O;Ut.prototype.listenOnce=Ut.prototype.P;Ut.prototype.getLastError=Ut.prototype.Sa;Ut.prototype.getLastErrorCode=Ut.prototype.Ia;Ut.prototype.getStatus=Ut.prototype.da;Ut.prototype.getResponseJson=Ut.prototype.Wa;Ut.prototype.getResponseText=Ut.prototype.ja;Ut.prototype.send=Ut.prototype.ha;Ut.prototype.setWithCredentials=Ut.prototype.Oa;Je.prototype.digest=Je.prototype.l;Je.prototype.reset=Je.prototype.reset;Je.prototype.update=Je.prototype.j;bt.prototype.add=bt.prototype.add;bt.prototype.multiply=bt.prototype.R;bt.prototype.modulo=bt.prototype.gb;bt.prototype.compare=bt.prototype.X;bt.prototype.toNumber=bt.prototype.ea;bt.prototype.toString=bt.prototype.toString;bt.prototype.getBits=bt.prototype.D;bt.fromNumber=ln;bt.fromString=X_;var BS=function(){return new $a},zS=function(){return Pl()},xc=Ml,US=p_,WS=Ws,If={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Bo=m_,jS=Ut,HS=Je,_i=bt;const Pf="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}le.UNAUTHENTICATED=new le(null),le.GOOGLE_CREDENTIALS=new le("google-credentials-uid"),le.FIRST_PARTY=new le("first-party-uid"),le.MOCK_USER=new le("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new jm("@firebase/firestore");function tr(){return Rs.logLevel}function H(e,...t){if(Rs.logLevel<=dt.DEBUG){const n=t.map(Ch);Rs.debug(`Firestore (${zi}): ${e}`,...n)}}function Nn(e,...t){if(Rs.logLevel<=dt.ERROR){const n=t.map(Ch);Rs.error(`Firestore (${zi}): ${e}`,...n)}}function xi(e,...t){if(Rs.logLevel<=dt.WARN){const n=t.map(Ch);Rs.warn(`Firestore (${zi}): ${e}`,...n)}}function Ch(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e="Unexpected state"){const t=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+e;throw Nn(t),new Error(t)}function Pt(e,t){e||Z()}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class YS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(le.UNAUTHENTICATED))}shutdown(){}}class qS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GS{constructor(t){this.t=t,this.currentUser=le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ts,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ts)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string"),new J_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Pt(t===null||typeof t=="string"),new le(t)}}class KS{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class QS{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new KS(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(le.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JS{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const s=r=>{r.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Pt(typeof n.token=="string"),this.R=n.token,new XS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{static V(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=ZS(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%t.length))}return s}}function _t(e,t){return e<t?-1:e>t?1:0}function Si(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qt.fromMillis(Date.now())}static fromDate(t){return Qt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new Qt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_t(this.nanoseconds,t.nanoseconds):_t(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.timestamp=t}static fromTimestamp(t){return new et(t)}static min(){return new et(new Qt(0,0))}static max(){return new et(new Qt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n,s){n===void 0?n=0:n>t.length&&Z(),s===void 0?s=t.length-n:s>t.length-n&&Z(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Yr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Yr?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=t.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Lt extends Yr{construct(t,n,s){return new Lt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new X(M.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const tk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends Yr{construct(t,n,s){return new ue(t,n,s)}static isValidIdentifier(t){return tk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ue(["__name__"])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new X(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new X(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(n)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(Lt.fromString(t))}static fromName(t){return new J(Lt.fromString(t).popFirst(5))}static empty(){return new J(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Lt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Lt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new Lt(t.slice()))}}function ek(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=et.fromTimestamp(s===1e9?new Qt(n+1,0):new Qt(n,s));return new ss(i,J.empty(),t)}function nk(e){return new ss(e.readTime,e.key,-1)}class ss{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ss(et.min(),J.empty(),-1)}static max(){return new ss(et.max(),J.empty(),-1)}}function sk(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=J.comparator(e.documentKey,t.documentKey),n!==0?n:_t(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==ik)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new P((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):P.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):P.reject(n)}static resolve(t){return new P((n,s)=>{n(t)})}static reject(t){return new P((n,s)=>{s(t)})}static waitFor(t){return new P((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(t){let n=P.resolve(!1);for(const s of t)n=n.next(i=>i?P.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new P((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(t,n){return new P((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}function So(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Dh.ae=-1;function $l(e){return e==null}function Ua(e){return e===0&&1/e==-1/0}function ok(e){return typeof e=="number"&&Number.isInteger(e)&&!Ua(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ui(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t,n){this.comparator=t,this.root=n||se.EMPTY}insert(t,n){return new Bt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,se.BLACK,null,null))}remove(t){return new Bt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,se.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zo(this.root,t,this.comparator,!1)}getReverseIterator(){return new zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zo(this.root,t,this.comparator,!0)}}class zo{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class se{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??se.RED,this.left=i??se.EMPTY,this.right=r??se.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new se(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return se.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return se.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,se.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const t=this.left.check();if(t!==this.right.check())throw Z();return t+(this.isRed()?0:1)}}se.EMPTY=null,se.RED=!0,se.BLACK=!1;se.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(t,n,s,i,r){return this}insert(t,n,s){return new se(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.comparator=t,this.data=new Bt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(t){return new Rf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof pe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new pe(this.comparator);return n.data=t,n}}class Rf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new Ye([])}unionWith(t){let n=new pe(ue.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Si(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ey("Invalid base64 string: "+r):r}}(t);return new me(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new me(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _t(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}me.EMPTY_BYTE_STRING=new me("");const ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(e){if(Pt(!!e),typeof e=="string"){let t=0;const n=ak.exec(e);if(Pt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Yt(e.seconds),nanos:Yt(e.nanos)}}function Yt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cs(e){return typeof e=="string"?me.fromBase64String(e):me.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vh(e){const t=e.mapValue.fields.__previous_value__;return Oh(t)?Vh(t):t}function qr(e){const t=is(e.mapValue.fields.__local_write_time__.timestampValue);return new Qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n,s,i,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Gr{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Gr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Gr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ds(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Oh(e)?4:ck(e)?9007199254740991:10:Z()}function pn(e,t){if(e===t)return!0;const n=Ds(e);if(n!==Ds(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qr(e).isEqual(qr(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=is(i.timestampValue),a=is(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return Cs(i.bytesValue).isEqual(Cs(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return Yt(i.geoPointValue.latitude)===Yt(r.geoPointValue.latitude)&&Yt(i.geoPointValue.longitude)===Yt(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Yt(i.integerValue)===Yt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Yt(i.doubleValue),a=Yt(r.doubleValue);return o===a?Ua(o)===Ua(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Si(e.arrayValue.values||[],t.arrayValue.values||[],pn);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Mf(o)!==Mf(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pn(o[l],a[l])))return!1;return!0}(e,t);default:return Z()}}function Kr(e,t){return(e.values||[]).find(n=>pn(n,t))!==void 0}function ki(e,t){if(e===t)return 0;const n=Ds(e),s=Ds(t);if(n!==s)return _t(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return _t(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Yt(r.integerValue||r.doubleValue),l=Yt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Cf(e.timestampValue,t.timestampValue);case 4:return Cf(qr(e),qr(t));case 5:return _t(e.stringValue,t.stringValue);case 6:return function(r,o){const a=Cs(r),l=Cs(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=_t(a[c],l[c]);if(u!==0)return u}return _t(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=_t(Yt(r.latitude),Yt(o.latitude));return a!==0?a:_t(Yt(r.longitude),Yt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,o){const a=r.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ki(a[c],l[c]);if(u)return u}return _t(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===Uo.mapValue&&o===Uo.mapValue)return 0;if(r===Uo.mapValue)return 1;if(o===Uo.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=_t(l[h],u[h]);if(d!==0)return d;const f=ki(a[l[h]],c[u[h]]);if(f!==0)return f}return _t(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Z()}}function Cf(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return _t(e,t);const n=is(e),s=is(t),i=_t(n.seconds,s.seconds);return i!==0?i:_t(n.nanos,s.nanos)}function Ai(e){return _u(e)}function _u(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=is(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Cs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return J.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=_u(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${_u(n.fields[o])}`;return i+"}"}(e.mapValue):Z()}function yu(e){return!!e&&"integerValue"in e}function Lh(e){return!!e&&"arrayValue"in e}function Df(e){return!!e&&"nullValue"in e}function Of(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ha(e){return!!e&&"mapValue"in e}function br(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ui(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=br(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=br(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ck(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.value=t}static empty(){return new Ne({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!ha(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=br(n)}setAll(t){let n=ue.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=br(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());ha(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return pn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];ha(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){Ui(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new Ne(br(this.value))}}function ny(e){const t=[];return Ui(e.fields,(n,s)=>{const i=new ue([n]);if(ha(s)){const r=ny(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Ye(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ce(t,0,et.min(),et.min(),et.min(),Ne.empty(),0)}static newFoundDocument(t,n,s,i){return new ce(t,1,n,et.min(),s,i,0)}static newNoDocument(t,n){return new ce(t,2,n,et.min(),et.min(),Ne.empty(),0)}static newUnknownDocument(t,n){return new ce(t,3,n,et.min(),et.min(),Ne.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ce&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,n){this.position=t,this.inclusive=n}}function Vf(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=J.comparator(J.fromName(o.referenceValue),n.key):s=ki(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Lf(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!pn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t,n="asc"){this.field=t,this.dir=n}}function uk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{}class qt extends sy{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new dk(t,n,s):n==="array-contains"?new pk(t,s):n==="in"?new mk(t,s):n==="not-in"?new _k(t,s):n==="array-contains-any"?new yk(t,s):new qt(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new fk(t,s):new gk(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ki(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(ki(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mn extends sy{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new mn(t,n)}matches(t){return iy(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le(n=>n.isInequality());return t!==null?t.field:null}le(t){for(const n of this.getFlattenedFilters())if(t(n))return n;return null}}function iy(e){return e.op==="and"}function ry(e){return hk(e)&&iy(e)}function hk(e){for(const t of e.filters)if(t instanceof mn)return!1;return!0}function vu(e){if(e instanceof qt)return e.field.canonicalString()+e.op.toString()+Ai(e.value);if(ry(e))return e.filters.map(t=>vu(t)).join(",");{const t=e.filters.map(n=>vu(n)).join(",");return`${e.op}(${t})`}}function oy(e,t){return e instanceof qt?function(s,i){return i instanceof qt&&s.op===i.op&&s.field.isEqual(i.field)&&pn(s.value,i.value)}(e,t):e instanceof mn?function(s,i){return i instanceof mn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&oy(o,i.filters[a]),!0):!1}(e,t):void Z()}function ay(e){return e instanceof qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`}(e):e instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(ay).join(" ,")+"}"}(e):"Filter"}class dk extends qt{constructor(t,n,s){super(t,n,s),this.key=J.fromName(s.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.matchesComparison(n)}}class fk extends qt{constructor(t,n){super(t,"in",n),this.keys=ly("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class gk extends qt{constructor(t,n){super(t,"not-in",n),this.keys=ly("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ly(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>J.fromName(s.referenceValue))}class pk extends qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Lh(n)&&Kr(n.arrayValue,this.value)}}class mk extends qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Kr(this.value.arrayValue,n)}}class _k extends qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Kr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Kr(this.value.arrayValue,n)}}class yk extends qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Kr(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.he=null}}function Nf(e,t=null,n=[],s=[],i=null,r=null,o=null){return new vk(e,t,n,s,i,r,o)}function Nh(e){const t=st(e);if(t.he===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>vu(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),$l(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Ai(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Ai(s)).join(",")),t.he=n}return t.he}function Fh(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!oy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lf(e.startAt,t.startAt)&&Lf(e.endAt,t.endAt)}function bu(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function bk(e,t,n,s,i,r,o,a){return new Bl(e,t,n,s,i,r,o,a)}function cy(e){return new Bl(e)}function Ff(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function wk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Tk(e){for(const t of e.filters){const n=t.getFirstInequalityField();if(n!==null)return n}return null}function Ek(e){return e.collectionGroup!==null}function Tr(e){const t=st(e);if(t.Pe===null){t.Pe=[];const n=Tk(t),s=wk(t);if(n!==null&&s===null)n.isKeyField()||t.Pe.push(new wr(n)),t.Pe.push(new wr(ue.keyField(),"asc"));else{let i=!1;for(const r of t.explicitOrderBy)t.Pe.push(r),r.field.isKeyField()&&(i=!0);if(!i){const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new wr(ue.keyField(),r))}}}return t.Pe}function un(e){const t=st(e);return t.Ie||(t.Ie=xk(t,Tr(e))),t.Ie}function xk(e,t){if(e.limitType==="F")return Nf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new wr(i.field,r)});const n=e.endAt?new Wa(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Wa(e.startAt.position,e.startAt.inclusive):null;return Nf(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function wu(e,t,n){return new Bl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zl(e,t){return Fh(un(e),un(t))&&e.limitType===t.limitType}function uy(e){return`${Nh(un(e))}|lt:${e.limitType}`}function ni(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>ay(i)).join(", ")}]`),$l(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Ai(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Ai(i)).join(",")),`Target(${s})`}(un(e))}; limitType=${e.limitType})`}function Ul(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):J.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of Tr(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=Vf(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,Tr(s),i)||s.endAt&&!function(o,a,l){const c=Vf(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,Tr(s),i))}(e,t)}function Sk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hy(e){return(t,n)=>{let s=!1;for(const i of Tr(e)){const r=kk(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function kk(e,t,n){const s=e.field.isKeyField()?J.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?ki(l,c):Z()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ui(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return ty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Bt(J.comparator);function Fn(){return Ak}const dy=new Bt(J.comparator);function cr(...e){let t=dy;for(const n of e)t=t.insert(n.key,n);return t}function fy(e){let t=dy;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Es(){return Er()}function gy(){return Er()}function Er(){return new Wi(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ik=new Bt(J.comparator),Pk=new pe(J.comparator);function ct(...e){let t=Pk;for(const n of e)t=t.add(n);return t}const Mk=new pe(_t);function Rk(){return Mk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(t)?"-0":t}}function my(e){return{integerValue:""+e}}function Ck(e,t){return ok(t)?my(t):py(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this._=void 0}}function Dk(e,t,n){return e instanceof ja?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Oh(r)&&(r=Vh(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,t):e instanceof Qr?yy(e,t):e instanceof Xr?vy(e,t):function(i,r){const o=_y(i,r),a=$f(o)+$f(i.Te);return yu(o)&&yu(i.Te)?my(a):py(i.serializer,a)}(e,t)}function Ok(e,t,n){return e instanceof Qr?yy(e,t):e instanceof Xr?vy(e,t):n}function _y(e,t){return e instanceof Ha?function(s){return yu(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class ja extends Wl{}class Qr extends Wl{constructor(t){super(),this.elements=t}}function yy(e,t){const n=by(t);for(const s of e.elements)n.some(i=>pn(i,s))||n.push(s);return{arrayValue:{values:n}}}class Xr extends Wl{constructor(t){super(),this.elements=t}}function vy(e,t){let n=by(t);for(const s of e.elements)n=n.filter(i=>!pn(i,s));return{arrayValue:{values:n}}}class Ha extends Wl{constructor(t,n){super(),this.serializer=t,this.Te=n}}function $f(e){return Yt(e.integerValue||e.doubleValue)}function by(e){return Lh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Vk(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof Qr&&i instanceof Qr||s instanceof Xr&&i instanceof Xr?Si(s.elements,i.elements,pn):s instanceof Ha&&i instanceof Ha?pn(s.Te,i.Te):s instanceof ja&&i instanceof ja}(e.transform,t.transform)}class Lk{constructor(t,n){this.version=t,this.transformResults=n}}class hn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new hn}static exists(t){return new hn(void 0,t)}static updateTime(t){return new hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function da(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class jl{}function wy(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $h(e.key,hn.none()):new ko(e.key,e.data,hn.none());{const n=e.data,s=Ne.empty();let i=new pe(ue.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new js(e.key,s,new Ye(i.toArray()),hn.none())}}function Nk(e,t,n){e instanceof ko?function(i,r,o){const a=i.value.clone(),l=zf(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof js?function(i,r,o){if(!da(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=zf(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(Ty(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function xr(e,t,n,s){return e instanceof ko?function(r,o,a,l){if(!da(r.precondition,o))return a;const c=r.value.clone(),u=Uf(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,s):e instanceof js?function(r,o,a,l){if(!da(r.precondition,o))return a;const c=Uf(r.fieldTransforms,l,o),u=o.data;return u.setAll(Ty(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(e,t,n,s):function(r,o,a){return da(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Fk(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=_y(s.transform,i||null);r!=null&&(n===null&&(n=Ne.empty()),n.set(s.field,r))}return n||null}function Bf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Si(s,i,(r,o)=>Vk(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ko extends jl{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class js extends jl{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Ty(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function zf(e,t,n){const s=new Map;Pt(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,Ok(o,a,n[i]))}return s}function Uf(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,Dk(r,o,t))}return s}class $h extends jl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $k extends jl{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&Nk(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=xr(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=xr(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=gy();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=wy(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ct())}isEqual(t){return this.batchId===t.batchId&&Si(this.mutations,t.mutations,(n,s)=>Bf(n,s))&&Si(this.baseMutations,t.baseMutations,(n,s)=>Bf(n,s))}}class Bh{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Pt(t.mutations.length===s.length);let i=function(){return Ik}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Bh(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,ut;function Wk(e){switch(e){default:return Z();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Ey(e){if(e===void 0)return Nn("GRPC error has no .code"),M.UNKNOWN;switch(e){case Ht.OK:return M.OK;case Ht.CANCELLED:return M.CANCELLED;case Ht.UNKNOWN:return M.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return M.INTERNAL;case Ht.UNAVAILABLE:return M.UNAVAILABLE;case Ht.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ht.NOT_FOUND:return M.NOT_FOUND;case Ht.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ht.ABORTED:return M.ABORTED;case Ht.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ht.DATA_LOSS:return M.DATA_LOSS;default:return Z()}}(ut=Ht||(Ht={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new _i([4294967295,4294967295],0);function Wf(e){const t=jk().encode(e),n=new HS;return n.update(t),new Uint8Array(n.digest())}function jf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new _i([n,s],0),new _i([i,r],0)]}class zh{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ur(`Invalid padding: ${n}`);if(s<0)throw new ur(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ur(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new ur(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*t.length-n,this.Re=_i.fromNumber(this.Ae)}Ve(t,n,s){let i=t.add(n.multiply(_i.fromNumber(s)));return i.compare(Hk)===1&&(i=new _i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ae===0)return!1;const n=Wf(t),[s,i]=jf(n);for(let r=0;r<this.hashCount;r++){const o=this.Ve(s,i,r);if(!this.me(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new zh(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.Ae===0)return;const n=Wf(t),[s,i]=jf(n);for(let r=0;r<this.hashCount;r++){const o=this.Ve(s,i,r);this.fe(o)}}fe(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class ur extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,Ao.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Hl(et.min(),i,new Bt(_t),Fn(),ct())}}class Ao{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ao(s,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,s,i){this.ge=t,this.removedTargetIds=n,this.key=s,this.pe=i}}class xy{constructor(t,n){this.targetId=t,this.ye=n}}class Sy{constructor(t,n,s=me.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Hf{constructor(){this.we=0,this.Se=qf(),this.be=me.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(t){t.approximateByteSize()>0&&(this.Ce=!0,this.be=t)}xe(){let t=ct(),n=ct(),s=ct();return this.Se.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Z()}}),new Ao(this.be,this.De,t,n,s)}Oe(){this.Ce=!1,this.Se=qf()}Ne(t,n){this.Ce=!0,this.Se=this.Se.insert(t,n)}Be(t){this.Ce=!0,this.Se=this.Se.remove(t)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class Yk{constructor(t){this.Qe=t,this.Ke=new Map,this.$e=Fn(),this.Ue=Yf(),this.We=new Bt(_t)}Ge(t){for(const n of t.ge)t.pe&&t.pe.isFoundDocument()?this.ze(n,t.pe):this.je(n,t.key,t.pe);for(const n of t.removedTargetIds)this.je(n,t.key,t.pe)}He(t){this.forEachTarget(t,n=>{const s=this.Je(n);switch(t.state){case 0:this.Ye(n)&&s.Me(t.resumeToken);break;case 1:s.ke(),s.ve||s.Oe(),s.Me(t.resumeToken);break;case 2:s.ke(),s.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(s.qe(),s.Me(t.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),s.Me(t.resumeToken));break;default:Z()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ke.forEach((s,i)=>{this.Ye(i)&&n(i)})}Xe(t){const n=t.targetId,s=t.ye.count,i=this.et(n);if(i){const r=i.target;if(bu(r))if(s===0){const o=new J(r.path);this.je(n,o,ce.newNoDocument(o,et.min()))}else Pt(s===1);else{const o=this.tt(n);if(o!==s){const a=this.nt(t),l=a?this.rt(a,t,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(t){const n=t.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Cs(s).toUint8Array()}catch(l){if(l instanceof ey)return xi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zh(o,i,r)}catch(l){return xi(l instanceof ur?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(t,n,s){return n.ye.count===s-this.ot(t,n.targetId)?0:2}ot(t,n){const s=this.Qe.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.je(n,r,null),i++)}),i}_t(t){const n=new Map;this.Ke.forEach((r,o)=>{const a=this.et(o);if(a){if(r.current&&bu(a.target)){const l=new J(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,ce.newNoDocument(l,t))}r.Fe&&(n.set(o,r.xe()),r.Oe())}});let s=ct();this.Ue.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.$e.forEach((r,o)=>o.setReadTime(t));const i=new Hl(t,n,this.We,this.$e,s);return this.$e=Fn(),this.Ue=Yf(),this.We=new Bt(_t),i}ze(t,n){if(!this.Ye(t))return;const s=this.ut(t,n.key)?2:0;this.Je(t).Ne(n.key,s),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}je(t,n,s){if(!this.Ye(t))return;const i=this.Je(t);this.ut(t,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),s&&(this.$e=this.$e.insert(n,s))}removeTarget(t){this.Ke.delete(t)}tt(t){const n=this.Je(t).xe();return this.Qe.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Le(t){this.Je(t).Le()}Je(t){let n=this.Ke.get(t);return n||(n=new Hf,this.Ke.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new pe(_t),this.Ue=this.Ue.insert(t,n)),n}Ye(t){const n=this.et(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}et(t){const n=this.Ke.get(t);return n&&n.ve?null:this.Qe.lt(t)}Ze(t){this.Ke.set(t,new Hf),this.Qe.getRemoteKeysForTarget(t).forEach(n=>{this.je(t,n,null)})}ut(t,n){return this.Qe.getRemoteKeysForTarget(t).has(n)}}function Yf(){return new Bt(J.comparator)}function qf(){return new Bt(J.comparator)}const qk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Gk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Kk=(()=>({and:"AND",or:"OR"}))();class Qk{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Tu(e,t){return e.useProto3Json||$l(t)?t:{value:t}}function Ya(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ky(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xk(e,t){return Ya(e,t.toTimestamp())}function dn(e){return Pt(!!e),et.fromTimestamp(function(n){const s=is(n);return new Qt(s.seconds,s.nanos)}(e))}function Uh(e,t){return function(s){return new Lt(["projects",s.projectId,"databases",s.database])}(e).child("documents").child(t).canonicalString()}function Ay(e){const t=Lt.fromString(e);return Pt(Ry(t)),t}function Eu(e,t){return Uh(e.databaseId,t.path)}function Sc(e,t){const n=Ay(t);if(n.get(1)!==e.databaseId.projectId)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(Iy(n))}function xu(e,t){return Uh(e.databaseId,t)}function Jk(e){const t=Ay(e);return t.length===4?Lt.emptyPath():Iy(t)}function Su(e){return new Lt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Iy(e){return Pt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Gf(e,t,n){return{name:Eu(e,t),fields:n.value.mapValue.fields}}function Zk(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Pt(u===void 0||typeof u=="string"),me.fromBase64String(u||"")):(Pt(u===void 0||u instanceof Uint8Array),me.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?M.UNKNOWN:Ey(c.code);return new X(u,c.message||"")}(o);n=new Sy(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Sc(e,s.document.name),r=dn(s.document.updateTime),o=s.document.createTime?dn(s.document.createTime):et.min(),a=new Ne({mapValue:{fields:s.document.fields}}),l=ce.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new fa(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Sc(e,s.document),r=s.readTime?dn(s.readTime):et.min(),o=ce.newNoDocument(i,r),a=s.removedTargetIds||[];n=new fa([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Sc(e,s.document),r=s.removedTargetIds||[];n=new fa([],r,i,null)}else{if(!("filter"in t))return Z();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new Uk(i,r),a=s.targetId;n=new xy(a,o)}}return n}function tA(e,t){let n;if(t instanceof ko)n={update:Gf(e,t.key,t.value)};else if(t instanceof $h)n={delete:Eu(e,t.key)};else if(t instanceof js)n={update:Gf(e,t.key,t.data),updateMask:cA(t.fieldMask)};else{if(!(t instanceof $k))return Z();n={verify:Eu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw Z()}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:Xk(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Z()}(e,t.precondition)),n}function eA(e,t){return e&&e.length>0?(Pt(t!==void 0),e.map(n=>function(i,r){let o=i.updateTime?dn(i.updateTime):dn(r);return o.isEqual(et.min())&&(o=dn(r)),new Lk(o,i.transformResults||[])}(n,t))):[]}function nA(e,t){return{documents:[xu(e,t.path)]}}function sA(e,t){const n={structuredQuery:{}},s=t.path;t.collectionGroup!==null?(n.parent=xu(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=xu(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(l){if(l.length!==0)return My(mn.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const r=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:si(h.field),direction:oA(h.dir)}}(c))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Tu(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function iA(e){let t=Jk(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Pt(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(h){const d=Py(h);return d instanceof mn&&ry(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(g){return new wr(ii(g.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,$l(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Wa(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Wa(f,d)}(n.endAt)),bk(t,i,o,r,a,"F",l,c)}function rA(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Py(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ii(n.unaryFilter.field);return qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=ii(n.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ii(n.unaryFilter.field);return qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ii(n.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(e):e.fieldFilter!==void 0?function(n){return qt.create(ii(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(s=>Py(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(e):Z()}function oA(e){return qk[e]}function aA(e){return Gk[e]}function lA(e){return Kk[e]}function si(e){return{fieldPath:e.canonicalString()}}function ii(e){return ue.fromServerFormat(e.fieldPath)}function My(e){return e instanceof qt?function(n){if(n.op==="=="){if(Of(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(Df(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Of(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(Df(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:aA(n.op),value:n.value}}}(e):e instanceof mn?function(n){const s=n.getFilters().map(i=>My(i));return s.length===1?s[0]:{compositeFilter:{op:lA(n.op),filters:s}}}(e):Z()}function cA(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Ry(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t,n,s,i,r=et.min(),o=et.min(),a=me.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t){this.ht=t}}function hA(e){const t=iA({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wu(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.an=new fA}addToCollectionParentIndex(t,n){return this.an.add(n),P.resolve()}getCollectionParents(t,n){return P.resolve(this.an.getEntries(n))}addFieldIndex(t,n){return P.resolve()}deleteFieldIndex(t,n){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,n){return P.resolve()}getDocumentsMatchingTarget(t,n){return P.resolve(null)}getIndexType(t,n){return P.resolve(0)}getFieldIndexes(t,n){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,n){return P.resolve(ss.min())}getMinOffsetFromCollectionGroup(t,n){return P.resolve(ss.min())}updateCollectionGroup(t,n,s){return P.resolve()}updateIndexEntries(t,n){return P.resolve()}}class fA{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new pe(Lt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new pe(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Bn(){return new Ii(0)}static Ln(){return new Ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.changes=new Wi(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ce.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?P.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&xr(s.mutation,i,Ye.empty(),Qt.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,ct()).next(()=>s))}getLocalViewOfDocuments(t,n,s=ct()){const i=Es();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=cr();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=Es();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,ct()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=Fn();const o=Er(),a=function(){return Er()}();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof js)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),xr(u.mutation,c,u.mutation.getFieldMask(),Qt.now())):o.set(c.key,Ye.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new pA(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const s=Er();let i=new Bt((o,a)=>o-a),r=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||Ye.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(i.get(a.batchId)||ct()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=gy();u.forEach(d=>{if(!r.has(d)){const f=wy(n.get(d),s.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return P.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ek(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):P.resolve(Es());let a=-1,l=r;return o.next(c=>P.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?P.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,ct())).next(u=>({batchId:a,changes:fy(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new J(n)).next(s=>{let i=cr();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=cr();return this.indexManager.getCollectionParents(t,r).next(a=>P.forEach(a,l=>{const c=function(h,d){return new Bl(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ce.newInvalidDocument(u)))});let a=cr();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&xr(u.mutation,c,Ye.empty(),Qt.now()),Ul(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,n){return P.resolve(this.lr.get(n))}saveBundleMetadata(t,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(n)),P.resolve()}getNamedQuery(t,n){return P.resolve(this.hr.get(n))}saveNamedQuery(t,n){return this.hr.set(n.name,function(i){return{name:i.name,query:hA(i.bundledQuery),readTime:dn(i.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.overlays=new Bt(J.comparator),this.Pr=new Map}getOverlay(t,n){return P.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Es();return P.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.It(t,n,r)}),P.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.Pr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(s)),P.resolve()}getOverlaysForCollection(t,n,s){const i=Es(),r=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return P.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new Bt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=Es(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Es(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return P.resolve(a)}It(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(s.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new zk(n,s));let r=this.Pr.get(n);r===void 0&&(r=ct(),this.Pr.set(n,r)),this.Pr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.Ir=new pe(Jt.dr),this.Tr=new pe(Jt.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(t,n){const s=new Jt(t,n);this.Ir=this.Ir.add(s),this.Tr=this.Tr.add(s)}Ar(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Rr(new Jt(t,n))}Vr(t,n){t.forEach(s=>this.removeReference(s,n))}mr(t){const n=new J(new Lt([])),s=new Jt(n,t),i=new Jt(n,t+1),r=[];return this.Tr.forEachInRange([s,i],o=>{this.Rr(o),r.push(o.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Tr=this.Tr.delete(t)}pr(t){const n=new J(new Lt([])),s=new Jt(n,t),i=new Jt(n,t+1);let r=ct();return this.Tr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new Jt(t,0),s=this.Ir.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Jt{constructor(t,n){this.key=t,this.yr=n}static dr(t,n){return J.comparator(t.key,n.key)||_t(t.yr,n.yr)}static Er(t,n){return _t(t.yr,n.yr)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new pe(Jt.dr)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Bk(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new Jt(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(t,n){return P.resolve(this.br(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.Dr(s),r=i<0?0:i;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([s,i],o=>{const a=this.br(o.yr);r.push(a)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new pe(_t);return n.forEach(i=>{const r=new Jt(i,0),o=new Jt(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,o],a=>{s=s.add(a.yr)})}),P.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;J.isDocumentKey(r)||(r=r.child(""));const o=new Jt(new J(r),0);let a=new pe(_t);return this.Sr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.yr)),!0)},o),P.resolve(this.Cr(a))}Cr(t){const n=[];return t.forEach(s=>{const i=this.br(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Pt(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Sr;return P.forEach(n.mutations,i=>{const r=new Jt(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Sr=s})}xn(t){}containsKey(t,n){const s=new Jt(n,0),i=this.Sr.firstAfterOrEqual(s);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}vr(t,n){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){const n=this.Dr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t){this.Fr=t,this.docs=function(){return new Bt(J.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return P.resolve(s?s.document.mutableCopy():ce.newInvalidDocument(n))}getEntries(t,n){let s=Fn();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():ce.newInvalidDocument(i))}),P.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Fn();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sk(nk(u),s)<=0||(i.has(u.key)||Ul(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(t,n,s,i){Z()}Mr(t,n){return P.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new wA(this)}getSize(t){return P.resolve(this.size)}}class wA extends gA{constructor(t){super(),this.ur=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(t,i)):this.ur.removeEntry(s)}),P.waitFor(n)}getFromCache(t,n){return this.ur.getEntry(t,n)}getAllFromCache(t,n){return this.ur.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(t){this.persistence=t,this.Or=new Wi(n=>Nh(n),Fh),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Wh,this.targetCount=0,this.Lr=Ii.Bn()}forEachTarget(t,n){return this.Or.forEach((s,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Nr&&(this.Nr=n),P.resolve()}Qn(t){this.Or.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Ii(n),this.highestTargetId=n),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,n){return this.Qn(n),this.targetCount+=1,P.resolve()}updateTargetData(t,n){return this.Qn(n),P.resolve()}removeTargetData(t,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Or.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),P.waitFor(r).next(()=>i)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,n){const s=this.Or.get(n)||null;return P.resolve(s)}addMatchingKeys(t,n,s){return this.Br.Ar(n,s),P.resolve()}removeMatchingKeys(t,n,s){this.Br.Vr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),P.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Br.mr(n),P.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Br.pr(n);return P.resolve(s)}containsKey(t,n){return P.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,n){this.kr={},this.overlays={},this.qr=new Dh(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new TA(this),this.indexManager=new dA,this.remoteDocumentCache=function(i){return new bA(i)}(s=>this.referenceDelegate.$r(s)),this.serializer=new uA(n),this.Ur=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new yA,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.kr[t.toKey()];return s||(s=new vA(n,this.referenceDelegate),this.kr[t.toKey()]=s),s}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(t,n,s){H("MemoryPersistence","Starting transaction:",t);const i=new xA(this.qr.next());return this.referenceDelegate.Wr(),s(i).next(r=>this.referenceDelegate.Gr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}zr(t,n){return P.or(Object.values(this.kr).map(s=>()=>s.containsKey(t,n)))}}class xA extends rk{constructor(t){super(),this.currentSequenceNumber=t}}class jh{constructor(t){this.persistence=t,this.jr=new Wh,this.Hr=null}static Jr(t){return new jh(t)}get Yr(){if(this.Hr)return this.Hr;throw Z()}addReference(t,n,s){return this.jr.addReference(s,n),this.Yr.delete(s.toString()),P.resolve()}removeReference(t,n,s){return this.jr.removeReference(s,n),this.Yr.add(s.toString()),P.resolve()}markPotentiallyOrphaned(t,n){return this.Yr.add(n.toString()),P.resolve()}removeTarget(t,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.Yr.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Wr(){this.Hr=new Set}Gr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Yr,s=>{const i=J.fromPath(s);return this.Zr(t,i).next(r=>{r||n.removeEntry(i,et.min())})}).next(()=>(this.Hr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Zr(t,n).next(s=>{s?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(t){return 0}Zr(t,n){return P.or([()=>P.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.zr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Qi=s,this.Ki=i}static $i(t,n){let s=ct(),i=ct();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Hh(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(t,n){this.ji=t,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.Hi(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Ji(t,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new SA;return this.Yi(t,n,o).next(a=>{if(r.result=a,this.Wi)return this.Zi(t,n,o,a.size)})}).next(()=>r.result)}Zi(t,n,s,i){return s.documentReadCount<this.Gi?(tr()<=dt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),P.resolve()):(tr()<=dt.DEBUG&&H("QueryEngine","Query:",ni(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.zi*i?(tr()<=dt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,un(n))):P.resolve())}Hi(t,n){if(Ff(n))return P.resolve(null);let s=un(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wu(n,null,"F"),s=un(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=ct(...r);return this.ji.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.Xi(n,a);return this.es(n,c,o,l.readTime)?this.Hi(t,wu(n,null,"F")):this.ts(t,c,n,l)}))})))}Ji(t,n,s,i){return Ff(n)||i.isEqual(et.min())?P.resolve(null):this.ji.getDocuments(t,s).next(r=>{const o=this.Xi(n,r);return this.es(n,o,s,i)?P.resolve(null):(tr()<=dt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ni(n)),this.ts(t,o,n,ek(i,-1)).next(a=>a))})}Xi(t,n){let s=new pe(hy(t));return n.forEach((i,r)=>{Ul(t,r)&&(s=s.add(r))}),s}es(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Yi(t,n,s){return tr()<=dt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ni(n)),this.ji.getDocumentsMatchingQuery(t,n,ss.min(),s)}ts(t,n,s,i){return this.ji.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,n,s,i){this.persistence=t,this.ns=n,this.serializer=i,this.rs=new Bt(_t),this.ss=new Wi(r=>Nh(r),Fh),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(s)}us(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mA(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.rs))}}function IA(e,t,n,s){return new AA(e,t,n,s)}async function Cy(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.us(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=ct();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({cs:c,removedBatchIds:o,addedBatchIds:a}))})})}function PA(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n._s.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=P.resolve();return d.forEach(g=>{f=f.next(()=>u.getEntry(l,g)).next(m=>{const p=c.docVersions.get(g);Pt(p!==null),m.version.compareTo(p)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=ct();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function Dy(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Kr.getLastRemoteSnapshotVersion(n))}function MA(e,t){const n=st(e),s=t.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];t.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Kr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Kr.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(h)!==null?f=f.withResumeToken(me.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,s)),i=i.insert(h,f),function(m,p,_){return m.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,f,u)&&a.push(n.Kr.updateTargetData(r,f))});let l=Fn(),c=ct();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(RA(r,o,t.documentUpdates).next(u=>{l=u.ls,c=u.hs})),!s.isEqual(et.min())){const u=n.Kr.getLastRemoteSnapshotVersion(r).next(h=>n.Kr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return P.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.rs=i,r))}function RA(e,t,n){let s=ct(),i=ct();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=Fn();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(et.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ls:o,hs:i}})}function CA(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function DA(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Kr.getTargetData(s,t).next(r=>r?(i=r,P.resolve(i)):n.Kr.allocateTargetId(s).next(o=>(i=new Yn(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Kr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.rs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(s.targetId,s),n.ss.set(t,s.targetId)),s})}async function ku(e,t,n){const s=st(e),i=s.rs.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!So(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}s.rs=s.rs.remove(t),s.ss.delete(i.target)}function Kf(e,t,n){const s=st(e);let i=et.min(),r=ct();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=st(l),d=h.ss.get(u);return d!==void 0?P.resolve(h.rs.get(d)):h.Kr.getTargetData(c,u)}(s,o,un(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.ns.getDocumentsMatchingQuery(o,t,n?i:et.min(),n?r:ct())).next(a=>(OA(s,Sk(t),a),{documents:a,Ps:r})))}function OA(e,t,n){let s=e.os.get(t)||et.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.os.set(t,s)}class Qf{constructor(){this.activeTargetIds=Rk()}Rs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}As(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class VA{constructor(){this.ro=new Qf,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t){return this.ro.Rs(t),this.io[t]||"not-current"}updateQueryState(t,n,s){this.io[t]=n}removeLocalQueryTarget(t){this.ro.Vs(t)}isLocalQueryTarget(t){return this.ro.activeTargetIds.has(t)}clearQueryState(t){delete this.io[t]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(t){return this.ro.activeTargetIds.has(t)}start(){return this.ro=new Qf,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{so(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(t){this.co.push(t)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.co)t(0)}uo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.co)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo=null;function kc(){return Wo===null?Wo=function(){return 268435456+Math.round(2147483648*Math.random())}():Wo++,"0x"+Wo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t){this.ho=t.ho,this.Po=t.Po}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.Po()}send(t){this.ho(t)}Vo(){this.To()}mo(t){this.Ao(t)}fo(t){this.Ro(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe="WebChannelConnection";class $A extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=s+"://"+n.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get So(){return!1}bo(n,s,i,r,o){const a=kc(),l=this.Do(n,s);H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(c,r,o),this.vo(n,l,c,i).then(u=>(H("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw xi("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Fo(n,s,i,r,o,a){return this.bo(n,s,i,r,o)}Co(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>n[o]=r),i&&i.headers.forEach((r,o)=>n[o]=r)}Do(n,s){const i=NA[n];return`${this.po}/v1/${s}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,i){const r=kc();return new Promise((o,a)=>{const l=new jS;l.setWithCredentials(!0),l.listenOnce(US.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xc.NO_ERROR:const u=l.getResponseJson();H(oe,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case xc.TIMEOUT:H(oe,`RPC '${t}' ${r} timed out`),a(new X(M.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const h=l.getStatus();if(H(oe,`RPC '${t}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(p){const _=p.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(_)>=0?_:M.UNKNOWN}(f.status);a(new X(g,f.message))}else a(new X(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(M.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{H(oe,`RPC '${t}' ${r} completed.`)}});const c=JSON.stringify(i);H(oe,`RPC '${t}' ${r} sending request:`,i),l.send(n,"POST",c,s,15)})}Mo(t,n,s){const i=kc(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=BS(),a=zS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Co(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");H(oe,`Creating RPC '${t}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const g=new FA({ho:p=>{f?H(oe,`Not sending because RPC '${t}' stream ${i} is closed:`,p):(d||(H(oe,`Opening RPC '${t}' stream ${i} transport.`),h.open(),d=!0),H(oe,`RPC '${t}' stream ${i} sending:`,p),h.send(p))},Po:()=>h.close()}),m=(p,_,w)=>{p.listen(_,T=>{try{w(T)}catch(S){setTimeout(()=>{throw S},0)}})};return m(h,Bo.EventType.OPEN,()=>{f||H(oe,`RPC '${t}' stream ${i} transport opened.`)}),m(h,Bo.EventType.CLOSE,()=>{f||(f=!0,H(oe,`RPC '${t}' stream ${i} transport closed`),g.mo())}),m(h,Bo.EventType.ERROR,p=>{f||(f=!0,xi(oe,`RPC '${t}' stream ${i} transport errored:`,p),g.mo(new X(M.UNAVAILABLE,"The operation could not be completed")))}),m(h,Bo.EventType.MESSAGE,p=>{var _;if(!f){const w=p.data[0];Pt(!!w);const T=w,S=T.error||((_=T[0])===null||_===void 0?void 0:_.error);if(S){H(oe,`RPC '${t}' stream ${i} received error:`,S);const E=S.status;let I=function(k){const Y=Ht[k];if(Y!==void 0)return Ey(Y)}(E),A=S.message;I===void 0&&(I=M.INTERNAL,A="Unknown error status: "+E+" with message "+S.message),f=!0,g.mo(new X(I,A)),h.close()}else H(oe,`RPC '${t}' stream ${i} received:`,w),g.fo(w)}}),m(a,WS.STAT_EVENT,p=>{p.stat===If.PROXY?H(oe,`RPC '${t}' stream ${i} detected buffering proxy`):p.stat===If.NOPROXY&&H(oe,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Vo()},0),g}}function Ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(e){return new Qk(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t,n,s=1e3,i=1.5,r=6e4){this._i=t,this.timerId=n,this.xo=s,this.Oo=i,this.No=r,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(t){this.cancel();const n=Math.floor(this.Bo+this.Ko()),s=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-s);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),t())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t,n,s,i,r,o,a,l){this._i=t,this.Uo=s,this.Wo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new Oy(t,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(t){this.r_(),this.stream.send(t)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(t,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,t!==4?this.Ho.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Nn(n.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Go===n&&this.__(s,i)},s=>{t(()=>{const i=new X(M.UNKNOWN,"Fetching auth token failed: "+s.message);return this.a_(i)})})}__(t,n){const s=this.o_(this.Go);this.stream=this.u_(t,n),this.stream.Io(()=>{s(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{s(()=>this.a_(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(t){return H("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}o_(t){return n=>{this._i.enqueueAndForget(()=>this.Go===t?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BA extends Vy{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}u_(t,n){return this.connection.Mo("Listen",t,n)}onMessage(t){this.Ho.reset();const n=Zk(this.serializer,t),s=function(r){if(!("targetChange"in r))return et.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?dn(o.readTime):et.min()}(t);return this.listener.c_(n,s)}l_(t){const n={};n.database=Su(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=bu(l)?{documents:nA(r,l)}:{query:sA(r,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ky(r,o.resumeToken);const c=Tu(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=Ya(r,o.snapshotVersion.toTimestamp());const c=Tu(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=rA(this.serializer,t);s&&(n.labels=s),this.n_(n)}h_(t){const n={};n.database=Su(this.serializer),n.removeTarget=t,this.n_(n)}}class zA extends Vy{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(t,n){return this.connection.Mo("Write",t,n)}onMessage(t){if(Pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.P_){this.Ho.reset();const n=eA(t.writeResults,t.commitTime),s=dn(t.commitTime);return this.listener.T_(s,n)}return Pt(!t.writeResults||t.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const t={};t.database=Su(this.serializer),this.n_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>tA(this.serializer,s))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends class{}{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,s){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.connection.bo(t,n,s,i,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(M.UNKNOWN,i.toString())})}Fo(t,n,s,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Fo(t,n,s,r,o,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new X(M.UNKNOWN,r.toString())})}terminate(){this.R_=!0}}class WA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(t){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.w_("Offline")))}set(t){this.D_(),this.f_=0,t==="Online"&&(this.p_=!1),this.w_(t)}w_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}S_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Nn(n),this.p_=!1):H("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=r,this.x_.so(o=>{s.enqueueAndForget(async()=>{Hs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=st(l);c.F_.add(4),await Io(c),c.O_.set("Unknown"),c.F_.delete(4),await ql(c)}(this))})}),this.O_=new WA(s,i)}}async function ql(e){if(Hs(e))for(const t of e.M_)await t(!0)}async function Io(e){for(const t of e.M_)await t(!1)}function Ly(e,t){const n=st(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),Gh(n)?qh(n):ji(n).Yo()&&Yh(n,t))}function Ny(e,t){const n=st(e),s=ji(n);n.v_.delete(t),s.Yo()&&Fy(n,t),n.v_.size===0&&(s.Yo()?s.e_():Hs(n)&&n.O_.set("Unknown"))}function Yh(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(et.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ji(e).l_(t)}function Fy(e,t){e.N_.Le(t),ji(e).h_(t)}function qh(e){e.N_=new Yk({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.v_.get(t)||null,st:()=>e.datastore.serializer.databaseId}),ji(e).start(),e.O_.y_()}function Gh(e){return Hs(e)&&!ji(e).Jo()&&e.v_.size>0}function Hs(e){return st(e).F_.size===0}function $y(e){e.N_=void 0}async function HA(e){e.v_.forEach((t,n)=>{Yh(e,t)})}async function YA(e,t){$y(e),Gh(e)?(e.O_.b_(t),qh(e)):e.O_.set("Unknown")}async function qA(e,t,n){if(e.O_.set("Online"),t instanceof Sy&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.v_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.v_.delete(a),i.N_.removeTarget(a))}(e,t)}catch(s){H("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await qa(e,s)}else if(t instanceof fa?e.N_.Ge(t):t instanceof xy?e.N_.Xe(t):e.N_.He(t),!n.isEqual(et.min()))try{const s=await Dy(e.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.N_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.v_.get(c);u&&r.v_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.v_.get(l);if(!u)return;r.v_.set(l,u.withResumeToken(me.EMPTY_BYTE_STRING,u.snapshotVersion)),Fy(r,l);const h=new Yn(u.target,l,c,u.sequenceNumber);Yh(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){H("RemoteStore","Failed to raise snapshot:",s),await qa(e,s)}}async function qa(e,t,n){if(!So(t))throw t;e.F_.add(1),await Io(e),e.O_.set("Offline"),n||(n=()=>Dy(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),e.F_.delete(1),await ql(e)})}function By(e,t){return t().catch(n=>qa(e,n,t))}async function Gl(e){const t=st(e),n=rs(t);let s=t.C_.length>0?t.C_[t.C_.length-1].batchId:-1;for(;GA(t);)try{const i=await CA(t.localStore,s);if(i===null){t.C_.length===0&&n.e_();break}s=i.batchId,KA(t,i)}catch(i){await qa(t,i)}zy(t)&&Uy(t)}function GA(e){return Hs(e)&&e.C_.length<10}function KA(e,t){e.C_.push(t);const n=rs(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function zy(e){return Hs(e)&&!rs(e).Jo()&&e.C_.length>0}function Uy(e){rs(e).start()}async function QA(e){rs(e).A_()}async function XA(e){const t=rs(e);for(const n of e.C_)t.d_(n.mutations)}async function JA(e,t,n){const s=e.C_.shift(),i=Bh.from(s,t,n);await By(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Gl(e)}async function ZA(e,t){t&&rs(e).I_&&await async function(s,i){if(function(o){return Wk(o)&&o!==M.ABORTED}(i.code)){const r=s.C_.shift();rs(s).Xo(),await By(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Gl(s)}}(e,t),zy(e)&&Uy(e)}async function Jf(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const s=Hs(n);n.F_.add(3),await Io(n),s&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.F_.delete(3),await ql(n)}async function tI(e,t){const n=st(e);t?(n.F_.delete(2),await ql(n)):t||(n.F_.add(2),await Io(n),n.O_.set("Unknown"))}function ji(e){return e.B_||(e.B_=function(n,s,i){const r=st(n);return r.V_(),new BA(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Io:HA.bind(null,e),Eo:YA.bind(null,e),c_:qA.bind(null,e)}),e.M_.push(async t=>{t?(e.B_.Xo(),Gh(e)?qh(e):e.O_.set("Unknown")):(await e.B_.stop(),$y(e))})),e.B_}function rs(e){return e.L_||(e.L_=function(n,s,i){const r=st(n);return r.V_(),new zA(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Io:QA.bind(null,e),Eo:ZA.bind(null,e),E_:XA.bind(null,e),T_:JA.bind(null,e)}),e.M_.push(async t=>{t?(e.L_.Xo(),await Gl(e)):(await e.L_.stop(),e.C_.length>0&&(H("RemoteStore",`Stopping write stream with ${e.C_.length} pending writes`),e.C_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Kh(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qh(e,t){if(Nn("AsyncQueue",`${t}: ${e}`),So(e))return new X(M.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.comparator=t?(n,s)=>t(n,s)||J.comparator(n.key,s.key):(n,s)=>J.comparator(n.key,s.key),this.keyedMap=cr(),this.sortedSet=new Bt(this.comparator)}static emptySet(t){return new yi(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof yi)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new yi;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this.k_=new Bt(J.comparator)}track(t){const n=t.doc.key,s=this.k_.get(n);s?t.type!==0&&s.type===3?this.k_=this.k_.insert(n,t):t.type===3&&s.type!==1?this.k_=this.k_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.k_=this.k_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.k_=this.k_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.k_=this.k_.remove(n):t.type===1&&s.type===2?this.k_=this.k_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.k_=this.k_.insert(n,{type:2,doc:t.doc}):Z():this.k_=this.k_.insert(n,t)}q_(){const t=[];return this.k_.inorderTraversal((n,s)=>{t.push(s)}),t}}class Pi{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pi(t,n,yi.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.Q_=void 0,this.listeners=[]}}class nI{constructor(){this.queries=new Wi(t=>uy(t),zl),this.onlineState="Unknown",this.K_=new Set}}async function sI(e,t){const n=st(e),s=t.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new eI),i)try{r.Q_=await n.onListen(s)}catch(o){const a=Qh(o,`Initialization of query '${ni(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.listeners.push(t),t.U_(n.onlineState),r.Q_&&t.W_(r.Q_)&&Xh(n)}async function iI(e,t){const n=st(e),s=t.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.listeners.indexOf(t);o>=0&&(r.listeners.splice(o,1),i=r.listeners.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function rI(e,t){const n=st(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.W_(i)&&(s=!0);o.Q_=i}}s&&Xh(n)}function oI(e,t,n){const s=st(e),i=s.queries.get(t);if(i)for(const r of i.listeners)r.onError(n);s.queries.delete(t)}function Xh(e){e.K_.forEach(t=>{t.next()})}class aI{constructor(t,n,s){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Pi(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;const s=n!=="Offline";return(!this.options.Z_||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=Pi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t){this.key=t}}class jy{constructor(t){this.key=t}}class lI{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ct(),this.mutatedKeys=ct(),this.ua=hy(t),this.ca=new yi(this.ua)}get la(){return this.oa}ha(t,n){const s=n?n.Pa:new Zf,i=n?n.ca:this.ca;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,h)=>{const d=i.get(u),f=Ul(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let p=!1;d&&f?d.data.isEqual(f.data)?g!==m&&(s.track({type:3,doc:f}),p=!0):this.Ia(d,f)||(s.track({type:2,doc:f}),p=!0,(l&&this.ua(f,l)>0||c&&this.ua(f,c)<0)&&(a=!0)):!d&&f?(s.track({type:0,doc:f}),p=!0):d&&!f&&(s.track({type:1,doc:d}),p=!0,(l||c)&&(a=!0)),p&&(f?(o=o.add(f),r=m?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{ca:o,Pa:s,es:a,mutatedKeys:r}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const r=t.Pa.q_();r.sort((c,u)=>function(d,f){const g=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return g(d)-g(f)}(c.type,u.type)||this.ua(c.doc,u.doc)),this.da(s);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,l=a!==this._a;return this._a=a,r.length!==0||l?{snapshot:new Pi(this.query,t.ca,i,r,t.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Zf,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}da(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ta(){if(!this.current)return[];const t=this.aa;this.aa=ct(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const n=[];return t.forEach(s=>{this.aa.has(s)||n.push(new jy(s))}),this.aa.forEach(s=>{t.has(s)||n.push(new Wy(s))}),n}Ra(t){this.oa=t.Ps,this.aa=ct();const n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return Pi.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class cI{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class uI{constructor(t){this.key=t,this.ma=!1}}class hI{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Wi(a=>uy(a),zl),this.pa=new Map,this.ya=new Set,this.wa=new Bt(J.comparator),this.Sa=new Map,this.ba=new Wh,this.Da={},this.Ca=new Map,this.va=Ii.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function dI(e,t){const n=TI(e);let s,i;const r=n.ga.get(t);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.Va();else{const o=await DA(n.localStore,un(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await fI(n,t,s,a==="current",o.resumeToken),n.isPrimaryClient&&Ly(n.remoteStore,o)}return i}async function fI(e,t,n,s,i){e.Ma=(h,d,f)=>async function(m,p,_,w){let T=p.view.ha(_);T.es&&(T=await Kf(m.localStore,p.query,!1).then(({documents:I})=>p.view.ha(I,T)));const S=w&&w.targetChanges.get(p.targetId),E=p.view.applyChanges(T,m.isPrimaryClient,S);return eg(m,p.targetId,E.Ea),E.snapshot}(e,h,d,f);const r=await Kf(e.localStore,t,!0),o=new lI(t,r.Ps),a=o.ha(r.documents),l=Ao.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);eg(e,n,c.Ea);const u=new cI(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function gI(e,t){const n=st(e),s=n.ga.get(t),i=n.pa.get(s.targetId);if(i.length>1)return n.pa.set(s.targetId,i.filter(r=>!zl(r,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await ku(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Ny(n.remoteStore,s.targetId),Au(n,s.targetId)}).catch(xo)):(Au(n,s.targetId),await ku(n.localStore,s.targetId,!0))}async function pI(e,t,n){const s=EI(e);try{const i=await function(o,a){const l=st(o),c=Qt.now(),u=a.reduce((f,g)=>f.add(g.key),ct());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Fn(),m=ct();return l._s.getEntries(f,u).next(p=>{g=p,g.forEach((_,w)=>{w.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(p=>{h=p;const _=[];for(const w of a){const T=Fk(w,h.get(w.key).overlayedDocument);T!=null&&_.push(new js(w.key,T,ny(T.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,_,a)}).next(p=>{d=p;const _=p.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,p.batchId,_)})}).then(()=>({batchId:d.batchId,changes:fy(h)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Da[o.currentUser.toKey()];c||(c=new Bt(_t)),c=c.insert(a,l),o.Da[o.currentUser.toKey()]=c}(s,i.batchId,n),await Po(s,i.changes),await Gl(s.remoteStore)}catch(i){const r=Qh(i,"Failed to persist write");n.reject(r)}}async function Hy(e,t){const n=st(e);try{const s=await MA(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.Sa.get(r);o&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Pt(o.ma):i.removedDocuments.size>0&&(Pt(o.ma),o.ma=!1))}),await Po(n,s,t)}catch(s){await xo(s)}}function tg(e,t,n){const s=st(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.ga.forEach((r,o)=>{const a=o.view.U_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=st(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.listeners)d.U_(a)&&(c=!0)}),c&&Xh(l)}(s.eventManager,t),i.length&&s.fa.c_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function mI(e,t,n){const s=st(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Sa.get(t),r=i&&i.key;if(r){let o=new Bt(J.comparator);o=o.insert(r,ce.newNoDocument(r,et.min()));const a=ct().add(r),l=new Hl(et.min(),new Map,new Bt(_t),o,a);await Hy(s,l),s.wa=s.wa.remove(r),s.Sa.delete(t),Jh(s)}else await ku(s.localStore,t,!1).then(()=>Au(s,t,n)).catch(xo)}async function _I(e,t){const n=st(e),s=t.batch.batchId;try{const i=await PA(n.localStore,t);qy(n,s,null),Yy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Po(n,i)}catch(i){await xo(i)}}async function yI(e,t,n){const s=st(e);try{const i=await function(o,a){const l=st(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,t);qy(s,t,n),Yy(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Po(s,i)}catch(i){await xo(i)}}function Yy(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function qy(e,t,n){const s=st(e);let i=s.Da[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Da[s.currentUser.toKey()]=i}}function Au(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.pa.get(t))e.ga.delete(s),n&&e.fa.xa(s,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach(s=>{e.ba.containsKey(s)||Gy(e,s)})}function Gy(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);n!==null&&(Ny(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Jh(e))}function eg(e,t,n){for(const s of n)s instanceof Wy?(e.ba.addReference(s.key,t),vI(e,s)):s instanceof jy?(H("SyncEngine","Document no longer in limbo: "+s.key),e.ba.removeReference(s.key,t),e.ba.containsKey(s.key)||Gy(e,s.key)):Z()}function vI(e,t){const n=t.key,s=n.path.canonicalString();e.wa.get(n)||e.ya.has(s)||(H("SyncEngine","New document in limbo: "+n),e.ya.add(s),Jh(e))}function Jh(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new J(Lt.fromString(t)),s=e.va.next();e.Sa.set(s,new uI(n)),e.wa=e.wa.insert(n,s),Ly(e.remoteStore,new Yn(un(cy(n.path)),s,"TargetPurposeLimboResolution",Dh.ae))}}async function Po(e,t,n){const s=st(e),i=[],r=[],o=[];s.ga.isEmpty()||(s.ga.forEach((a,l)=>{o.push(s.Ma(l,t,n).then(c=>{if((c||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Hh.$i(l.targetId,c);r.push(u)}}))}),await Promise.all(o),s.fa.c_(i),await async function(l,c){const u=st(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>P.forEach(c,d=>P.forEach(d.Qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>P.forEach(d.Ki,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!So(h))throw h;H("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.rs.get(d),g=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(g);u.rs=u.rs.insert(d,m)}}}(s.localStore,r))}async function bI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H("SyncEngine","User change. New user:",t.toKey());const s=await Cy(n.localStore,t);n.currentUser=t,function(r,o){r.Ca.forEach(a=>{a.forEach(l=>{l.reject(new X(M.CANCELLED,o))})}),r.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Po(n,s.cs)}}function wI(e,t){const n=st(e),s=n.Sa.get(t);if(s&&s.ma)return ct().add(s.key);{let i=ct();const r=n.pa.get(t);if(!r)return i;for(const o of r){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function TI(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mI.bind(null,t),t.fa.c_=rI.bind(null,t.eventManager),t.fa.xa=oI.bind(null,t.eventManager),t}function EI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_I.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yI.bind(null,t),t}class ng{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Yl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return IA(this.persistence,new kA,t.initialUser,this.serializer)}createPersistence(t){return new EA(jh.Jr,this.serializer)}createSharedClientState(t){return new VA}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xI{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bI.bind(null,this.syncEngine),await tI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new nI}()}createDatastore(t){const n=Yl(t.databaseInfo.databaseId),s=function(r){return new $A(r)}(t.databaseInfo);return function(r,o,a,l){return new UA(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,o,a){return new jA(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>tg(this.syncEngine,n,0),function(){return Xf.C()?new Xf:new LA}())}createSyncEngine(t,n){return function(i,r,o,a,l,c,u){const h=new hI(i,r,o,a,l,c);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const s=st(n);H("RemoteStore","RemoteStore shutting down."),s.F_.add(5),await Io(s),s.x_.shutdown(),s.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Nn("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,n,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=le.UNAUTHENTICATED,this.clientId=Z_.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{H("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(H("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Qh(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Ic(e,t){e.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await Cy(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await II(e);H("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener(i=>Jf(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Jf(t.remoteStore,r)),e._onlineComponents=t}function AI(e){return e.name==="FirebaseError"?e.code===M.FAILED_PRECONDITION||e.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function II(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ic(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!AI(n))throw n;xi("Error using user provided cache. Falling back to memory cache: "+n),await Ic(e,new ng)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Ic(e,new ng);return e._offlineComponents}async function Ky(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await sg(e,e._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await sg(e,new xI))),e._onlineComponents}function PI(e){return Ky(e).then(t=>t.syncEngine)}async function MI(e){const t=await Ky(e),n=t.eventManager;return n.onListen=dI.bind(null,t.syncEngine),n.onUnlisten=gI.bind(null,t.syncEngine),n}function RI(e,t,n={}){const s=new ts;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new SI({next:d=>{o.enqueueAndForget(()=>iI(r,h)),d.fromCache&&l.source==="server"?c.reject(new X(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new aI(a,u,{includeMetadataChanges:!0,Z_:!0});return sI(r,h)}(await MI(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(e,t,n){if(!n)throw new X(M.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function CI(e,t,n,s){if(t===!0&&s===!0)throw new X(M.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rg(e){if(!J.isDocumentKey(e))throw new X(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function og(e){if(J.isDocumentKey(e))throw new X(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zh(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Z()}function Jr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new X(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(e);throw new X(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new X(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new X(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}CI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qy((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Kl{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new X(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new YS;switch(s.type){case"firstParty":return new QS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=ig.get(n);s&&(H("ComponentProvider","Removing Datastore"),ig.delete(n),s.terminate())}(this),Promise.resolve()}}function DI(e,t,n,s={}){var i;const r=(e=Jr(e,Kl))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,l;if(typeof s.mockUserToken=="string")a=s.mockUserToken,l=le.MOCK_USER;else{a=xE(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new X(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new le(c)}e._authCredentials=new qS(new J_(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ql(this.firestore,t,this._query)}}class qe{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qe(this.firestore,t,this._key)}}class es extends Ql{constructor(t,n,s){super(t,n,cy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qe(this.firestore,null,new J(t))}withConverter(t){return new es(this.firestore,t,this._path)}}function _n(e,t,...n){if(e=Vr(e),Xy("collection","path",t),e instanceof Kl){const s=Lt.fromString(t,...n);return og(s),new es(e,null,s)}{if(!(e instanceof qe||e instanceof es))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Lt.fromString(t,...n));return og(s),new es(e.firestore,null,s)}}function Xl(e,t,...n){if(e=Vr(e),arguments.length===1&&(t=Z_.V()),Xy("doc","path",t),e instanceof Kl){const s=Lt.fromString(t,...n);return rg(s),new qe(e,null,new J(s))}{if(!(e instanceof qe||e instanceof es))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Lt.fromString(t,...n));return rg(s),new qe(e.firestore,e instanceof es?e.converter:null,new J(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new Oy(this,"async_queue_retry"),this.ou=()=>{const n=Ac();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const t=Ac();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this._u(),this.au(t)}enterRestrictedMode(t){if(!this.eu){this.eu=!0,this.iu=t||!1;const n=Ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(t){if(this._u(),this.eu)return new Promise(()=>{});const n=new ts;return this.au(()=>this.eu&&this.iu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xa.push(t),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(t){if(!So(t))throw t;H("AsyncQueue","Operation failed with retryable error: "+t)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(t){const n=this.Za.then(()=>(this.ru=!0,t().catch(s=>{this.nu=s,this.ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw Nn("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.ru=!1,s))));return this.Za=n,n}enqueueAfterDelay(t,n,s){this._u(),this.su.indexOf(t)>-1&&(n=0);const i=Kh.createAndSchedule(this,t,n,s,r=>this.cu(r));return this.tu.push(i),i}_u(){this.nu&&Z()}verifyOperationInProgress(){}async lu(){let t;do t=this.Za,await t;while(t!==this.Za)}hu(t){for(const n of this.tu)if(n.timerId===t)return!0;return!1}Pu(t){return this.lu().then(()=>{this.tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lu()})}Iu(t){this.su.push(t)}cu(t){const n=this.tu.indexOf(t);this.tu.splice(n,1)}}class Jl extends Kl{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=function(){return new OI}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zy(this),this._firestoreClient.terminate()}}function VI(e,t){const n=typeof e=="object"?e:Ix(),s=typeof e=="string"?e:t||"(default)",i=xx(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=TE("firestore");r&&DI(i,...r)}return i}function Jy(e){return e._firestoreClient||Zy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zy(e){var t,n,s;const i=e._freezeSettings(),r=function(a,l,c,u){return new lk(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Qy(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new kI(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mi(me.fromBase64String(t))}catch(n){throw new X(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mi(me.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new X(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new X(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new X(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _t(this._lat,t._lat)||_t(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=/^__.*__$/;class NI{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new js(t,this.data,this.fieldMask,n,this.fieldTransforms):new ko(t,this.data,n,this.fieldTransforms)}}function e0(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class nd{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.du(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(t){return new nd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:s,Ru:!1});return i.Vu(t),i}mu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:s,Ru:!1});return i.du(),i}fu(t){return this.Eu({path:void 0,Ru:!0})}gu(t){return Ga(t,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vu(this.path.get(t))}Vu(t){if(t.length===0)throw this.gu("Document fields must not be empty");if(e0(this.Tu)&&LI.test(t))throw this.gu('Document fields cannot begin and end with "__"')}}class FI{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Yl(t)}wu(t,n,s,i=!1){return new nd({Tu:t,methodName:n,yu:s,path:ue.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $I(e){const t=e._freezeSettings(),n=Yl(e._databaseId);return new FI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BI(e,t,n,s,i,r={}){const o=e.wu(r.merge||r.mergeFields?2:0,t,n,i);r0("Data must be an object, but it was:",o,s);const a=s0(s,o);let l,c;if(r.merge)l=new Ye(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=zI(t,h,n);if(!o.contains(d))throw new X(M.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);WI(u,d)||u.push(d)}l=new Ye(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new NI(new Ne(a),l,c)}function n0(e,t){if(i0(e=Vr(e)))return r0("Unsupported field value:",t,e),s0(e,t);if(e instanceof t0)return function(s,i){if(!e0(i.Tu))throw i.gu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&t.Tu!==4)throw t.gu("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=n0(a,i.fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=Vr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ck(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Qt.fromDate(s);return{timestampValue:Ya(i.serializer,r)}}if(s instanceof Qt){const r=new Qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ya(i.serializer,r)}}if(s instanceof ed)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mi)return{bytesValue:ky(i.serializer,s._byteString)};if(s instanceof qe){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Uh(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.gu(`Unsupported field value: ${Zh(s)}`)}(e,t)}function s0(e,t){const n={};return ty(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ui(e,(s,i)=>{const r=n0(i,t.Au(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function i0(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qt||e instanceof ed||e instanceof Mi||e instanceof qe||e instanceof t0)}function r0(e,t,n){if(!i0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Zh(n);throw s==="an object"?t.gu(e+" a custom object"):t.gu(e+" "+s)}}function zI(e,t,n){if((t=Vr(t))instanceof td)return t._internalPath;if(typeof t=="string")return o0(e,t);throw Ga("Field path arguments must be of type string or ",e,!1,void 0,n)}const UI=new RegExp("[~\\*/\\[\\]]");function o0(e,t,n){if(t.search(UI)>=0)throw Ga(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new td(...t.split("."))._internalPath}catch{throw Ga(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ga(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new X(M.INVALID_ARGUMENT,a+e+l)}function WI(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(l0("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jI extends a0{data(){return super.data()}}function l0(e,t){return typeof t=="string"?o0(e,t):t instanceof td?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new X(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YI{convertValue(t,n="none"){switch(Ds(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Yt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Cs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Z()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Ui(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(t){return new ed(Yt(t.latitude),Yt(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Vh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(qr(t));default:return null}}convertTimestamp(t){const n=is(t);return new Qt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Lt.fromString(t);Pt(Ry(s));const i=new Gr(s.get(1),s.get(3)),r=new J(s.popFirst(5));return i.isEqual(n)||Nn(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class GI extends a0{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(l0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ga extends GI{data(t={}){return super.data(t)}}class KI{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new jo(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new ga(this._firestore,this._userDataWriter,s.key,s,new jo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:QI(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class XI extends YI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function cs(e){e=Jr(e,Ql);const t=Jr(e.firestore,Jl),n=Jy(t),s=new XI(t);return HI(e._query),RI(n,e._query).then(i=>new KI(t,s,e,i))}function sd(e){return u0(Jr(e.firestore,Jl),[new $h(e._key,hn.none())])}function c0(e,t){const n=Jr(e.firestore,Jl),s=Xl(e),i=qI(e.converter,t);return u0(n,[BI($I(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,hn.exists(!1))]).then(()=>s)}function u0(e,t){return function(s,i){const r=new ts;return s.asyncQueue.enqueueAndForget(async()=>pI(await PI(s),i,r)),r.promise}(Jy(e),t)}(function(t,n=!0){(function(i){zi=i})(Ax),Oa(new Lr("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Jl(new GS(s.getProvider("auth-internal")),new JS(s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gr(c.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),pi(Pf,"4.2.0",t),pi(Pf,"4.2.0","esm2017")})();const JI={apiKey:"AIzaSyAaZC3BurU3BS8nyB1J5_kmqNF083aOjwU",authDomain:"svelte-dashboard-4b17b.firebaseapp.com",projectId:"svelte-dashboard-4b17b",storageBucket:"svelte-dashboard-4b17b.appspot.com",messagingSenderId:"653933556589",appId:"1:653933556589:web:b9db619103ba68623ee064"},ZI=qm(JI),Me=VI(ZI);async function tP(){const t=(await cs(_n(Me,"customers"))).docs.map(n=>({id:n.id,...n.data()}));ll.set(t)}async function eP(e){try{await sd(Xl(Me,"customers",e));const n=(await cs(_n(Me,"customers"))).docs.map(s=>({id:s.id,...s.data()}));ll.set(n)}catch(t){console.error("Error deleting item:",t)}}async function nP(){const t=(await cs(_n(Me,"products"))).docs.map(n=>({id:n.id,...n.data()}));cl.set(t)}async function sP(e){try{await c0(_n(Me,"products"),e);const n=(await cs(_n(Me,"products"))).docs.map(s=>({id:s.id,...s.data()}));cl.set(n)}catch(t){console.error("Error adding document: ",t)}}async function iP(e){try{await sd(Xl(Me,"products",e));const n=(await cs(_n(Me,"products"))).docs.map(s=>({id:s.id,...s.data()}));cl.set(n)}catch(t){console.error("Error deleting item:",t)}}async function h0(){const t=(await cs(_n(Me,"orders"))).docs.map(n=>({id:n.id,...n.data()}));uo.set(t)}async function rP(e){try{await c0(_n(Me,"orders"),e);const n=(await cs(_n(Me,"orders"))).docs.map(s=>({id:s.id,...s.data()}));return uo.set(n),success=!0}catch(t){console.error("Error adding document: ",t)}}async function d0(e){try{await sd(Xl(Me,"orders",e));const n=(await cs(_n(Me,"orders"))).docs.map(s=>({id:s.id,...s.data()}));uo.set(n)}catch(t){console.error("Error deleting item:",t)}}function oP(e){let t,n=e[2].message+"",s;return{c(){t=b("p"),s=Te(n)},m(i,r){D(i,t,r),v(t,s)},p:V,i:V,o:V,d(i){i&&R(t)}}}function aP(e){let t,n;return t=new Tl({props:{data:e[0],deleteItem:eP}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&1&&(r.data=s[0]),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function lP(e){let t;return{c(){t=b("p"),t.textContent="Loading customers..."},m(n,s){D(n,t,s)},p:V,i:V,o:V,d(n){n&&R(t)}}}function cP(e){let t,n,s={ctx:e,current:null,token:null,hasCatch:!0,pending:lP,then:aP,catch:oP,error:2,blocks:[,,,]};return Ti(e[1],s),{c(){t=yn(),s.block.c()},m(i,r){D(i,t,r),s.block.m(i,s.anchor=r),s.mount=()=>t.parentNode,s.anchor=t,n=!0},p(i,r){e=i,lo(s,e,r)},i(i){n||(N(s.block),n=!0)},o(i){for(let r=0;r<3;r+=1){const o=s.blocks[r];$(o)}n=!1},d(i){i&&R(t),s.block.d(i),s.token=null,s=null}}}function uP(e){let t,n,s,i;return s=new lE({}),{c(){t=b("h2"),t.textContent="Add New Customer",n=L(),Q(s.$$.fragment),y(t,"class","svelte-gxcryu")},m(r,o){D(r,t,o),D(r,n,o),G(s,r,o),i=!0},p:V,i(r){i||(N(s.$$.fragment,r),i=!0)},o(r){$(s.$$.fragment,r),i=!1},d(r){r&&R(t),r&&R(n),K(s,r)}}}function hP(e){let t,n,s,i,r,o,a,l,c,u;return o=new He({props:{fullHeight:!0,$$slots:{default:[cP]},$$scope:{ctx:e}}}),c=new He({props:{fullHeight:!1,$$slots:{default:[uP]},$$scope:{ctx:e}}}),{c(){t=b("main"),n=b("h1"),n.textContent="Customers",s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("div"),Q(c.$$.fragment),y(n,"class","accent-line"),y(r,"class","table-container svelte-gxcryu"),y(l,"class","form-container svelte-gxcryu"),y(i,"class","container svelte-gxcryu"),y(t,"class","svelte-gxcryu")},m(h,d){D(h,t,d),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(i,a),v(i,l),G(c,l,null),u=!0},p(h,[d]){const f={};d&9&&(f.$$scope={dirty:d,ctx:h}),o.$set(f);const g={};d&8&&(g.$$scope={dirty:d,ctx:h}),c.$set(g)},i(h){u||(N(o.$$.fragment,h),N(c.$$.fragment,h),u=!0)},o(h){$(o.$$.fragment,h),$(c.$$.fragment,h),u=!1},d(h){h&&R(t),K(o),K(c)}}}function dP(e,t,n){let s;ke(e,ll,r=>n(0,s=r));let i=tP();return[s,i]}class fP extends Ct{constructor(t){super(),Rt(this,t,dP,hP,xt,{})}}function lg(e){let t;return{c(){t=b("span"),t.textContent="Order Created!",y(t,"class","success svelte-1jebe0")},m(n,s){D(n,t,s)},d(n){n&&R(t)}}}function gP(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g,m,p,_,w,T,S,E,I=e[5]&&lg();return{c(){t=b("form"),n=b("input"),s=L(),i=b("input"),r=L(),o=b("input"),a=L(),l=b("input"),c=L(),u=b("select"),h=b("option"),h.textContent="Order Status",d=b("option"),d.textContent="Processing",f=b("option"),f.textContent="Shipped",g=b("option"),g.textContent="Completed",m=b("option"),m.textContent="Cancelled",p=L(),_=b("div"),w=b("button"),w.textContent="Submit",T=L(),I&&I.c(),y(n,"type","text"),y(n,"placeholder","Customer Name"),y(n,"class","svelte-1jebe0"),y(i,"type","email"),y(i,"placeholder","Customer Email"),y(i,"class","svelte-1jebe0"),y(o,"type","number"),y(o,"step","0.01"),y(o,"placeholder","Order Total"),y(o,"class","svelte-1jebe0"),y(l,"type","number"),y(l,"step","1"),y(l,"placeholder","Items"),y(l,"class","svelte-1jebe0"),h.__value="",h.value=h.__value,y(h,"class","svelte-1jebe0"),d.__value="processing",d.value=d.__value,y(d,"class","svelte-1jebe0"),f.__value="shipped",f.value=f.__value,y(f,"class","svelte-1jebe0"),g.__value="completed",g.value=g.__value,y(g,"class","svelte-1jebe0"),m.__value="cancelled",m.value=m.__value,y(m,"class","svelte-1jebe0"),y(u,"class","styled-select svelte-1jebe0"),y(u,"name","category"),y(u,"id","category"),e[4]===void 0&&On(()=>e[11].call(u)),y(w,"type","submit"),y(w,"class","svelte-1jebe0"),y(_,"class","bottom svelte-1jebe0")},m(A,x){D(A,t,x),v(t,n),Zt(n,e[0]),v(t,s),v(t,i),Zt(i,e[1]),v(t,r),v(t,o),Zt(o,e[2]),v(t,a),v(t,l),Zt(l,e[3]),v(t,c),v(t,u),v(u,h),v(u,d),v(u,f),v(u,g),v(u,m),ri(u,e[4],!0),v(t,p),v(t,_),v(_,w),v(_,T),I&&I.m(_,null),S||(E=[Tt(n,"input",e[7]),Tt(i,"input",e[8]),Tt(o,"input",e[9]),Tt(l,"input",e[10]),Tt(u,"change",e[11]),Tt(t,"submit",Fu(e[6]))],S=!0)},p(A,[x]){x&1&&n.value!==A[0]&&Zt(n,A[0]),x&2&&i.value!==A[1]&&Zt(i,A[1]),x&4&&bi(o.value)!==A[2]&&Zt(o,A[2]),x&8&&bi(l.value)!==A[3]&&Zt(l,A[3]),x&16&&ri(u,A[4]),A[5]?I||(I=lg(),I.c(),I.m(_,null)):I&&(I.d(1),I=null)},i:V,o:V,d(A){A&&R(t),I&&I.d(),S=!1,Re(E)}}}function pP(e,t,n){let s,i,r,o,a,l;async function c(){const m={name:s,email:i,order_total:r,items:o,status:a};try{rP(m),n(5,l=!0)}catch{console.error("Error adding new order")}n(0,s=""),n(1,i=""),n(2,r=""),n(3,o=""),n(4,a=""),setTimeout(()=>{n(5,l=!1)},3e3)}function u(){s=this.value,n(0,s)}function h(){i=this.value,n(1,i)}function d(){r=bi(this.value),n(2,r)}function f(){o=bi(this.value),n(3,o)}function g(){a=zc(this),n(4,a)}return[s,i,r,o,a,l,c,u,h,d,f,g]}class mP extends Ct{constructor(t){super(),Rt(this,t,pP,gP,xt,{})}}function _P(e){let t,n=e[2].message+"",s;return{c(){t=b("p"),s=Te(n)},m(i,r){D(i,t,r),v(t,s)},p:V,i:V,o:V,d(i){i&&R(t)}}}function yP(e){let t,n;return t=new Tl({props:{data:e[0],deleteItem:d0}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&1&&(r.data=s[0]),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function vP(e){let t;return{c(){t=b("p"),t.textContent="Loading orders..."},m(n,s){D(n,t,s)},p:V,i:V,o:V,d(n){n&&R(t)}}}function bP(e){let t,n,s={ctx:e,current:null,token:null,hasCatch:!0,pending:vP,then:yP,catch:_P,error:2,blocks:[,,,]};return Ti(e[1],s),{c(){t=yn(),s.block.c()},m(i,r){D(i,t,r),s.block.m(i,s.anchor=r),s.mount=()=>t.parentNode,s.anchor=t,n=!0},p(i,r){e=i,lo(s,e,r)},i(i){n||(N(s.block),n=!0)},o(i){for(let r=0;r<3;r+=1){const o=s.blocks[r];$(o)}n=!1},d(i){i&&R(t),s.block.d(i),s.token=null,s=null}}}function wP(e){let t,n,s,i;return s=new mP({}),{c(){t=b("h2"),t.textContent="Add New Order",n=L(),Q(s.$$.fragment),y(t,"class","svelte-os9kw7")},m(r,o){D(r,t,o),D(r,n,o),G(s,r,o),i=!0},p:V,i(r){i||(N(s.$$.fragment,r),i=!0)},o(r){$(s.$$.fragment,r),i=!1},d(r){r&&R(t),r&&R(n),K(s,r)}}}function TP(e){let t,n,s,i,r,o,a,l,c,u;return o=new He({props:{$$slots:{default:[bP]},$$scope:{ctx:e}}}),c=new He({props:{$$slots:{default:[wP]},$$scope:{ctx:e}}}),{c(){t=b("main"),n=b("h1"),n.textContent="Orders",s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("div"),Q(c.$$.fragment),y(n,"class","accent-line"),y(r,"class","table-container svelte-os9kw7"),y(l,"class","form-container svelte-os9kw7"),y(i,"class","container svelte-os9kw7"),y(t,"class","svelte-os9kw7")},m(h,d){D(h,t,d),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(i,a),v(i,l),G(c,l,null),u=!0},p(h,[d]){const f={};d&9&&(f.$$scope={dirty:d,ctx:h}),o.$set(f);const g={};d&8&&(g.$$scope={dirty:d,ctx:h}),c.$set(g)},i(h){u||(N(o.$$.fragment,h),N(c.$$.fragment,h),u=!0)},o(h){$(o.$$.fragment,h),$(c.$$.fragment,h),u=!1},d(h){h&&R(t),K(o),K(c)}}}function EP(e,t,n){let s;ke(e,uo,r=>n(0,s=r));let i=h0();return[s,i]}class xP extends Ct{constructor(t){super(),Rt(this,t,EP,TP,xt,{})}}function cg(e){let t;return{c(){t=b("span"),t.textContent="Product Created!",y(t,"class","success svelte-1jebe0")},m(n,s){D(n,t,s)},d(n){n&&R(t)}}}function SP(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g,m,p,_,w,T,S,E,I,A=e[4]&&cg();return{c(){t=b("form"),n=b("input"),s=L(),i=b("select"),r=b("option"),r.textContent="Category",o=b("option"),o.textContent="Accessories",a=b("option"),a.textContent="Clothing",l=b("option"),l.textContent="Electronics",c=b("option"),c.textContent="Toys",u=L(),h=b("select"),d=b("option"),d.textContent="Stock",f=b("option"),f.textContent="In Stock",g=b("option"),g.textContent="Out of Stock",m=L(),p=b("input"),_=L(),w=b("div"),T=b("button"),T.textContent="Submit",S=L(),A&&A.c(),y(n,"type","text"),y(n,"placeholder","Product Name"),y(n,"class","svelte-1jebe0"),r.__value="",r.value=r.__value,y(r,"class","svelte-1jebe0"),o.__value="accessories",o.value=o.__value,y(o,"class","svelte-1jebe0"),a.__value="clothing",a.value=a.__value,y(a,"class","svelte-1jebe0"),l.__value="electronics",l.value=l.__value,y(l,"class","svelte-1jebe0"),c.__value="toys",c.value=c.__value,y(c,"class","svelte-1jebe0"),y(i,"class","styled-select svelte-1jebe0"),y(i,"name","category"),y(i,"id","category"),e[2]===void 0&&On(()=>e[7].call(i)),d.__value="",d.value=d.__value,y(d,"class","svelte-1jebe0"),f.__value="in stock",f.value=f.__value,y(f,"class","svelte-1jebe0"),g.__value="out of stock",g.value=g.__value,y(g,"class","svelte-1jebe0"),y(h,"class","styled-select svelte-1jebe0"),y(h,"name","stock"),y(h,"id","stock"),e[3]===void 0&&On(()=>e[8].call(h)),y(p,"type","number"),y(p,"step","0.01"),y(p,"placeholder","Price"),y(p,"class","svelte-1jebe0"),y(T,"type","submit"),y(T,"class","svelte-1jebe0"),y(w,"class","bottom svelte-1jebe0")},m(x,k){D(x,t,k),v(t,n),Zt(n,e[0]),v(t,s),v(t,i),v(i,r),v(i,o),v(i,a),v(i,l),v(i,c),ri(i,e[2],!0),v(t,u),v(t,h),v(h,d),v(h,f),v(h,g),ri(h,e[3],!0),v(t,m),v(t,p),Zt(p,e[1]),v(t,_),v(t,w),v(w,T),v(w,S),A&&A.m(w,null),E||(I=[Tt(n,"input",e[6]),Tt(i,"change",e[7]),Tt(h,"change",e[8]),Tt(p,"input",e[9]),Tt(t,"submit",Fu(e[5]))],E=!0)},p(x,[k]){k&1&&n.value!==x[0]&&Zt(n,x[0]),k&4&&ri(i,x[2]),k&8&&ri(h,x[3]),k&2&&bi(p.value)!==x[1]&&Zt(p,x[1]),x[4]?A||(A=cg(),A.c(),A.m(w,null)):A&&(A.d(1),A=null)},i:V,o:V,d(x){x&&R(t),A&&A.d(),E=!1,Re(I)}}}function kP(e,t,n){let s,i,r,o,a;async function l(){const f={product_name:s,price:i,category:r,stock:o};try{sP(f),n(4,a=!0)}catch{console.error("Error adding new order")}n(0,s=""),n(1,i=""),n(2,r=""),n(3,o=""),setTimeout(()=>{n(4,a=!1)},3e3)}function c(){s=this.value,n(0,s)}function u(){r=zc(this),n(2,r)}function h(){o=zc(this),n(3,o)}function d(){i=bi(this.value),n(1,i)}return[s,i,r,o,a,l,c,u,h,d]}class f0 extends Ct{constructor(t){super(),Rt(this,t,kP,SP,xt,{})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Mo(e){return e+.5|0}const qn=(e,t,n)=>Math.max(Math.min(e,n),t);function hr(e){return qn(Mo(e*2.55),0,255)}function ns(e){return qn(Mo(e*255),0,255)}function kn(e){return qn(Mo(e/2.55)/100,0,1)}function ug(e){return qn(Mo(e*100),0,100)}const Oe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Iu=[..."0123456789ABCDEF"],AP=e=>Iu[e&15],IP=e=>Iu[(e&240)>>4]+Iu[e&15],Ho=e=>(e&240)>>4===(e&15),PP=e=>Ho(e.r)&&Ho(e.g)&&Ho(e.b)&&Ho(e.a);function MP(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Oe[e[1]]*17,g:255&Oe[e[2]]*17,b:255&Oe[e[3]]*17,a:t===5?Oe[e[4]]*17:255}:(t===7||t===9)&&(n={r:Oe[e[1]]<<4|Oe[e[2]],g:Oe[e[3]]<<4|Oe[e[4]],b:Oe[e[5]]<<4|Oe[e[6]],a:t===9?Oe[e[7]]<<4|Oe[e[8]]:255})),n}const RP=(e,t)=>e<255?t(e):"";function CP(e){var t=PP(e)?AP:IP;return e?"#"+t(e.r)+t(e.g)+t(e.b)+RP(e.a,t):void 0}const DP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function g0(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function OP(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function VP(e,t,n){const s=g0(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function LP(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function id(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=LP(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function rd(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(ns)}function od(e,t,n){return rd(g0,e,t,n)}function NP(e,t,n){return rd(VP,e,t,n)}function FP(e,t,n){return rd(OP,e,t,n)}function p0(e){return(e%360+360)%360}function $P(e){const t=DP.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?hr(+t[5]):ns(+t[5]));const i=p0(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=NP(i,r,o):t[1]==="hsv"?s=FP(i,r,o):s=od(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function BP(e,t){var n=id(e);n[0]=p0(n[0]+t),n=od(n),e.r=n[0],e.g=n[1],e.b=n[2]}function zP(e){if(!e)return;const t=id(e),n=t[0],s=ug(t[1]),i=ug(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${kn(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const hg={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dg={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function UP(){const e={},t=Object.keys(dg),n=Object.keys(hg);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,hg[r]);r=parseInt(dg[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Yo;function WP(e){Yo||(Yo=UP(),Yo.transparent=[0,0,0,0]);const t=Yo[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const jP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function HP(e){const t=jP.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?hr(o):qn(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?hr(s):qn(s,0,255)),i=255&(t[4]?hr(i):qn(i,0,255)),r=255&(t[6]?hr(r):qn(r,0,255)),{r:s,g:i,b:r,a:n}}}function YP(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${kn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Pc=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Js=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function qP(e,t,n){const s=Js(kn(e.r)),i=Js(kn(e.g)),r=Js(kn(e.b));return{r:ns(Pc(s+n*(Js(kn(t.r))-s))),g:ns(Pc(i+n*(Js(kn(t.g))-i))),b:ns(Pc(r+n*(Js(kn(t.b))-r))),a:e.a+n*(t.a-e.a)}}function qo(e,t,n){if(e){let s=id(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=od(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function m0(e,t){return e&&Object.assign(t||{},e)}function fg(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ns(e[3]))):(t=m0(e,{r:0,g:0,b:0,a:1}),t.a=ns(t.a)),t}function GP(e){return e.charAt(0)==="r"?HP(e):$P(e)}class Zr{constructor(t){if(t instanceof Zr)return t;const n=typeof t;let s;n==="object"?s=fg(t):n==="string"&&(s=MP(t)||WP(t)||GP(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=m0(this._rgb);return t&&(t.a=kn(t.a)),t}set rgb(t){this._rgb=fg(t)}rgbString(){return this._valid?YP(this._rgb):void 0}hexString(){return this._valid?CP(this._rgb):void 0}hslString(){return this._valid?zP(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=qP(this._rgb,t._rgb,n)),this}clone(){return new Zr(this.rgb)}alpha(t){return this._rgb.a=ns(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Mo(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return qo(this._rgb,2,t),this}darken(t){return qo(this._rgb,2,-t),this}saturate(t){return qo(this._rgb,1,t),this}desaturate(t){return qo(this._rgb,1,-t),this}rotate(t){return BP(this._rgb,t),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Tn(){}const KP=(()=>{let e=0;return()=>e++})();function vt(e){return e===null||typeof e>"u"}function Nt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ft(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function te(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ae(e,t){return te(e)?e:t}function ot(e,t){return typeof e>"u"?t:e}const QP=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,_0=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function St(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function yt(e,t,n,s){let i,r,o;if(Nt(e))if(r=e.length,s)for(i=r-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<r;i++)t.call(n,e[i],i);else if(ft(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Ka(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Qa(e){if(Nt(e))return e.map(Qa);if(ft(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Qa(e[n[i]]);return t}return e}function y0(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function XP(e,t,n,s){if(!y0(e))return;const i=t[e],r=n[e];ft(i)&&ft(r)?to(i,r,s):t[e]=Qa(r)}function to(e,t,n){const s=Nt(t)?t:[t],i=s.length;if(!ft(e))return e;n=n||{};const r=n.merger||XP;let o;for(let a=0;a<i;++a){if(o=s[a],!ft(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function Sr(e,t){return to(e,t,{merger:JP})}function JP(e,t,n){if(!y0(e))return;const s=t[e],i=n[e];ft(s)&&ft(i)?Sr(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Qa(i))}const gg={"":e=>e,x:e=>e.x,y:e=>e.y};function ZP(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function tM(e){const t=ZP(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Os(e,t){return(gg[t]||(gg[t]=tM(t)))(e)}function ad(e){return e.charAt(0).toUpperCase()+e.slice(1)}const eo=e=>typeof e<"u",os=e=>typeof e=="function",pg=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function eM(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $t=Math.PI,Ft=2*$t,nM=Ft+$t,Xa=Number.POSITIVE_INFINITY,sM=$t/180,jt=$t/2,fs=$t/4,mg=$t*2/3,Gn=Math.log10,fn=Math.sign;function kr(e,t,n){return Math.abs(e-t)<n}function _g(e){const t=Math.round(e);e=kr(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Gn(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function iM(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function no(e){return!isNaN(parseFloat(e))&&isFinite(e)}function rM(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function v0(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function cn(e){return e*($t/180)}function ld(e){return e*(180/$t)}function yg(e){if(!te(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function b0(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*$t&&(r+=Ft),{angle:r,distance:i}}function Pu(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function oM(e,t){return(e-t+nM)%Ft-$t}function We(e){return(e%Ft+Ft)%Ft}function so(e,t,n,s){const i=We(e),r=We(t),o=We(n),a=We(r-i),l=We(o-i),c=We(i-r),u=We(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function he(e,t,n){return Math.max(t,Math.min(n,e))}function aM(e){return he(e,-32768,32767)}function Kn(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function cd(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const xs=(e,t,n,s)=>cd(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),lM=(e,t,n)=>cd(e,n,s=>e[s][t]>=n);function cM(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const w0=["push","pop","shift","splice","unshift"];function uM(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),w0.forEach(n=>{const s="_onData"+ad(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function vg(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(w0.forEach(r=>{delete e[r]}),delete e._chartjs)}function T0(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const E0=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function x0(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,E0.call(window,()=>{s=!1,e.apply(t,n)}))}}function hM(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const ud=e=>e==="start"?"left":e==="end"?"right":"center",ae=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,dM=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function fM(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=he(Math.min(xs(a,l,c).lo,n?s:xs(t,l,o.getPixelForValue(c)).lo),0,s-1)),d?r=he(Math.max(xs(a,o.axis,u,!0).hi+1,n?0:xs(t,l,o.getPixelForValue(u),!0).hi+1),i,s)-i:r=s-i}return{start:i,count:r}}function gM(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const Go=e=>e===0||e===1,bg=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ft/n)),wg=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ft/n)+1,Ar={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*jt)+1,easeOutSine:e=>Math.sin(e*jt),easeInOutSine:e=>-.5*(Math.cos($t*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Go(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Go(e)?e:bg(e,.075,.3),easeOutElastic:e=>Go(e)?e:wg(e,.075,.3),easeInOutElastic(e){return Go(e)?e:e<.5?.5*bg(e*2,.1125,.45):.5+.5*wg(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ar.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ar.easeInBounce(e*2)*.5:Ar.easeOutBounce(e*2-1)*.5+.5};function hd(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Tg(e){return hd(e)?e:new Zr(e)}function Mc(e){return hd(e)?e:new Zr(e).saturate(.5).darken(.1).hexString()}const pM=["x","y","borderWidth","radius","tension"],mM=["color","borderColor","backgroundColor"];function _M(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:mM},numbers:{type:"number",properties:pM}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function yM(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Eg=new Map;function vM(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Eg.get(n);return s||(s=new Intl.NumberFormat(e,t),Eg.set(n,s)),s}function Zl(e,t,n){return vM(t,n).format(e)}const S0={values(e){return Nt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=bM(e,n)}const o=Gn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zl(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Gn(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?S0.numeric.call(this,e,t,n):""}};function bM(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var tc={formatters:S0};function wM(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Vs=Object.create(null),Mu=Object.create(null);function Ir(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Rc(e,t,n){return typeof t=="string"?to(Ir(e,t),n):to(Ir(e,""),t)}class TM{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Mc(i.backgroundColor),this.hoverBorderColor=(s,i)=>Mc(i.borderColor),this.hoverColor=(s,i)=>Mc(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Rc(this,t,n)}get(t){return Ir(this,t)}describe(t,n){return Rc(Mu,t,n)}override(t,n){return Rc(Vs,t,n)}route(t,n,s,i){const r=Ir(this,t),o=Ir(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ft(l)?Object.assign({},c,l):ot(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var zt=new TM({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_M,yM,wM]);function EM(e){return!e||vt(e.size)||vt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Ja(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function xM(e,t,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Nt(h))o=Ja(e,i,r,o,h);else if(Nt(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Nt(d)&&(o=Ja(e,i,r,o,d));e.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[r[l]];r.splice(0,f)}return o}function gs(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function xg(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Ru(e,t,n,s){k0(e,t,n,s,null)}function k0(e,t,n,s,i){let r,o,a,l,c,u,h,d;const f=t.pointStyle,g=t.rotation,m=t.radius;let p=(g||0)*sM;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(p),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,s,i/2,m,0,0,Ft):e.arc(n,s,m,0,Ft),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(p)*u,s-Math.cos(p)*m),p+=mg,e.lineTo(n+Math.sin(p)*u,s-Math.cos(p)*m),p+=mg,e.lineTo(n+Math.sin(p)*u,s-Math.cos(p)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(p+fs)*l,h=Math.cos(p+fs)*(i?i/2-c:l),a=Math.sin(p+fs)*l,d=Math.sin(p+fs)*(i?i/2-c:l),e.arc(n-h,s-a,c,p-$t,p-jt),e.arc(n+d,s-o,c,p-jt,p),e.arc(n+h,s+a,c,p,p+jt),e.arc(n-d,s+o,c,p+jt,p+$t),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}p+=fs;case"rectRot":h=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),e.moveTo(n-h,s-a),e.lineTo(n+d,s-o),e.lineTo(n+h,s+a),e.lineTo(n-d,s+o),e.closePath();break;case"crossRot":p+=fs;case"cross":h=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"star":h=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o),p+=fs,h=Math.cos(p)*(i?i/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,d=Math.sin(p)*(i?i/2:m),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+d,s-o),e.lineTo(n-d,s+o);break;case"line":o=i?i/2:Math.cos(p)*m,a=Math.sin(p)*m,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(p)*(i?i/2:m),s+Math.sin(p)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Cn(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function dd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function fd(e){e.restore()}function SM(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function kM(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function AM(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function IM(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function PM(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ls(e,t,n,s,i,r={}){const o=Nt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,AM(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&PM(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),vt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),IM(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function io(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*$t,$t,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,$t,jt,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,jt,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-jt,!0),e.lineTo(n+o.topLeft,s)}const MM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,RM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CM(e,t){const n=(""+e).match(MM);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const DM=e=>+e||0;function gd(e,t){const n={},s=ft(t),i=s?Object.keys(t):t,r=ft(e)?s?o=>ot(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=DM(r(o));return n}function A0(e){return gd(e,{top:"y",right:"x",bottom:"y",left:"x"})}function As(e){return gd(e,["topLeft","topRight","bottomLeft","bottomRight"])}function _e(e){const t=A0(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Kt(e,t){e=e||{},t=t||zt.font;let n=ot(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=ot(e.style,t.style);s&&!(""+s).match(RM)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:ot(e.family,t.family),lineHeight:CM(ot(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:ot(e.weight,t.weight),string:""};return i.string=EM(i),i}function Ko(e,t,n,s){let i=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),n!==void 0&&Nt(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function OM(e,t,n){const{min:s,max:i}=e,r=_0(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function us(e,t){return Object.assign(Object.create(e),t)}function pd(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=R0("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>pd([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return P0(a,l,()=>UM(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return kg(a).includes(l)},ownKeys(a){return kg(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Ri(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:I0(e,s),setContext:r=>Ri(e,r,n,s),override:r=>Ri(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return P0(r,o,()=>LM(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function I0(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:os(n)?n:()=>n,isIndexable:os(s)?s:()=>s}}const VM=(e,t)=>e?e+ad(t):t,md=(e,t)=>ft(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function P0(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=n();return e[t]=s,s}function LM(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return os(a)&&o.isScriptable(t)&&(a=NM(t,a,e,n)),Nt(a)&&a.length&&(a=FM(t,a,e,o.isIndexable)),md(t,a)&&(a=Ri(a,i,r&&r[t],o)),a}function NM(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),md(e,l)&&(l=_d(i._scopes,i,e,l)),l}function FM(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(ft(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=_d(c,i,e,u);t.push(Ri(h,r,o&&o[e],a))}}return t}function M0(e,t,n){return os(e)?e(t,n):e}const $M=(e,t)=>e===!0?t:typeof e=="string"?Os(t,e):void 0;function BM(e,t,n,s,i){for(const r of t){const o=$M(n,r);if(o){e.add(o);const a=M0(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function _d(e,t,n,s){const i=t._rootScopes,r=M0(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=Sg(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=Sg(a,o,r,l,s),l===null)?!1:pd(Array.from(a),[""],i,r,()=>zM(t,n,s))}function Sg(e,t,n,s,i){for(;n;)n=BM(e,t,n,s,i);return n}function zM(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Nt(i)&&ft(n)?n:i||{}}function UM(e,t,n,s){let i;for(const r of t)if(i=R0(VM(r,e),n),typeof i<"u")return md(e,i)?_d(n,s,e,i):i}function R0(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function kg(e){let t=e._keys;return t||(t=e._keys=WM(e._scopes)),t}function WM(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}const jM=Number.EPSILON||1e-14,Ci=(e,t)=>t<e.length&&!e[t].skip&&e[t],C0=e=>e==="x"?"y":"x";function HM(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=Pu(r,i),l=Pu(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,d=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function YM(e,t,n){const s=e.length;let i,r,o,a,l,c=Ci(e,0);for(let u=0;u<s-1;++u)if(l=c,c=Ci(e,u+1),!(!l||!c)){if(kr(t[u],0,jM)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=r*o*t[u])}}function qM(e,t,n="x"){const s=C0(n),i=e.length;let r,o,a,l=Ci(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ci(e,c+1),!a)continue;const u=a[n],h=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=h-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=h+r*t[c])}}function GM(e,t="x"){const n=C0(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Ci(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ci(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?fn(i[o-1])!==fn(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}YM(e,i,r),qM(e,r,t)}function Qo(e,t,n){return Math.max(Math.min(e,n),t)}function KM(e,t){let n,s,i,r,o,a=Cn(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&Cn(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Qo(i.cp1x,t.left,t.right),i.cp1y=Qo(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Qo(i.cp2x,t.left,t.right),i.cp2y=Qo(i.cp2y,t.top,t.bottom)))}function QM(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")GM(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=HM(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&KM(e,n)}function D0(){return typeof window<"u"&&typeof document<"u"}function yd(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Za(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const ec=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function XM(e,t){return ec(e).getPropertyValue(t)}const JM=["top","right","bottom","left"];function Is(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=JM[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const ZM=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function tR(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(ZM(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ys(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=ec(n),r=i.boxSizing==="border-box",o=Is(i,"padding"),a=Is(i,"border","width"),{x:l,y:c,box:u}=tR(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*n.width/s),y:Math.round((c-d)/g*n.height/s)}}function eR(e,t,n){let s,i;if(t===void 0||n===void 0){const r=yd(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=ec(r),l=Is(a,"border","width"),c=Is(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Za(a.maxWidth,r,"clientWidth"),i=Za(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Xa,maxHeight:i||Xa}}const Xo=e=>Math.round(e*10)/10;function nR(e,t,n,s){const i=ec(e),r=Is(i,"margin"),o=Za(i.maxWidth,e,"clientWidth")||Xa,a=Za(i.maxHeight,e,"clientHeight")||Xa,l=eR(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=Is(i,"border","width"),f=Is(i,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Xo(Math.min(c,o,l.maxWidth)),u=Xo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Xo(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Xo(Math.floor(u*s))),{width:c,height:u}}function Ag(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const sR=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function Ig(e,t){const n=XM(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function vs(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function iR(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rR(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=vs(e,i,n),a=vs(i,r,n),l=vs(r,t,n),c=vs(o,a,n),u=vs(a,l,n);return vs(c,u,n)}const oR=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},aR=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function vi(e,t,n){return e?oR(t,n):aR()}function O0(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function V0(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function L0(e){return e==="angle"?{between:so,compare:oM,normalize:We}:{between:Kn,compare:(t,n)=>t-n,normalize:t=>t}}function Pg({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function lR(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=L0(s),l=t.length;let{start:c,end:u,loop:h}=e,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(t[c%l][s]),i,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function cR(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=L0(s),{start:u,end:h,loop:d,style:f}=lR(e,t,n),g=[];let m=!1,p=null,_,w,T;const S=()=>l(i,T,_)&&a(i,T)!==0,E=()=>a(r,_)===0||l(r,T,_),I=()=>m||S(),A=()=>!m||E();for(let x=u,k=u;x<=h;++x)w=t[x%o],!w.skip&&(_=c(w[s]),_!==T&&(m=l(_,i,r),p===null&&I()&&(p=a(_,i)===0?x:k),p!==null&&A()&&(g.push(Pg({start:p,end:x,loop:d,count:o,style:f})),p=null),k=x,T=_));return p!==null&&g.push(Pg({start:p,end:h,loop:d,count:o,style:f})),g}function uR(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=cR(s[i],e.points,t);r.length&&n.push(...r)}return n}function hR(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function dR(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function fR(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=hR(n,i,r,s);if(s===!0)return Mg(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return Mg(e,dR(n,o,l,c),n,t)}function Mg(e,t,n,s){return!s||!s.setContext||!n?t:gR(e,t,n,s)}function gR(e,t,n,s){const i=e._chart.getContext(),r=Rg(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,h=t[0].start,d=h;function f(g,m,p,_){const w=a?-1:1;if(g!==m){for(g+=l;n[g%l].skip;)g-=w;for(;n[m%l].skip;)m+=w;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:p,style:_}),u=_,h=m%l)}}for(const g of t){h=a?h:g.start;let m=n[h%l],p;for(d=h+1;d<=g.end;d++){const _=n[d%l];p=Rg(s.setContext(us(i,{type:"segment",p0:m,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),pR(p,u)&&f(h,d-1,g.loop,u),m=_,u=p}h<d-1&&f(h,d-1,g.loop,u)}return c}function Rg(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function pR(e,t){if(!t)return!1;const n=[],s=function(i,r){return hd(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class mR{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=E0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var En=new mR;const Cg="transparent",_R={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Tg(e||Cg),i=s.valid&&Tg(t||Cg);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class yR{constructor(t,n,s,i){const r=n[s];i=Ko([t.to,i,r,t.from]);const o=Ko([t.from,r,i]);this._active=!0,this._fn=t.fn||_R[t.type||typeof o],this._easing=Ar[t.easing]||Ar.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ko([t.to,n,i,t.from]),this._from=Ko([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class N0{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ft(t))return;const n=Object.keys(zt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!ft(r))return;const o={};for(const a of n)o[a]=r[a];(Nt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=bR(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&vR(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let h=r[c];const d=s.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){t[c]=u;continue}r[c]=h=new yR(d,t,c,u),i.push(h)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return En.add(this._chart,s),!0}}function vR(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function bR(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Dg(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function wR(e,t,n){if(n===!1)return!1;const s=Dg(e,n),i=Dg(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function TR(e){let t,n,s,i;return ft(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function F0(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function Og(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(s.all)continue;break}c=e.values[l],te(c)&&(r||t===0||fn(t)===fn(c))&&(t+=c)}return t}}function ER(e){const t=Object.keys(e),n=new Array(t.length);let s,i,r;for(s=0,i=t.length;s<i;++s)r=t[s],n[s]={x:r,y:e[r]};return n}function Vg(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function xR(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function SR(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function kR(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Lg(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function Ng(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=xR(r,o,s),h=t.length;let d;for(let f=0;f<h;++f){const g=t[f],{[l]:m,[c]:p}=g,_=g._stacks||(g._stacks={});d=_[c]=kR(i,u,m),d[a]=p,d._top=Lg(d,o,!0,s.type),d._bottom=Lg(d,o,!1,s.type);const w=d._visualValues||(d._visualValues={});w[a]=p}}function Cc(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function AR(e,t){return us(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function IR(e,t,n){return us(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function er(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Dc=e=>e==="reset"||e==="none",Fg=(e,t)=>t?e:Object.assign({},e),PR=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:F0(n,!0),values:null};class Ps{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&er(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,r=n.xAxisID=ot(s.xAxisID,Cc(t,"x")),o=n.yAxisID=ot(s.yAxisID,Cc(t,"y")),a=n.rAxisID=ot(s.rAxisID,Cc(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&vg(this._data,this),t._stacked&&er(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ft(n))this._data=ER(n);else if(s!==n){if(s){vg(s,this);const i=this._cachedMeta;er(i),i._parsed=[]}n&&Object.isExtensible(n)&&uM(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Vg(n.vScale,n),n.stack!==s.stack&&(i=!0,er(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&Ng(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,h,d;if(this._parsing===!1)s._parsed=i,s._sorted=!0,d=i;else{Nt(i[t])?d=this.parseArrayData(s,i,t,n):ft(i[t])?d=this.parseObjectData(s,i,t,n):d=this.parsePrimitiveData(s,i,t,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=h=d[u],l&&(f()&&(l=!1),c=h);s._sorted=l}o&&Ng(this,d)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(i);let d,f,g;for(d=0,f=i;d<f;++d)g=d+s,h[d]={[a]:u||r.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+s,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+s,f=n[d],c[u]={x:r.parse(Os(f,a),d),y:o.parse(Os(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:F0(i,!0),values:n._stacks[t.axis]._visualValues};return Og(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=Og(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=PR(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=SR(a);let d,f;function g(){f=i[d];const m=f[a.axis];return!te(f[t.axis])||u>m||h<m}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],te(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=TR(ot(this.options.clip,wR(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=IR(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=AR(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&eo(s);if(a)return Fg(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(zt.elements[t]),g=()=>this.getContext(s,i,n),m=c.resolveNamedOptions(d,f,g,h);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Fg(m,l))),m}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(t,s,n))}const c=new N0(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Dc(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Dc(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Dc(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&er(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}z(Ps,"defaults",{}),z(Ps,"datasetElementType",null),z(Ps,"dataElementType",null);function MR(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=n.length;i<r;i++)s=s.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=T0(s.sort((i,r)=>i-r))}return e._cache.$bar}function RR(e){const t=e.iScale,n=MR(t,e.type);let s=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(eo(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function CR(e,t,n,s){const i=n.barThickness;let r,o;return vt(i)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function DR(e,t,n,s){const i=t.pixels,r=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:c}}function OR(e,t,n,s){const i=n.parse(e[0],s),r=n.parse(e[1],s),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function $0(e,t,n,s){return Nt(e)?OR(e,t,n,s):t[n.axis]=n.parse(e,s),t}function $g(e,t,n,s){const i=e.iScale,r=e.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,h,d;for(c=n,u=n+s;c<u;++c)d=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push($0(d,h,r,c));return l}function Oc(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function VR(e,t,n){return e!==0?fn(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function LR(e){let t,n,s,i,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:n,end:s,reverse:t,top:i,bottom:r}}function NR(e,t,n,s){let i=t.borderSkipped;const r={};if(!i){e.borderSkipped=r;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=LR(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?i=c:(n._bottom||0)===s?i=u:(r[Bg(u,o,a,l)]=!0,i=c)),r[Bg(i,o,a,l)]=!0,e.borderSkipped=r}function Bg(e,t,n,s){return s?(e=FR(e,t,n),e=zg(e,n,t)):e=zg(e,t,n),e}function FR(e,t,n){return e===t?n:e===n?t:e}function zg(e,t,n){return e==="start"?t:e==="end"?n:e}function $R(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class pa extends Ps{parsePrimitiveData(t,n,s,i){return $g(t,n,s,i)}parseArrayData(t,n,s,i){return $g(t,n,s,i)}parseObjectData(t,n,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,m;for(d=s,f=s+i;d<f;++d)m=n[d],g={},g[r.axis]=r.parse(Os(m,c),d),h.push($0(Os(m,u),g,o,d));return h}updateRangeFromParsed(t,n,s,i){super.updateRangeFromParsed(t,n,s,i);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:i}=n,r=this.getParsed(t),o=r._custom,a=Oc(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i);for(let f=n;f<n+s;f++){const g=this.getParsed(f),m=r||vt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),_=(g._stacks||{})[a.axis],w={horizontal:c,base:m.base,enableBorderRadius:!_||Oc(g._custom)||o===_._top||o===_._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};d&&(w.options=h||this.resolveDataElementOptions(f,t[f].active?"active":i));const T=w.options||t[f].options;NR(w,T,_,o),$R(w,T,u.ratio),this.updateElement(t[f],f,w,i)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=s.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(vt(u)||isNaN(u))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const i=this._getStacks(t,s),r=n!==void 0?i.indexOf(n):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,i=[];let r,o;for(r=0,o=n.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||RR(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=Oc(c);let h=l[n.axis],d=0,f=s?this.applyStack(n,l,s):h,g,m;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&fn(h)!==fn(c.barEnd)&&(d=0),d+=h);const p=!vt(r)&&!u?r:d;let _=n.getPixelForValue(p);if(this.chart.getDataVisibility(t)?g=n.getPixelForValue(d+f):g=_,m=g-_,Math.abs(m)<o){m=VR(m,n,a)*o,h===a&&(_-=m/2);const w=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),S=Math.min(w,T),E=Math.max(w,T);_=Math.max(Math.min(_,E),S),g=_+m,s&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const w=fn(m)*n.getLineWidthForValue(a)/2;_+=w,m-=w}return{size:m,base:_,head:g,center:g+m/2}}_calculateBarIndexPixels(t,n){const s=n.scale,i=this.options,r=i.skipNull,o=ot(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(t):n.stackCount,u=i.barThickness==="flex"?DR(t,n,i,c):CR(t,n,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}z(pa,"id","bar"),z(pa,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),z(pa,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function BR(e,t,n){let s=1,i=1,r=0,o=0;if(t<Ft){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(T,S,E)=>so(T,a,l,!0)?1:Math.max(S,S*n,E,E*n),g=(T,S,E)=>so(T,a,l,!0)?-1:Math.min(S,S*n,E,E*n),m=f(0,c,h),p=f(jt,u,d),_=g($t,c,h),w=g($t+jt,u,d);s=(m-_)/2,i=(p-w)/2,r=-(m+_)/2,o=-(p+w)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class dr extends Ps{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(ft(s[t])){const{key:l="value"}=this._parsing;r=c=>+Os(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return cn(this.options.rotation-90)}_getCircumference(){return cn(this.options.circumference)}_getRotationExtents(){let t=Ft,n=-Ft;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(QP(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:m}=BR(h,u,l),p=(s.width-o)/d,_=(s.height-o)/f,w=Math.max(Math.min(p,_)/2,0),T=_0(this.options.radius,w),S=Math.max(T*l,0),E=(T-S)/this._getVisibleDatasetWeightTotal();this.offsetX=g*T,this.offsetY=m*T,i.total=this.calculateTotal(),this.outerRadius=T-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Ft)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(n,i);let _=this._getRotation(),w;for(w=0;w<n;++w)_+=this._circumference(w,r);for(w=n;w<n+s;++w){const T=this._circumference(w,r),S=t[w],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+T,circumference:T,outerRadius:g,innerRadius:f};p&&(E.options=m||this.resolveDataElementOptions(w,S.active?"active":i)),_+=T,this.updateElement(S,w,E,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ft*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Zl(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(ot(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}z(dr,"id","doughnut"),z(dr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),z(dr,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),z(dr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class ma extends Ps{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=fM(n,i,o);this._drawStart=a,this._drawCount=l,gM(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,p=no(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||i==="none",w=n+s,T=t.length;let S=n>0&&this.getParsed(n-1);for(let E=0;E<T;++E){const I=t[E],A=_?I:{};if(E<n||E>=w){A.skip=!0;continue}const x=this.getParsed(E),k=vt(x[f]),Y=A[d]=o.getPixelForValue(x[d],E),W=A[f]=r||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[f],E);A.skip=isNaN(Y)||isNaN(W)||k,A.stop=E>0&&Math.abs(x[d]-S[d])>p,m&&(A.parsed=x,A.raw=c.data[E]),h&&(A.options=u||this.resolveDataElementOptions(E,I.active?"active":i)),_||this.updateElement(I,E,A,i),S=x}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}z(ma,"id","line"),z(ma,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),z(ma,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ps(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vd{constructor(t){z(this,"options");this.options=t||{}}static override(t){Object.assign(vd.prototype,t)}init(){}formats(){return ps()}parse(){return ps()}format(){return ps()}add(){return ps()}diff(){return ps()}startOf(){return ps()}endOf(){return ps()}}var zR={_date:vd};function UR(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?lM:xs;if(s){if(i._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(r,t,n-u),d=l(r,t,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,t,n)}return{lo:0,hi:r.length-1}}function Ro(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=UR(r[a],t,o,i);for(let f=h;f<=d;++f){const g=u[f];g.skip||s(g,c,f)}}}function WR(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Vc(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||Ro(e,n,t,function(a,l,c){!i&&!Cn(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function jR(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=b0(o,{x:t.x,y:t.y});so(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Ro(e,n,t,r),i}function HR(e,t,n,s,i,r){let o=[];const a=WR(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(t.x,t.y,i);if(s&&!f)return;const g=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(g))&&!f)return;const p=a(t,g);p<l?(o=[{element:u,datasetIndex:h,index:d}],l=p):p===l&&o.push({element:u,datasetIndex:h,index:d})}return Ro(e,n,t,c),o}function Lc(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?jR(e,t,n,i):HR(e,t,n,s,i,r)}function Ug(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ro(e,n,t,(l,c,u)=>{l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var YR={evaluateInteractionItems:Ro,modes:{index(e,t,n,s){const i=ys(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Vc(e,i,r,s,o):Lc(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=ys(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Vc(e,i,r,s,o):Lc(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=ys(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Vc(e,i,r,s,o)},nearest(e,t,n,s){const i=ys(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Lc(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=ys(t,e);return Ug(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=ys(t,e);return Ug(e,i,"y",n.intersect,s)}}};const B0=["left","top","right","bottom"];function nr(e,t){return e.filter(n=>n.pos===t)}function Wg(e,t){return e.filter(n=>B0.indexOf(n.pos)===-1&&n.box.axis===t)}function sr(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function qR(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function GR(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!B0.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function KR(e,t){const n=GR(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function QR(e){const t=qR(e),n=sr(t.filter(c=>c.box.fullSize),!0),s=sr(nr(t,"left"),!0),i=sr(nr(t,"right")),r=sr(nr(t,"top"),!0),o=sr(nr(t,"bottom")),a=Wg(t,"x"),l=Wg(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:nr(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function jg(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function z0(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function XR(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!ft(i)){n.size&&(e[i]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,e[i]+=n.size}r.getPadding&&z0(o,r.getPadding());const a=Math.max(0,t.outerWidth-jg(o,e,"left","right")),l=Math.max(0,t.outerHeight-jg(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function JR(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function ZR(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function fr(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,ZR(a.horizontal,t));const{same:h,other:d}=XR(t,n,a,s);c|=h&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&fr(i,t,n,s)||u}function Jo(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function Hg(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,d=c.size||l.height;eo(c.start)&&(o=c.start),l.fullSize?Jo(l,i.left,o,n.outerWidth-i.right-i.left,d):Jo(l,t.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,d=c.size||l.width;eo(c.start)&&(r=c.start),l.fullSize?Jo(l,r,i.top,d,n.outerHeight-i.bottom-i.top):Jo(l,r,t.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}t.x=r,t.y=o}var Fe={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=_e(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=QR(e.boxes),l=a.vertical,c=a.horizontal;yt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);z0(d,_e(s));const f=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),g=KR(l.concat(c),h);fr(a.fullSize,f,h,g),fr(l,f,h,g),fr(c,f,h,g)&&fr(l,f,h,g),JR(f),Hg(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,Hg(a.rightAndBottom,f,h,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},yt(a.chartArea,m=>{const p=m.box;Object.assign(p,e.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class U0{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class tC extends U0{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const _a="$chartjs",eC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Yg=e=>e===null||e==="";function nC(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[_a]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Yg(i)){const r=Ig(e,"width");r!==void 0&&(e.width=r)}if(Yg(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Ig(e,"height");r!==void 0&&(e.height=r)}return e}const W0=sR?{passive:!0}:!1;function sC(e,t,n){e.addEventListener(t,n,W0)}function iC(e,t,n){e.canvas.removeEventListener(t,n,W0)}function rC(e,t){const n=eC[e.type]||e.type,{x:s,y:i}=ys(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function tl(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function oC(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||tl(a.addedNodes,s),o=o&&!tl(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function aC(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||tl(a.removedNodes,s),o=o&&!tl(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const ro=new Map;let qg=0;function j0(){const e=window.devicePixelRatio;e!==qg&&(qg=e,ro.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function lC(e,t){ro.size||window.addEventListener("resize",j0),ro.set(e,t)}function cC(e){ro.delete(e),ro.size||window.removeEventListener("resize",j0)}function uC(e,t,n){const s=e.canvas,i=s&&yd(s);if(!i)return;const r=x0((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),lC(e,r),o}function Nc(e,t,n){n&&n.disconnect(),t==="resize"&&cC(e)}function hC(e,t,n){const s=e.canvas,i=x0(r=>{e.ctx!==null&&n(rC(r,e))},e);return sC(s,t,i),i}class dC extends U0{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(nC(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[_a])return!1;const s=n[_a].initial;["height","width"].forEach(r=>{const o=s[r];vt(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[_a],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:oC,detach:aC,resize:uC}[n]||hC;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Nc,detach:Nc,resize:Nc}[n]||iC)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return nR(t,n,s,i)}isAttached(t){const n=yd(t);return!!(n&&n.isConnected)}}function fC(e){return!D0()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?tC:dC}var oa;let zn=(oa=class{constructor(){z(this,"x");z(this,"y");z(this,"active",!1);z(this,"options");z(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return no(this.x)&&no(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},z(oa,"defaults",{}),z(oa,"defaultRoutes"),oa);function gC(e,t){const n=e.options.ticks,s=pC(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?_C(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return yC(t,c,r,o/i),c;const u=mC(r,t,i);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Zo(t,c,u,vt(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Zo(t,c,u,r[h],r[h+1]);return Zo(t,c,u,l,vt(f)?t.length:l+f),c}return Zo(t,c,u),c}function pC(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function mC(e,t,n){const s=vC(e),i=t.length/n;if(!s)return Math.max(i,1);const r=iM(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function _C(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function yC(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Zo(e,t,n,s,i){const r=ot(s,0),o=Math.min(ot(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function vC(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const bC=e=>e==="left"?"right":e==="right"?"left":e,Gg=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Kg=(e,t)=>Math.min(t||e,e);function Qg(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function wC(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function TC(e,t){yt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function ir(e){return e.drawTicks?e.tickLength:0}function Xg(e,t){if(!e.display)return 0;const n=Kt(e.font,t),s=_e(e.padding);return(Nt(e.text)?e.text.length:1)*n.lineHeight+s.height}function EC(e,t){return us(e,{scale:t,type:"scale"})}function xC(e,t,n){return us(e,{tick:n,index:t,type:"tick"})}function SC(e,t,n){let s=ud(e);return(n&&t!=="right"||!n&&t==="right")&&(s=bC(s)),s}function kC(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,d,f,g;const m=o-i,p=a-r;if(e.isHorizontal()){if(f=ae(s,r,a),ft(n)){const _=Object.keys(n)[0],w=n[_];g=u[_].getPixelForValue(w)+m-t}else n==="center"?g=(c.bottom+c.top)/2+m-t:g=Gg(e,n,t);d=a-r}else{if(ft(n)){const _=Object.keys(n)[0],w=n[_];f=u[_].getPixelForValue(w)-p+t}else n==="center"?f=(c.left+c.right)/2-p+t:f=Gg(e,n,t);g=ae(s,o,i),h=n==="left"?-jt:jt}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class Ys extends zn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Ae(t,Number.POSITIVE_INFINITY),n=Ae(n,Number.NEGATIVE_INFINITY),s=Ae(s,Number.POSITIVE_INFINITY),i=Ae(i,Number.NEGATIVE_INFINITY),{min:Ae(t,s),max:Ae(n,i),minDefined:te(t),maxDefined:te(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Ae(n,Ae(s,n)),max:Ae(s,Ae(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){St(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OM(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Qg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=gC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){St(this.options.afterUpdate,[this])}beforeSetDimensions(){St(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){St(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),St(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){St(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=St(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){St(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){St(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Kg(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=he(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),h+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-ir(t.grid)-n.padding-Xg(t.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=ld(Math.min(Math.asin(he((u.highest.height+6)/a,-1,1)),Math.asin(he(l/c,-1,1))-Math.asin(he(d/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){St(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){St(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Xg(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=ir(r)+l):(t.height=this.maxHeight,t.width=ir(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=s.padding*2,g=cn(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(a){const _=s.mirror?0:p*h.width+m*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{const _=s.mirror?0:m*h.width+p*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,u,p,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*t.width,f=s*n.height):(d=s*t.height,f=i*n.width):r==="start"?f=n.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;r==="start"?(u=0,h=t.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){St(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)vt(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Qg(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/Kg(n,s));let c=0,u=0,h,d,f,g,m,p,_,w,T,S,E;for(h=0;h<n;h+=l){if(g=t[h].label,m=this._resolveTickFontOptions(h),i.font=p=m.string,_=r[p]=r[p]||{data:{},gc:[]},w=m.lineHeight,T=S=0,!vt(g)&&!Nt(g))T=Ja(i,_.data,_.gc,T,g),S=w;else if(Nt(g))for(d=0,f=g.length;d<f;++d)E=g[d],!vt(E)&&!Nt(E)&&(T=Ja(i,_.data,_.gc,T,E),S+=w);o.push(T),a.push(S),c=Math.max(T,c),u=Math.max(S,u)}TC(r,n);const I=o.indexOf(c),A=a.indexOf(u),x=k=>({width:o[k]||0,height:a[k]||0});return{first:x(0),last:x(n-1),widest:x(I),highest:x(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return aM(this._alignToPixels?gs(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=xC(this.getContext(),t,s))}return this.$context||(this.$context=EC(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=cn(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=ir(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,_=function(lt){return gs(s,lt,m)};let w,T,S,E,I,A,x,k,Y,W,j,kt;if(o==="top")w=_(this.bottom),A=this.bottom-d,k=w-p,W=_(t.top)+p,kt=t.bottom;else if(o==="bottom")w=_(this.top),W=t.top,kt=_(t.bottom)-p,A=w+p,k=this.top+d;else if(o==="left")w=_(this.right),I=this.right-d,x=w-p,Y=_(t.left)+p,j=t.right;else if(o==="right")w=_(this.left),Y=t.left,j=_(t.right)-p,I=w+p,x=this.left+d;else if(n==="x"){if(o==="center")w=_((t.top+t.bottom)/2+.5);else if(ft(o)){const lt=Object.keys(o)[0],mt=o[lt];w=_(this.chart.scales[lt].getPixelForValue(mt))}W=t.top,kt=t.bottom,A=w+p,k=A+d}else if(n==="y"){if(o==="center")w=_((t.left+t.right)/2);else if(ft(o)){const lt=Object.keys(o)[0],mt=o[lt];w=_(this.chart.scales[lt].getPixelForValue(mt))}I=w-p,x=I-d,Y=t.left,j=t.right}const wt=ot(i.ticks.maxTicksLimit,h),rt=Math.max(1,Math.ceil(h/wt));for(T=0;T<h;T+=rt){const lt=this.getContext(T),mt=r.setContext(lt),Ot=a.setContext(lt),At=mt.lineWidth,be=mt.color,tn=Ot.dash||[],De=Ot.dashOffset,O=mt.tickWidth,nt=mt.tickColor,ze=mt.tickBorderDash||[],Ue=mt.tickBorderDashOffset;S=wC(this,T,l),S!==void 0&&(E=gs(s,S,At),c?I=x=Y=j=E:A=k=W=kt=E,f.push({tx1:I,ty1:A,tx2:x,ty2:k,x1:Y,y1:W,x2:j,y2:kt,width:At,color:be,borderDash:tn,borderDashOffset:De,tickWidth:O,tickColor:nt,tickBorderDash:ze,tickBorderDashOffset:Ue}))}return this._ticksLength=h,this._borderValue=w,f}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=ir(s.grid),f=d+u,g=h?-u:f,m=-cn(this.labelRotation),p=[];let _,w,T,S,E,I,A,x,k,Y,W,j,kt="middle";if(i==="top")I=this.bottom-g,A=this._getXAxisLabelAlignment();else if(i==="bottom")I=this.top+g,A=this._getXAxisLabelAlignment();else if(i==="left"){const rt=this._getYAxisLabelAlignment(d);A=rt.textAlign,E=rt.x}else if(i==="right"){const rt=this._getYAxisLabelAlignment(d);A=rt.textAlign,E=rt.x}else if(n==="x"){if(i==="center")I=(t.top+t.bottom)/2+f;else if(ft(i)){const rt=Object.keys(i)[0],lt=i[rt];I=this.chart.scales[rt].getPixelForValue(lt)+f}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")E=(t.left+t.right)/2-f;else if(ft(i)){const rt=Object.keys(i)[0],lt=i[rt];E=this.chart.scales[rt].getPixelForValue(lt)}A=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?kt="top":l==="end"&&(kt="bottom"));const wt=this._getLabelSizes();for(_=0,w=a.length;_<w;++_){T=a[_],S=T.label;const rt=r.setContext(this.getContext(_));x=this.getPixelForTick(_)+r.labelOffset,k=this._resolveTickFontOptions(_),Y=k.lineHeight,W=Nt(S)?S.length:1;const lt=W/2,mt=rt.color,Ot=rt.textStrokeColor,At=rt.textStrokeWidth;let be=A;o?(E=x,A==="inner"&&(_===w-1?be=this.options.reverse?"left":"right":_===0?be=this.options.reverse?"right":"left":be="center"),i==="top"?c==="near"||m!==0?j=-W*Y+Y/2:c==="center"?j=-wt.highest.height/2-lt*Y+Y:j=-wt.highest.height+Y/2:c==="near"||m!==0?j=Y/2:c==="center"?j=wt.highest.height/2-lt*Y:j=wt.highest.height-W*Y,h&&(j*=-1),m!==0&&!rt.showLabelBackdrop&&(E+=Y/2*Math.sin(m))):(I=x,j=(1-W)*Y/2);let tn;if(rt.showLabelBackdrop){const De=_e(rt.backdropPadding),O=wt.heights[_],nt=wt.widths[_];let ze=j-De.top,Ue=0-De.left;switch(kt){case"middle":ze-=O/2;break;case"bottom":ze-=O;break}switch(A){case"center":Ue-=nt/2;break;case"right":Ue-=nt;break}tn={left:Ue,top:ze,width:nt+De.width,height:O+De.height,color:rt.backdropColor}}p.push({label:S,font:k,textOffset:j,options:{rotation:m,color:mt,strokeColor:Ot,strokeWidth:At,textAlign:be,textBaseline:kt,translation:[E,I],backdrop:tn}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-cn(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=gs(t,this.left,o)-o/2,u=gs(t,this.right,a)+a/2,h=d=l):(h=gs(t,this.top,o)-o/2,d=gs(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&dd(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ls(s,c,0,u,l,a)}i&&fd(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Kt(s.font),o=_e(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ft(n)?(l+=o.bottom,Nt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=kC(this,l,n,a);Ls(t,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:d,textAlign:SC(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=ot(t.grid&&t.grid.z,-1),i=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ys.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Kt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ta{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;PC(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,AC(t,o,s),this.override&&zt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in zt[i]&&(delete zt[i][s],this.override&&delete Vs[s])}}function AC(e,t,n){const s=to(Object.create(null),[n?zt.get(n):{},zt.get(t),e.defaults]);zt.set(t,s),e.defaultRoutes&&IC(t,e.defaultRoutes),e.descriptors&&zt.describe(t,e.descriptors)}function IC(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");zt.route(r,i,l,a)})}function PC(e){return"id"in e&&"defaults"in e}class MC{constructor(){this.controllers=new ta(Ps,"datasets",!0),this.elements=new ta(zn,"elements"),this.plugins=new ta(Object,"plugins"),this.scales=new ta(Ys,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):yt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=ad(t);St(s["before"+i],[],s),n[t](s),St(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var nn=new MC;class RC{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(St(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=ot(s.options&&s.options.plugins,{}),r=CC(s);return i===!1&&!n?[]:OC(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function CC(e){const t={},n=[],s=Object.keys(nn.plugins.items);for(let r=0;r<s.length;r++)n.push(nn.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function DC(e,t){return!t&&e===!1?null:e===!0?{}:e}function OC(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=DC(s[l],i);c!==null&&r.push({plugin:a,options:VC(e.config,{plugin:a,local:n[l]},c,o)})}return r}function VC(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cu(e,t){const n=zt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function LC(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function NC(e,t){return e===t?"_index_":"_value_"}function Jg(e){if(e==="x"||e==="y"||e==="r")return e}function FC(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Du(e,...t){if(Jg(e))return e;for(const n of t){const s=n.axis||FC(n.position)||e.length>1&&Jg(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Zg(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function $C(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Zg(e,"x",n[0])||Zg(e,"y",n[0])}return{}}function BC(e,t){const n=Vs[e.type]||{scales:{}},s=t.scales||{},i=Cu(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!ft(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Du(o,a,$C(o,e),zt.scales[a.type]),c=NC(l,i),u=n.scales||{};r[o]=Sr(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Cu(a,t),u=(Vs[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=LC(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Sr(r[f],[{axis:d},s[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Sr(a,[zt.scales[a.type],zt.scale])}),r}function H0(e){const t=e.options||(e.options={});t.plugins=ot(t.plugins,{}),t.scales=BC(e,t)}function Y0(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function zC(e){return e=e||{},e.data=Y0(e.data),H0(e),e}const tp=new Map,q0=new Set;function ea(e,t){let n=tp.get(e);return n||(n=t(),tp.set(e,n),q0.add(n)),n}const rr=(e,t,n)=>{const s=Os(t,n);s!==void 0&&e.add(s)};class UC{constructor(t){this._config=zC(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Y0(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),H0(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ea(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return ea(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return ea(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return ea(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>rr(l,t,h))),u.forEach(h=>rr(l,i,h)),u.forEach(h=>rr(l,Vs[r]||{},h)),u.forEach(h=>rr(l,zt,h)),u.forEach(h=>rr(l,Mu,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),q0.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Vs[n]||{},zt.datasets[n]||{},{type:n},zt,Mu]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=ep(this._resolverCache,t,i);let l=o;if(jC(o,n)){r.$shared=!1,s=os(s)?s():s;const c=this.createResolver(t,s,a);l=Ri(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=ep(this._resolverCache,t,s);return ft(n)?Ri(r,n,void 0,i):r}}function ep(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:pd(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const WC=e=>ft(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||os(e[n]),!1);function jC(e,t){const{isScriptable:n,isIndexable:s}=I0(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(os(a)||WC(a))||o&&Nt(a))return!0}return!1}var HC="4.4.0";const YC=["top","bottom","left","right","chartArea"];function np(e,t){return e==="top"||e==="bottom"||YC.indexOf(e)===-1&&t==="x"}function sp(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function ip(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),St(n&&n.onComplete,[e],t)}function qC(e){const t=e.chart,n=t.options.animation;St(n&&n.onProgress,[e],t)}function G0(e){return D0()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ya={},rp=e=>{const t=G0(e);return Object.values(ya).filter(n=>n.canvas===t).pop()};function GC(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function KC(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}function na(e,t,n){return e.options.clip?e[n]:t[n]}function QC(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:na(n,t,"left"),right:na(n,t,"right"),top:na(s,t,"top"),bottom:na(s,t,"bottom")}:t}var Un;let hs=(Un=class{static register(...t){nn.add(...t),op()}static unregister(...t){nn.remove(...t),op()}constructor(t,n){const s=this.config=new UC(n),i=G0(t),r=rp(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||fC(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=KP(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hM(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ya[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}En.listen(this,"complete",ip),En.listen(this,"progress",qC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return vt(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return nn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ag(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xg(this.canvas,this.ctx),this}stop(){return En.stop(this),this}resize(t,n){En.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ag(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),St(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};yt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Du(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),yt(r,o=>{const a=o.options,l=a.id,c=Du(l,a),u=ot(a.type,o.dtype);(a.position===void 0||np(a.position,c)!==np(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const d=nn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,t)}),yt(i,(o,a)=>{o||delete s[a]}),yt(s,o=>{Fe.configure(this,o,o.options),Fe.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(sp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Cu(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=nn.getController(a),{datasetElementType:c,dataElementType:u}=zt.datasets[a];Object.assign(l,{dataElementType:nn.getElement(u),datasetElementType:c&&nn.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||yt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(sp("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{Fe.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!pg(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;GC(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!pg(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fe.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],yt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,os(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(En.has(this)?this.attached&&!En.running(this)&&En.start(this):(this.draw(),ip({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resize(s,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,i=!s.disabled,r=QC(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&dd(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),i&&fd(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Cn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=YR.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=us(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);eo(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),En.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xg(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ya[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};yt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){yt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},yt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ka(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=eM(t),c=KC(t,this._lastEvent,s,l);s&&(this._lastEvent=null,St(r.onHover,[t,a,this],this),l&&St(r.onClick,[t,a,this],this));const u=!Ka(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},z(Un,"defaults",zt),z(Un,"instances",ya),z(Un,"overrides",Vs),z(Un,"registry",nn),z(Un,"version",HC),z(Un,"getChart",rp),Un);function op(){return yt(hs.instances,e=>e._plugins.invalidate())}function XC(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+jt,s-jt),e.closePath(),e.clip()}function JC(e){return gd(e,["outerStart","outerEnd","innerStart","innerEnd"])}function ZC(e,t,n,s){const i=JC(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return he(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:he(i.innerStart,0,o),innerEnd:he(i.innerEnd,0,o)}}function Zs(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function el(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+s+n-c,0),d=u>0?u+s+n+c:0;let f=0;const g=i-l;if(s){const rt=u>0?u-s:0,lt=h>0?h-s:0,mt=(rt+lt)/2,Ot=mt!==0?g*mt/(mt+s):g;f=(g-Ot)/2}const m=Math.max(.001,g*h-n/$t)/h,p=(g-m)/2,_=l+p+f,w=i-p-f,{outerStart:T,outerEnd:S,innerStart:E,innerEnd:I}=ZC(t,d,h,w-_),A=h-T,x=h-S,k=_+T/A,Y=w-S/x,W=d+E,j=d+I,kt=_+E/W,wt=w-I/j;if(e.beginPath(),r){const rt=(k+Y)/2;if(e.arc(o,a,h,k,rt),e.arc(o,a,h,rt,Y),S>0){const At=Zs(x,Y,o,a);e.arc(At.x,At.y,S,Y,w+jt)}const lt=Zs(j,w,o,a);if(e.lineTo(lt.x,lt.y),I>0){const At=Zs(j,wt,o,a);e.arc(At.x,At.y,I,w+jt,wt+Math.PI)}const mt=(w-I/d+(_+E/d))/2;if(e.arc(o,a,d,w-I/d,mt,!0),e.arc(o,a,d,mt,_+E/d,!0),E>0){const At=Zs(W,kt,o,a);e.arc(At.x,At.y,E,kt+Math.PI,_-jt)}const Ot=Zs(A,_,o,a);if(e.lineTo(Ot.x,Ot.y),T>0){const At=Zs(A,k,o,a);e.arc(At.x,At.y,T,_-jt,k)}}else{e.moveTo(o,a);const rt=Math.cos(k)*h+o,lt=Math.sin(k)*h+a;e.lineTo(rt,lt);const mt=Math.cos(Y)*h+o,Ot=Math.sin(Y)*h+a;e.lineTo(mt,Ot)}e.closePath()}function tD(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){el(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Ft||Ft))}return el(e,t,n,s,l,i),e.fill(),l}function eD(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(r){el(e,t,n,s,g,i);for(let m=0;m<r;++m)e.stroke();isNaN(a)||(g=o+(a%Ft||Ft))}f&&XC(e,t,g),r||(el(e,t,n,s,g,i),e.stroke())}class gr extends zn{constructor(n){super();z(this,"circumference");z(this,"endAngle");z(this,"fullCircles");z(this,"innerRadius");z(this,"outerRadius");z(this,"pixelMargin");z(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=b0(r,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=ot(d,c-l)>=Ft||so(o,l,c),p=Kn(a,u+f,h+f);return m&&p}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(r+o)/2,d=(a+l+u+c)/2;return{x:s+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Ft?Math.floor(i/Ft):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min($t,i||0)),u=r*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,tD(n,this,u,o,a),eD(n,this,u,o,a),n.restore()}}z(gr,"id","arc"),z(gr,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),z(gr,"defaultRoutes",{backgroundColor:"backgroundColor"}),z(gr,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function K0(e,t,n=t){e.lineCap=ot(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ot(n.borderDash,t.borderDash)),e.lineDashOffset=ot(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ot(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ot(n.borderWidth,t.borderWidth),e.strokeStyle=ot(n.borderColor,t.borderColor)}function nD(e,t,n){e.lineTo(n.x,n.y)}function sD(e){return e.stepped?SM:e.tension||e.cubicInterpolationMode==="monotone"?kM:nD}function Q0(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function iD(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Q0(i,n,s),u=sD(r);let{move:h=!0,reverse:d}=s||{},f,g,m;for(f=0;f<=c;++f)g=i[(a+(d?c-f:f))%o],!g.skip&&(h?(e.moveTo(g.x,g.y),h=!1):u(e,m,g,d,r.stepped),m=g);return l&&(g=i[(a+(d?c:0))%o],u(e,m,g,d,r.stepped)),!!l}function rD(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=Q0(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,d,f,g,m,p,_;const w=S=>(o+(c?a-S:S))%r,T=()=>{m!==p&&(e.lineTo(u,p),e.lineTo(u,m),e.lineTo(u,_))};for(l&&(f=i[w(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[w(d)],f.skip)continue;const S=f.x,E=f.y,I=S|0;I===g?(E<m?m=E:E>p&&(p=E),u=(h*u+S)/++h):(T(),e.lineTo(S,E),g=I,h=0,m=p=E),_=E}T()}function Ou(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?rD:iD}function oD(e){return e.stepped?iR:e.tension||e.cubicInterpolationMode==="monotone"?rR:vs}function aD(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),K0(e,t.options),e.stroke(i)}function lD(e,t,n,s){const{segments:i,options:r}=t,o=Ou(t);for(const a of i)K0(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const cD=typeof Path2D=="function";function uD(e,t,n,s){cD&&!t.options.segment?aD(e,t,n,s):lD(e,t,n,s)}class pr extends zn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;QM(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fR(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=uR(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=oD(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],g=r[d];if(f===g){a.push(f);continue}const m=Math.abs((i-f[n])/(g[n]-f[n])),p=l(f,g,m,s.stepped);p[n]=t[n],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Ou(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=Ou(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),uD(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}z(pr,"id","line"),z(pr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),z(pr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),z(pr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ap(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class va extends zn{constructor(n){super();z(this,"parsed");z(this,"skip");z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return ap(this,n,"x",s)}inYRange(n,s){return ap(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!Cn(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Ru(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}z(va,"id","point"),z(va,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),z(va,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function X0(e,t){const{x:n,y:s,base:i,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=s-h,u=s+h):(h=r/2,a=n-h,l=n+h,c=Math.min(s,i),u=Math.max(s,i)),{left:a,top:c,right:l,bottom:u}}function Qn(e,t,n,s){return e?0:he(t,n,s)}function hD(e,t,n){const s=e.options.borderWidth,i=e.borderSkipped,r=A0(s);return{t:Qn(i.top,r.top,0,n),r:Qn(i.right,r.right,0,t),b:Qn(i.bottom,r.bottom,0,n),l:Qn(i.left,r.left,0,t)}}function dD(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,r=As(i),o=Math.min(t,n),a=e.borderSkipped,l=s||ft(i);return{topLeft:Qn(!l||a.top||a.left,r.topLeft,0,o),topRight:Qn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Qn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Qn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function fD(e){const t=X0(e),n=t.right-t.left,s=t.bottom-t.top,i=hD(e,n/2,s/2),r=dD(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Fc(e,t,n,s){const i=t===null,r=n===null,a=e&&!(i&&r)&&X0(e,s);return a&&(i||Kn(t,a.left,a.right))&&(r||Kn(n,a.top,a.bottom))}function gD(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function pD(e,t){e.rect(t.x,t.y,t.w,t.h)}function $c(e,t,n={}){const s=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+s,y:e.y+i,w:e.w+r,h:e.h+o,radius:e.radius}}class ba extends zn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=fD(this),a=gD(o.radius)?io:pD;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,$c(o,n,r)),t.clip(),a(t,$c(r,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,$c(r,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,s){return Fc(this,t,n,s)}inXRange(t,n){return Fc(this,t,null,n)}inYRange(t,n){return Fc(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+i)/2:n,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}z(ba,"id","bar"),z(ba,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),z(ba,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const lp=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},mD=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class cp extends zn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=St(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Kt(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=lp(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,m)=>{const p=s+n/2+r.measureText(g.text).width;(m===0||c[c.length-1]+p+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,f+=u,d++),l[m]={left:0,top:f,row:d,width:p,height:i},c[c.length-1]+=p+a}),h}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,d=0,f=0,g=0,m=0;return this.legendItems.forEach((p,_)=>{const{itemWidth:w,itemHeight:T}=_D(s,n,r,p,i);_>0&&f+T+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,m++,d=f=0),l[_]={left:g,top:f,col:m,width:w,height:T},d=Math.max(d,w),f+=T+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=vi(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=ae(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=ae(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=ae(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=ae(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;dd(t,this),this._draw(),fd(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=zt.color,l=vi(t.rtl,this.left,this.width),c=Kt(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:p}=lp(o,h),_=function(I,A,x){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const k=ot(x.lineWidth,1);if(i.fillStyle=ot(x.fillStyle,a),i.lineCap=ot(x.lineCap,"butt"),i.lineDashOffset=ot(x.lineDashOffset,0),i.lineJoin=ot(x.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ot(x.strokeStyle,a),i.setLineDash(ot(x.lineDash,[])),o.usePointStyle){const Y={radius:m*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:k},W=l.xPlus(I,g/2),j=A+d;k0(i,Y,W,j,o.pointStyleWidth&&g)}else{const Y=A+Math.max((h-m)/2,0),W=l.leftForLtr(I,g),j=As(x.borderRadius);i.beginPath(),Object.values(j).some(kt=>kt!==0)?io(i,{x:W,y:Y,w:g,h:m,radius:j}):i.rect(W,Y,g,m),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(I,A,x){Ls(i,x.text,I,A+p/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},T=this.isHorizontal(),S=this._computeTitleHeight();T?f={x:ae(r,this.left+u,this.right-s[0]),y:this.top+u+S,line:0}:f={x:this.left+u,y:ae(r,this.top+S+u,this.bottom-n[0].height),line:0},O0(this.ctx,t.textDirection);const E=p+u;this.legendItems.forEach((I,A)=>{i.strokeStyle=I.fontColor,i.fillStyle=I.fontColor;const x=i.measureText(I.text).width,k=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),Y=g+d+x;let W=f.x,j=f.y;l.setWidth(this.width),T?A>0&&W+Y+u>this.right&&(j=f.y+=E,f.line++,W=f.x=ae(r,this.left+u,this.right-s[f.line])):A>0&&j+E>this.bottom&&(W=f.x=W+n[f.line].width+u,f.line++,j=f.y=ae(r,this.top+S+u,this.bottom-n[f.line].height));const kt=l.x(W);if(_(kt,j,I),W=dM(k,W+g+d,T?W+Y:this.right,t.rtl),w(l.x(W),j,I),T)f.x+=Y+u;else if(typeof I.text!="string"){const wt=c.lineHeight;f.y+=J0(I,wt)+u}else f.y+=E}),V0(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Kt(n.font),i=_e(n.padding);if(!n.display)return;const r=vi(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=ae(t.align,h,this.right-d);else{const g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);u=c+ae(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const f=ae(a,h,h+d);o.textAlign=r.textAlign(ud(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Ls(o,n.text,f,u,s)}_computeTitleHeight(){const t=this.options.title,n=Kt(t.font),s=_e(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Kn(t,this.left,this.right)&&Kn(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Kn(t,i.left,i.left+i.width)&&Kn(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!bD(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=mD(i,s);i&&!r&&St(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&St(n.onHover,[t,s,this],this)}else s&&St(n.onClick,[t,s,this],this)}}function _D(e,t,n,s,i){const r=yD(s,e,t,n),o=vD(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function yD(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function vD(e,t,n){let s=e;return typeof t.text!="string"&&(s=J0(t,n)),s}function J0(e,t){const n=e.text?e.text.length:0;return t*n}function bD(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var bd={id:"legend",_element:cp,start(e,t,n){const s=e.legend=new cp({ctx:e.ctx,options:n,chart:e});Fe.configure(e,s,n),Fe.addBox(e,s)},stop(e){Fe.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Fe.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=_e(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Z0 extends zn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Nt(s.text)?s.text.length:1;this._padding=_e(s.padding);const r=i*Kt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=ae(a,s,r),h=n+t,c=r-s):(o.position==="left"?(u=s+t,h=ae(a,i,n),l=$t*-.5):(u=r-t,h=ae(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Kt(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Ls(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:ud(n.align),textBaseline:"middle",translation:[o,a]})}}function wD(e,t){const n=new Z0({ctx:e.ctx,options:t,chart:e});Fe.configure(e,n,t),Fe.addBox(e,n),e.titleBlock=n}var wd={id:"title",_element:Z0,start(e,t,n){wD(e,n)},stop(e){const t=e.titleBlock;Fe.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Fe.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mr={average(e){if(!e.length)return!1;let t,n,s=0,i=0,r=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();s+=a.x,i+=a.y,++r}}return{x:s/r,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Pu(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function en(e,t){return t&&(Nt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function xn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function TD(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function up(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Kt(t.bodyFont),c=Kt(t.titleFont),u=Kt(t.footerFont),h=r.length,d=i.length,f=s.length,g=_e(t.padding);let m=g.height,p=0,_=s.reduce((S,E)=>S+E.before.length+E.lines.length+E.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),_){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*S+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let w=0;const T=function(S){p=Math.max(p,n.measureText(S).width+w)};return n.save(),n.font=c.string,yt(e.title,T),n.font=l.string,yt(e.beforeBody.concat(e.afterBody),T),w=t.displayColors?o+2+t.boxPadding:0,yt(s,S=>{yt(S.before,T),yt(S.lines,T),yt(S.after,T)}),w=0,n.font=u.string,yt(e.footer,T),n.restore(),p+=g.width,{width:p,height:m}}function ED(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function xD(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function SD(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),xD(c,e,t,n)&&(c="center"),c}function hp(e,t,n){const s=n.yAlign||t.yAlign||ED(e,n);return{xAlign:n.xAlign||t.xAlign||SD(e,t,n,s),yAlign:s}}function kD(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function AD(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function dp(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=As(o);let g=kD(t,a);const m=AD(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+i:a==="right"&&(g+=Math.max(h,f)+i),{x:he(g,0,s.width-t.width),y:he(m,0,s.height-t.height)}}function sa(e,t,n){const s=_e(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function fp(e){return en([],xn(e))}function ID(e,t,n){return us(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function gp(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const tv={beforeTitle:Tn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Tn,beforeBody:Tn,beforeLabel:Tn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return vt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Tn,afterBody:Tn,beforeFooter:Tn,footer:Tn,afterFooter:Tn};function Ee(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?tv[t].call(n,s):i}class Vu extends zn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new N0(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ID(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=Ee(s,"beforeTitle",this,t),r=Ee(s,"title",this,t),o=Ee(s,"afterTitle",this,t);let a=[];return a=en(a,xn(i)),a=en(a,xn(r)),a=en(a,xn(o)),a}getBeforeBody(t,n){return fp(Ee(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return yt(t,r=>{const o={before:[],lines:[],after:[]},a=gp(s,r);en(o.before,xn(Ee(a,"beforeLabel",this,r))),en(o.lines,Ee(a,"label",this,r)),en(o.after,xn(Ee(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return fp(Ee(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=Ee(s,"beforeFooter",this,t),r=Ee(s,"footer",this,t),o=Ee(s,"afterFooter",this,t);let a=[];return a=en(a,xn(i)),a=en(a,xn(r)),a=en(a,xn(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(TD(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,d)=>t.filter(u,h,d,s))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,s))),yt(a,u=>{const h=gp(t.callbacks,u);i.push(Ee(h,"labelColor",this,u)),r.push(Ee(h,"labelPointStyle",this,u)),o.push(Ee(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=mr[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=up(this,s),c=Object.assign({},a,l),u=hp(this.chart,s,c),h=dp(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=As(a),{x:d,y:f}=t,{width:g,height:m}=n;let p,_,w,T,S,E;return r==="center"?(S=f+m/2,i==="left"?(p=d,_=p-o,T=S+o,E=S-o):(p=d+g,_=p+o,T=S-o,E=S+o),w=p):(i==="left"?_=d+Math.max(l,u)+o:i==="right"?_=d+g-Math.max(c,h)-o:_=this.caretX,r==="top"?(T=f,S=T-o,p=_-o,w=_+o):(T=f+m,S=T+o,p=_+o,w=_-o),E=T),{x1:p,x2:_,x3:w,y1:T,y2:S,y3:E}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=vi(s.rtl,this.x,this.width);for(t.x=sa(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Kt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Kt(r.bodyFont),h=sa(this,"left",r),d=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=i.leftForLtr(d,c)+c/2,_=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ru(t,m,p,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ru(t,m,p,_)}else{t.lineWidth=ft(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(d,c),p=i.leftForLtr(i.xPlus(d,1),c-2),_=As(o.borderRadius);Object.values(_).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,io(t,{x:m,y:g,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),io(t,{x:p,y:g+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(p,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=Kt(s.bodyFont);let d=h.lineHeight,f=0;const g=vi(s.rtl,this.x,this.width),m=function(x){n.fillText(x,g.x(t.x+f),t.y+d/2),t.y+=d+r},p=g.textAlign(o);let _,w,T,S,E,I,A;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=sa(this,p,s),n.fillStyle=s.bodyColor,yt(this.beforeBody,m),f=a&&p!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,I=i.length;S<I;++S){for(_=i[S],w=this.labelTextColors[S],n.fillStyle=w,yt(_.before,m),T=_.lines,a&&T.length&&(this._drawColorBox(n,t,S,g,s),d=Math.max(h.lineHeight,l)),E=0,A=T.length;E<A;++E)m(T[E]),d=h.lineHeight;yt(_.after,m)}f=0,d=h.lineHeight,yt(this.afterBody,m),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=vi(s.rtl,this.x,this.width);for(t.x=sa(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Kt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=As(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=mr[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=up(this,t),l=Object.assign({},o,this._size),c=hp(n,t,l),u=dp(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=_e(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),O0(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),V0(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ka(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!Ka(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n;const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=mr[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}z(Vu,"positioners",mr);var Td={id:"tooltip",_element:Vu,positioners:mr,afterInit(e,t,n){n&&(e.tooltip=new Vu({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const PD=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function MD(e,t,n,s){const i=e.indexOf(t);if(i===-1)return PD(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const RD=(e,t)=>e===null?null:he(Math.round(e),0,t);function pp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class oo extends Ys{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(vt(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:MD(s,t,ot(n,t),this._addedLabels),RD(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return pp.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}z(oo,"id","category"),z(oo,"defaults",{ticks:{callback:pp}});function CD(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=e,f=r||1,g=u-1,{min:m,max:p}=t,_=!vt(o),w=!vt(a),T=!vt(c),S=(p-m)/(h+1);let E=_g((p-m)/g/f)*f,I,A,x,k;if(E<1e-14&&!_&&!w)return[{value:m},{value:p}];k=Math.ceil(p/E)-Math.floor(m/E),k>g&&(E=_g(k*E/g/f)*f),vt(l)||(I=Math.pow(10,l),E=Math.ceil(E*I)/I),i==="ticks"?(A=Math.floor(m/E)*E,x=Math.ceil(p/E)*E):(A=m,x=p),_&&w&&r&&rM((a-o)/r,E/1e3)?(k=Math.round(Math.min((a-o)/E,u)),E=(a-o)/k,A=o,x=a):T?(A=_?o:A,x=w?a:x,k=c-1,E=(x-A)/k):(k=(x-A)/E,kr(k,Math.round(k),E/1e3)?k=Math.round(k):k=Math.ceil(k));const Y=Math.max(yg(E),yg(A));I=Math.pow(10,vt(l)?Y:l),A=Math.round(A*I)/I,x=Math.round(x*I)/I;let W=0;for(_&&(d&&A!==o?(n.push({value:o}),A<o&&W++,kr(Math.round((A+W*E)*I)/I,o,mp(o,S,e))&&W++):A<o&&W++);W<k;++W){const j=Math.round((A+W*E)*I)/I;if(w&&j>a)break;n.push({value:j})}return w&&d&&x!==a?n.length&&kr(n[n.length-1].value,a,mp(a,S,e))?n[n.length-1].value=a:n.push({value:a}):(!w||x===a)&&n.push({value:x}),n}function mp(e,t,{horizontal:n,minRotation:s}){const i=cn(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class nl extends Ys{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=fn(i),c=fn(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=CD(i,r);return t.bounds==="ticks"&&v0(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Zl(t,this.chart.options.locale,this.options.ticks.format)}}class sl extends nl{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=te(t)?t:0,this.max=te(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=cn(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}z(sl,"id","linear"),z(sl,"defaults",{ticks:{callback:tc.formatters.numeric}});const ao=e=>Math.floor(Gn(e)),ms=(e,t)=>Math.pow(10,ao(e)+t);function _p(e){return e/Math.pow(10,ao(e))===1}function yp(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function DD(e,t){const n=t-e;let s=ao(n);for(;yp(e,t,s)>10;)s++;for(;yp(e,t,s)<10;)s--;return Math.min(s,ao(e))}function OD(e,{min:t,max:n}){t=Ae(e.min,t);const s=[],i=ao(t);let r=DD(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=Ae(e.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)s.push({value:d,major:_p(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=Ae(e.max,d);return s.push({value:f,major:_p(f),significand:h}),s}class vp extends Ys{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=nl.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return te(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=te(t)?Math.max(0,t):null,this.max=te(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!te(this._userMin)&&(this.min=t===ms(this.min,0)?ms(this.min,-1):ms(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(ms(s,-1)),o(ms(i,1)))),s<=0&&r(ms(i,-1)),i<=0&&o(ms(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=OD(n,this);return t.bounds==="ticks"&&v0(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Zl(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Gn(t),this._valueRange=Gn(this.max)-Gn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Gn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}z(vp,"id","logarithmic"),z(vp,"defaults",{ticks:{callback:tc.formatters.logarithmic,major:{enabled:!0}}});function Lu(e){const t=e.ticks;if(t.display&&e.display){const n=_e(t.backdropPadding);return ot(t.font&&t.font.size,zt.font.size)+n.height}return 0}function VD(e,t,n){return n=Nt(n)?n:[n],{w:xM(e,t.string,n),h:n.length*t.lineHeight}}function bp(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function LD(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?$t/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),h=Kt(c.font),d=VD(e.ctx,h,e._pointLabels[l]);s[l]=d;const f=We(e.getIndexAngle(l)+a),g=Math.round(ld(f)),m=bp(g,u.x,d.w,0,180),p=bp(g,u.y,d.h,90,270);ND(n,t,f,m,p)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=BD(e,s,i)}function ND(e,t,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function FD(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,l=e.getPointPosition(t,s+i+o,r),c=Math.round(ld(We(l.angle+jt))),u=WD(l.y,a.h,c),h=zD(c),d=UD(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function $D(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:r}=e;return!(Cn({x:n,y:s},t)||Cn({x:n,y:r},t)||Cn({x:i,y:s},t)||Cn({x:i,y:r},t))}function BD(e,t,n){const s=[],i=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Lu(r)/2,additionalAngle:o?$t/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const h=FD(e,u,l);s.push(h),a==="auto"&&(h.visible=$D(h,c),h.visible&&(c=h))}return s}function zD(e){return e===0||e===180?"center":e<180?"left":"right"}function UD(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function WD(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function jD(e,t,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=t;if(!vt(a)){const l=As(t.borderRadius),c=_e(t.backdropPadding);e.fillStyle=a;const u=s-c.left,h=i-c.top,d=r-s+c.width,f=o-i+c.height;Object.values(l).some(g=>g!==0)?(e.beginPath(),io(e,{x:u,y:h,w:d,h:f,radius:l}),e.fill()):e.fillRect(u,h,d,f)}}function HD(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const r=e._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(i));jD(n,o,r);const a=Kt(o.font),{x:l,y:c,textAlign:u}=r;Ls(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function ev(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Ft);else{let r=e.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function YD(e,t,n,s,i){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash),r.lineDashOffset=i.dashOffset,r.beginPath(),ev(e,n,o,s),r.closePath(),r.stroke(),r.restore())}function qD(e,t,n){return us(e,{label:n,index:t,type:"pointLabel"})}class ia extends nl{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=_e(Lu(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=te(t)&&!isNaN(t)?t:0,this.max=te(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lu(this.options))}generateTickLabels(t){nl.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=St(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?LD(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=Ft/(this._pointLabels.length||1),s=this.options.startAngle||0;return We(t*n+cn(s))}getDistanceFromCenterForValue(t){if(vt(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(vt(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return qD(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-jt+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),ev(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&HD(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=i.setContext(d),g=r.setContext(d);YD(this,f,l,o,g)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(t.lineWidth=d,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=s.setContext(this.getContext(l)),u=Kt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=_e(c.backdropPadding);t.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Ls(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}z(ia,"id","radialLinear"),z(ia,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),z(ia,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),z(ia,"descriptors",{angleLines:{_fallback:"grid"}});const nc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Se=Object.keys(nc);function wp(e,t){return e-t}function Tp(e,t){if(vt(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),te(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(no(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Ep(e,t,n,s){const i=Se.length;for(let r=Se.indexOf(e);r<i-1;++r){const o=nc[Se[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return Se[r]}return Se[i-1]}function GD(e,t,n,s,i){for(let r=Se.length-1;r>=Se.indexOf(n);r--){const o=Se[r];if(nc[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return Se[n?Se.indexOf(n):0]}function KD(e){for(let t=Se.indexOf(e)+1,n=Se.length;t<n;++t)if(nc[Se[t]].common)return Se[t]}function xp(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=cd(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function QD(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Sp(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:QD(e,s,i,n)}class il extends Ys{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new zR._date(t.adapters.date);i.init(n),Sr(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Tp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=te(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=te(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=cM(i,r,o);return this._unit=n.unit||(s.autoSkip?Ep(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):GD(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:KD(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Sp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=he(n,0,o),s=he(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Ep(r.minUnit,n,s,this._getLabelCapacity(n)),a=ot(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=no(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<s;d=+t.add(d,a,o),f++)xp(u,d,g);return(d===s||i.bounds==="ticks"||f===1)&&xp(u,d,g),Object.keys(u).sort(wp).map(m=>+m)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return St(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=s[n],f=c&&h&&d&&d.major;return this._adapter.format(t,i||(f?h:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=cn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Sp(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Tp(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return T0(t.sort(wp))}}z(il,"id","time"),z(il,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ra(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=xs(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=xs(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class kp extends il{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ra(n,this.min),this._tableRange=ra(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ra(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return ra(this._table,s*this._tableRange+this._minPos,!0)}}z(kp,"id","timeseries"),z(kp,"defaults",il.defaults);const Ap=/^on/,nv=[];Object.keys(globalThis).forEach(e=>{Ap.test(e)&&nv.push(e.replace(Ap,""))});function sc(e){const t=wi,n=[];function s(i){Up(t,i)}$u(()=>{const i=e();nv.forEach(i instanceof Element?r=>n.push(Tt(i,r,s)):r=>n.push(i.$on(r,s)))}),rl(()=>{for(;n.length;)n.pop()()})}function XD(e){let t,n=[e[1]],s={};for(let i=0;i<n.length;i+=1)s=Xt(s,n[i]);return{c(){t=b("canvas"),Bc(t,s)},m(i,r){D(i,t,r),e[8](t)},p:V,i:V,o:V,d(i){i&&R(t),e[8](null)}}}function JD(e){let{data:t,type:n,options:s,plugins:i,children:r,$$scope:o,$$slots:a,...l}=e;return l}function ZD(e,t,n){let{type:s}=t,{data:i={datasets:[]}}=t,{options:r={}}=t,{plugins:o=[]}=t,{updateMode:a=void 0}=t,{chart:l=null}=t,c,u=JD(t);$u(()=>{n(2,l=new hs(c,{type:s,data:i,options:r,plugins:o}))}),_v(()=>{l&&(n(2,l.data=i,l),Object.assign(l.options,r),l.update(a))}),rl(()=>{l&&l.destroy(),n(2,l=null)}),sc(()=>c);function h(d){Ke[d?"unshift":"push"](()=>{c=d,n(0,c)})}return e.$$set=d=>{n(9,t=Xt(Xt({},t),Ge(d))),"type"in d&&n(3,s=d.type),"data"in d&&n(4,i=d.data),"options"in d&&n(5,r=d.options),"plugins"in d&&n(6,o=d.plugins),"updateMode"in d&&n(7,a=d.updateMode),"chart"in d&&n(2,l=d.chart)},t=Ge(t),[c,u,l,s,i,r,o,a,h]}class Ed extends Ct{constructor(t){super(),Rt(this,t,ZD,XD,xt,{type:3,data:4,options:5,plugins:6,updateMode:7,chart:2})}}function t2(e){let t,n,s;const i=[{type:"line"},e[1]];function r(a){e[4](a)}let o={};for(let a=0;a<i.length;a+=1)o=Xt(o,i[a]);return e[0]!==void 0&&(o.chart=e[0]),t=new Ed({props:o}),e[3](t),Ke.push(()=>al(t,"chart",r)),{c(){Q(t.$$.fragment)},m(a,l){G(t,a,l),s=!0},p(a,[l]){const c=l&2?co(i,[i[0],Mr(a[1])]):{};!n&&l&1&&(n=!0,c.chart=a[0],ol(()=>n=!1)),t.$set(c)},i(a){s||(N(t.$$.fragment,a),s=!0)},o(a){$(t.$$.fragment,a),s=!1},d(a){e[3](null),K(t,a)}}}function e2(e,t,n){hs.register(ma);let{chart:s=null}=t,i,r;sc(()=>r);function o(l){Ke[l?"unshift":"push"](()=>{r=l,n(2,r)})}function a(l){s=l,n(0,s)}return e.$$set=l=>{n(5,t=Xt(Xt({},t),Ge(l))),"chart"in l&&n(0,s=l.chart)},e.$$.update=()=>{n(1,i=t)},t=Ge(t),[s,i,r,o,a]}class n2 extends Ct{constructor(t){super(),Rt(this,t,e2,t2,xt,{chart:0})}}function s2(e){let t,n,s;const i=[{type:"doughnut"},e[1]];function r(a){e[4](a)}let o={};for(let a=0;a<i.length;a+=1)o=Xt(o,i[a]);return e[0]!==void 0&&(o.chart=e[0]),t=new Ed({props:o}),e[3](t),Ke.push(()=>al(t,"chart",r)),{c(){Q(t.$$.fragment)},m(a,l){G(t,a,l),s=!0},p(a,[l]){const c=l&2?co(i,[i[0],Mr(a[1])]):{};!n&&l&1&&(n=!0,c.chart=a[0],ol(()=>n=!1)),t.$set(c)},i(a){s||(N(t.$$.fragment,a),s=!0)},o(a){$(t.$$.fragment,a),s=!1},d(a){e[3](null),K(t,a)}}}function i2(e,t,n){hs.register(dr);let{chart:s=null}=t,i,r;sc(()=>r);function o(l){Ke[l?"unshift":"push"](()=>{r=l,n(2,r)})}function a(l){s=l,n(0,s)}return e.$$set=l=>{n(5,t=Xt(Xt({},t),Ge(l))),"chart"in l&&n(0,s=l.chart)},e.$$.update=()=>{n(1,i=t)},t=Ge(t),[s,i,r,o,a]}class r2 extends Ct{constructor(t){super(),Rt(this,t,i2,s2,xt,{chart:0})}}function o2(e){let t,n,s;const i=[{type:"bar"},e[1]];function r(a){e[4](a)}let o={};for(let a=0;a<i.length;a+=1)o=Xt(o,i[a]);return e[0]!==void 0&&(o.chart=e[0]),t=new Ed({props:o}),e[3](t),Ke.push(()=>al(t,"chart",r)),{c(){Q(t.$$.fragment)},m(a,l){G(t,a,l),s=!0},p(a,[l]){const c=l&2?co(i,[i[0],Mr(a[1])]):{};!n&&l&1&&(n=!0,c.chart=a[0],ol(()=>n=!1)),t.$set(c)},i(a){s||(N(t.$$.fragment,a),s=!0)},o(a){$(t.$$.fragment,a),s=!1},d(a){e[3](null),K(t,a)}}}function a2(e,t,n){hs.register(pa);let{chart:s=null}=t,i,r;sc(()=>r);function o(l){Ke[l?"unshift":"push"](()=>{r=l,n(2,r)})}function a(l){s=l,n(0,s)}return e.$$set=l=>{n(5,t=Xt(Xt({},t),Ge(l))),"chart"in l&&n(0,s=l.chart)},e.$$.update=()=>{n(1,i=t)},t=Ge(t),[s,i,r,o,a]}class l2 extends Ct{constructor(t){super(),Rt(this,t,a2,o2,xt,{chart:0})}}function c2(e){let t,n;return t=new l2({props:{data:e[0],options:{responsive:!0,plugins:{legend:{display:!1}}}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p:V,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function u2(e){return hs.register(wd,Td,bd,ba,oo,sl),[{labels:["April","May","June","July","August","September"],datasets:[{data:[181789,192618,187867,173276,179532,154012],backgroundColor:["#ff7782","#7380ec","#ffbb55","#41f1b6","rgb(98,  182, 239)","rgb(255, 177, 101)"],borderWidth:0}]}]}class h2 extends Ct{constructor(t){super(),Rt(this,t,u2,c2,xt,{})}}function d2(e){let t,n;return t=new r2({props:{data:e[0],options:{responsive:!0,borderWidth:0,plugins:{legend:{display:!1}}}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p:V,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function f2(e){const t={labels:["Organic Search","Direct","Paid Search","Other"],datasets:[{data:[4591,2816,1214,938],backgroundColor:["#7380ec","#ff7782","#41f1b6","#ffbb55"]}]};return hs.register(wd,Td,bd,gr,oo),[t]}class g2 extends Ct{constructor(t){super(),Rt(this,t,f2,d2,xt,{})}}function p2(e){let t,n;return t=new n2({props:{data:e[0],options:{responsive:!0}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p:V,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function m2(e){return hs.register(wd,Td,bd,pr,sl,va,oo),[{labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],datasets:[{label:"Users",fill:!0,lineTension:.3,backgroundColor:"#41f1b6",borderColor:"#41f1b6",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#41f1b6",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[10078,10513,10562,10043,8370,2679,3279]},{label:"New Users",fill:!0,lineTension:.3,backgroundColor:"#ffbb55",borderColor:"#ffbb55",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#ffbb55",pointBackgroundColor:"rgb(255, 255, 255)",pointBorderWidth:10,pointHoverRadius:5,pointHoverBackgroundColor:"rgb(0, 0, 0)",pointHoverBorderColor:"rgba(220, 220, 220, 1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[7310,7665,7757,7305,6094,2106,2604]}]}]}class _2 extends Ct{constructor(t){super(),Rt(this,t,m2,p2,xt,{})}}function y2(e){let t,n,s,i,r,o,a;const l=e[3].default,c=Ns(l,e,e[2],null);return{c(){t=b("dialog"),n=b("div"),s=b("button"),s.innerHTML='<span class="material-icons-sharp svelte-18zltu3">close</span>',i=L(),c&&c.c(),s.autofocus=!0,y(s,"class","svelte-18zltu3"),y(n,"class","svelte-18zltu3"),y(t,"class","svelte-18zltu3")},m(u,h){D(u,t,h),v(t,n),v(n,s),v(n,i),c&&c.m(n,null),e[6](t),r=!0,s.focus(),o||(a=[Tt(s,"click",e[5]),Tt(n,"click",uv(e[4])),Tt(t,"close",e[7]),Tt(t,"click",hv(e[8]))],o=!0)},p(u,[h]){c&&c.p&&(!r||h&4)&&$s(c,l,u,u[2],r?Fs(l,u[2],h,null):Bs(u[2]),null)},i(u){r||(N(c,u),r=!0)},o(u){$(c,u),r=!1},d(u){u&&R(t),c&&c.d(u),e[6](null),o=!1,Re(a)}}}function v2(e,t,n){let{$$slots:s={},$$scope:i}=t,{showModal:r}=t,o;function a(d){Up.call(this,e,d)}const l=()=>o.close();function c(d){Ke[d?"unshift":"push"](()=>{o=d,n(1,o)})}const u=()=>n(0,r=!1),h=()=>o.close();return e.$$set=d=>{"showModal"in d&&n(0,r=d.showModal),"$$scope"in d&&n(2,i=d.$$scope)},e.$$.update=()=>{e.$$.dirty&3&&o&&r&&o.showModal()},[r,o,i,s,a,l,c,u,h]}class b2 extends Ct{constructor(t){super(),Rt(this,t,v2,y2,xt,{showModal:0})}}function Ip(e,t,n){const s=e.slice();return s[4]=t[n],s}function Pp(e){let t,n,s,i,r,o,a,l=e[4].message+"",c,u,h,d=Mp(e[4].timestamp)+"",f,g;return{c(){t=b("div"),n=b("div"),s=b("img"),r=L(),o=b("div"),a=b("p"),c=Te(l),u=L(),h=b("small"),f=Te(d),g=L(),Md(s.src,i=`/images/${e[4].profilePic}`)||y(s,"src",i),y(s,"alt",""),y(n,"class","profile-photo"),y(h,"class","text-muted"),y(o,"class","message"),y(t,"class","update svelte-60y68z")},m(m,p){D(m,t,p),v(t,n),v(n,s),v(t,r),v(t,o),v(o,a),v(a,c),v(o,u),v(o,h),v(h,f),v(t,g)},p(m,p){p&1&&!Md(s.src,i=`/images/${m[4].profilePic}`)&&y(s,"src",i),p&1&&l!==(l=m[4].message+"")&&Pr(c,l),p&1&&d!==(d=Mp(m[4].timestamp)+"")&&Pr(f,d)},d(m){m&&R(t)}}}function w2(e){let t,n=e[0],s=[];for(let i=0;i<n.length;i+=1)s[i]=Pp(Ip(e,n,i));return{c(){t=b("div");for(let i=0;i<s.length;i+=1)s[i].c();y(t,"class","updates")},m(i,r){D(i,t,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null)},p(i,r){if(r&1){n=i[0];let o;for(o=0;o<n.length;o+=1){const a=Ip(i,n,o);s[o]?s[o].p(a,r):(s[o]=Pp(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(i){i&&R(t),ci(s,i)}}}function T2(e){let t,n,s,i,r;return i=new He({props:{fullHeight:!1,$$slots:{default:[w2]},$$scope:{ctx:e}}}),{c(){t=b("div"),n=b("h2"),n.textContent="Recent Updates",s=L(),Q(i.$$.fragment),y(n,"class","accent-line svelte-60y68z"),y(t,"class","recent-updates svelte-60y68z")},m(o,a){D(o,t,a),v(t,n),v(t,s),G(i,t,null),r=!0},p(o,[a]){const l={};a&129&&(l.$$scope={dirty:a,ctx:o}),i.$set(l)},i(o){r||(N(i.$$.fragment,o),r=!0)},o(o){$(i.$$.fragment,o),r=!1},d(o){o&&R(t),K(i)}}}let E2=9;function Mp(e){const n=Math.floor((new Date-e)/1e3);if(n<60)return"Now";if(n<3600){const s=Math.floor(n/60);return`${s} minute${s>1?"s":""} ago`}else if(n<86400){const s=Math.floor(n/3600);return`${s} hour${s>1?"s":""} ago`}else{const s=Math.floor(n/86400);return`${s} day${s>1?"s":""} ago`}}function x2(e,t,n){let s=["William Watson received his order!","Emily Johnson's order has shipped!","John Smith's order has been shipped!","Emily Johnson received her order!","Michael Davis placed a new order.","Sarah Miller's order has been cancelled.","Daniel Brown's order is out for delivery.","Olivia Wilson's order has been processed.","William Watson received his order!","Sophia Lee's order is on hold.","James Taylor's order has been delayed.","Ava Hernandez's order has shipped!","Liam Rodriguez received his order!","Mia Martinez placed a new order.","Benjamin Anderson's order has been cancelled.","Charlotte Perez's order is out for delivery.","Elijah Gonzalez's order has been processed.","Amelia Lewis received her order!","Henry Walker's order is on hold.","Elizabeth Hall's order has been delayed.","Alexander White's order has shipped!","Sofia Young received her order!","Matthew Moore placed a new order.","Avery Turner's order has been cancelled.","Grace Adams's order is out for delivery.","Daniel Mitchell's order has been processed.","Ella Harris received her order!","William Clark's order is on hold.","Olivia Baker's order has been delayed.","James Lewis's order has shipped!","Sophia Johnson received her order!","Michael Wilson placed a new order."],i=[{message:s[0],profilePic:"profile-1.jpg",timestamp:new Date},{message:s[1],profilePic:"profile-2.jpg",timestamp:new Date().setMinutes(new Date().getMinutes()-1)},{message:s[2],profilePic:"profile-3.jpg",timestamp:new Date().setMinutes(new Date().getMinutes()-2)}];const o=setInterval(()=>{const a=Math.floor(Math.random()*s.length),l=Math.floor(Math.random()*E2),c={message:s[a],profilePic:`profile-${l}.jpg`,timestamp:new Date};n(0,i=[c,...i.slice(0,2)])},6e4);return rl(()=>{clearInterval(o)}),[i]}class S2 extends Ct{constructor(t){super(),Rt(this,t,x2,T2,xt,{})}}function k2(e){let t,n,s,i,r,o,a,l,c;return o=new g2({}),{c(){t=b("div"),n=b("div"),n.innerHTML=`<span class="material-icons-sharp svelte-v7l6x1">analytics</span> 
              <div><h3 class="svelte-v7l6x1">Traffic Acquisition</h3></div>`,s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("small"),l.textContent="Last 24 Hours",y(n,"class","top"),y(r,"class","progress responsive svelte-v7l6x1"),y(i,"class","middle svelte-v7l6x1"),y(l,"class","text-muted svelte-v7l6x1"),y(t,"class","stats-card svelte-v7l6x1")},m(u,h){D(u,t,h),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(t,a),v(t,l),c=!0},p:V,i(u){c||(N(o.$$.fragment,u),c=!0)},o(u){$(o.$$.fragment,u),c=!1},d(u){u&&R(t),K(o)}}}function A2(e){let t,n,s,i,r,o,a,l,c;return o=new _2({}),{c(){t=b("div"),n=b("div"),n.innerHTML=`<span class="material-icons-sharp svelte-v7l6x1">stacked_line_chart</span> 
              <div><h3 class="svelte-v7l6x1">Total Daily Users</h3></div>`,s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("small"),l.textContent="Last 7 Days",y(n,"class","top"),y(r,"class","progress responsive svelte-v7l6x1"),y(i,"class","middle svelte-v7l6x1"),y(l,"class","text-muted svelte-v7l6x1"),y(t,"class","stats-card svelte-v7l6x1")},m(u,h){D(u,t,h),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(t,a),v(t,l),c=!0},p:V,i(u){c||(N(o.$$.fragment,u),c=!0)},o(u){$(o.$$.fragment,u),c=!1},d(u){u&&R(t),K(o)}}}function I2(e){let t,n,s,i,r,o,a,l,c;return o=new h2({}),{c(){t=b("div"),n=b("div"),n.innerHTML=`<span class="material-icons-sharp svelte-v7l6x1">bar_chart</span> 
              <div><h3 class="svelte-v7l6x1">Monthly Users</h3></div>`,s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("small"),l.textContent="Last 6 Months",y(n,"class","top"),y(r,"class","progress responsive svelte-v7l6x1"),y(i,"class","middle svelte-v7l6x1"),y(l,"class","text-muted svelte-v7l6x1"),y(t,"class","stats-card svelte-v7l6x1")},m(u,h){D(u,t,h),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(t,a),v(t,l),c=!0},p:V,i(u){c||(N(o.$$.fragment,u),c=!0)},o(u){$(o.$$.fragment,u),c=!1},d(u){u&&R(t),K(o)}}}function P2(e){let t,n=e[5].message+"",s;return{c(){t=b("p"),s=Te(n)},m(i,r){D(i,t,r),v(t,s)},p:V,i:V,o:V,d(i){i&&R(t)}}}function M2(e){let t,n;return t=new Tl({props:{data:e[1],deleteItem:d0}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&2&&(r.data=s[1]),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function R2(e){let t;return{c(){t=b("p"),t.textContent="Loading orders..."},m(n,s){D(n,t,s)},p:V,i:V,o:V,d(n){n&&R(t)}}}function C2(e){let t,n,s={ctx:e,current:null,token:null,hasCatch:!0,pending:R2,then:M2,catch:P2,error:5,blocks:[,,,]};return Ti(e[2],s),{c(){t=yn(),s.block.c()},m(i,r){D(i,t,r),s.block.m(i,s.anchor=r),s.mount=()=>t.parentNode,s.anchor=t,n=!0},p(i,r){e=i,lo(s,e,r)},i(i){n||(N(s.block),n=!0)},o(i){for(let r=0;r<3;r+=1){const o=s.blocks[r];$(o)}n=!1},d(i){i&&R(t),s.block.d(i),s.token=null,s=null}}}function D2(e){let t,n,s,i;return s=new f0({}),{c(){t=b("h2"),t.textContent="Add New Product",n=L(),Q(s.$$.fragment),y(t,"class","add-new svelte-v7l6x1")},m(r,o){D(r,t,o),D(r,n,o),G(s,r,o),i=!0},p:V,i(r){i||(N(s.$$.fragment,r),i=!0)},o(r){$(s.$$.fragment,r),i=!1},d(r){r&&R(t),r&&R(n),K(s,r)}}}function O2(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g,m,p,_,w,T,S,E,I,A,x,k,Y,W,j,kt,wt,rt,lt,mt,Ot,At,be;r=new He({props:{fullHeight:!0,$$slots:{default:[k2]},$$scope:{ctx:e}}}),l=new He({props:{fullHeight:!0,$$slots:{default:[A2]},$$scope:{ctx:e}}}),h=new He({props:{fullHeight:!0,$$slots:{default:[I2]},$$scope:{ctx:e}}}),g=new S2({}),wt=new He({props:{$$slots:{default:[C2]},$$scope:{ctx:e}}});function tn(O){e[4](O)}let De={$$slots:{default:[D2]},$$scope:{ctx:e}};return e[0]!==void 0&&(De.showModal=e[0]),lt=new b2({props:De}),Ke.push(()=>al(lt,"showModal",tn)),{c(){t=b("div"),n=b("main"),s=b("div"),i=b("div"),Q(r.$$.fragment),o=L(),a=b("div"),Q(l.$$.fragment),c=L(),u=b("div"),Q(h.$$.fragment),d=L(),f=b("div"),Q(g.$$.fragment),m=L(),p=b("div"),_=b("h2"),_.textContent="Sales Analytics",w=L(),T=b("div"),T.innerHTML=`<div class="icon svelte-v7l6x1"><span class="material-icons-sharp">shopping_cart</span></div> 
        <div class="right svelte-v7l6x1"><div class="info svelte-v7l6x1"><h3>ONLINE ORDERS</h3> 
            <small class="text-muted">Last 24 Hours</small></div> 
          <h5 class="success">+39%</h5> 
          <h3>3849</h3></div>`,S=L(),E=b("div"),E.innerHTML=`<div class="icon svelte-v7l6x1"><span class="material-icons-sharp">local_mall</span></div> 
        <div class="right svelte-v7l6x1"><div class="info svelte-v7l6x1"><h3>OFFLINE ORDERS</h3> 
            <small class="text-muted">Last 24 Hours</small></div> 
          <h5 class="danger">-17%</h5> 
          <h3>1100</h3></div>`,I=L(),A=b("div"),A.innerHTML=`<div class="icon svelte-v7l6x1"><span class="material-icons-sharp">local_mall</span></div> 
        <div class="right svelte-v7l6x1"><div class="info svelte-v7l6x1"><h3>NEW CUSTOMERS</h3> 
            <small class="text-muted">Last 24 Hours</small></div> 
          <h5 class="success">+25%</h5> 
          <h3>849</h3></div>`,x=L(),k=b("button"),k.innerHTML=`<div class="svelte-v7l6x1"><span class="material-icons-sharp">add</span> 
          <h3 class="svelte-v7l6x1">Add Product</h3></div>`,Y=L(),W=b("div"),j=b("h2"),j.textContent="Recent Orders",kt=L(),Q(wt.$$.fragment),rt=L(),Q(lt.$$.fragment),y(i,"class","sales"),y(a,"class","expenses"),y(u,"class","income"),y(s,"class","insights svelte-v7l6x1"),y(n,"class","svelte-v7l6x1"),y(_,"class","accent-line svelte-v7l6x1"),y(T,"class","item online svelte-v7l6x1"),y(E,"class","item offline svelte-v7l6x1"),y(A,"class","item customers svelte-v7l6x1"),y(k,"class","item add-product svelte-v7l6x1"),y(p,"class","sales-analytics svelte-v7l6x1"),y(f,"class","right svelte-v7l6x1"),y(j,"class","accent-line svelte-v7l6x1"),y(W,"class","recent-orders svelte-v7l6x1"),y(t,"class","container svelte-v7l6x1")},m(O,nt){D(O,t,nt),v(t,n),v(n,s),v(s,i),G(r,i,null),v(s,o),v(s,a),G(l,a,null),v(s,c),v(s,u),G(h,u,null),v(t,d),v(t,f),G(g,f,null),v(f,m),v(f,p),v(p,_),v(p,w),v(p,T),v(p,S),v(p,E),v(p,I),v(p,A),v(p,x),v(p,k),v(t,Y),v(t,W),v(W,j),v(W,kt),G(wt,W,null),v(t,rt),G(lt,t,null),Ot=!0,At||(be=Tt(k,"click",e[3]),At=!0)},p(O,[nt]){const ze={};nt&64&&(ze.$$scope={dirty:nt,ctx:O}),r.$set(ze);const Ue={};nt&64&&(Ue.$$scope={dirty:nt,ctx:O}),l.$set(Ue);const Hi={};nt&64&&(Hi.$$scope={dirty:nt,ctx:O}),h.$set(Hi);const Yi={};nt&66&&(Yi.$$scope={dirty:nt,ctx:O}),wt.$set(Yi);const qs={};nt&64&&(qs.$$scope={dirty:nt,ctx:O}),!mt&&nt&1&&(mt=!0,qs.showModal=O[0],ol(()=>mt=!1)),lt.$set(qs)},i(O){Ot||(N(r.$$.fragment,O),N(l.$$.fragment,O),N(h.$$.fragment,O),N(g.$$.fragment,O),N(wt.$$.fragment,O),N(lt.$$.fragment,O),Ot=!0)},o(O){$(r.$$.fragment,O),$(l.$$.fragment,O),$(h.$$.fragment,O),$(g.$$.fragment,O),$(wt.$$.fragment,O),$(lt.$$.fragment,O),Ot=!1},d(O){O&&R(t),K(r),K(l),K(h),K(g),K(wt),K(lt),At=!1,be()}}}function V2(e,t,n){let s;ke(e,uo,l=>n(1,s=l));let i=!1,r=h0();const o=()=>n(0,i=!0);function a(l){i=l,n(0,i)}return[i,s,r,o,a]}class L2 extends Ct{constructor(t){super(),Rt(this,t,V2,O2,xt,{})}}function N2(e){let t,n,s;const i=e[3].default,r=Ns(i,e,e[2],null);return{c(){t=b("div"),r&&r.c(),y(t,"class",n="link "+(e[0]&&"active")+" "+(e[1]&&"disabled")+" svelte-1164tku")},m(o,a){D(o,t,a),r&&r.m(t,null),s=!0},p(o,[a]){r&&r.p&&(!s||a&4)&&$s(r,i,o,o[2],s?Fs(i,o[2],a,null):Bs(o[2]),null),(!s||a&3&&n!==(n="link "+(o[0]&&"active")+" "+(o[1]&&"disabled")+" svelte-1164tku"))&&y(t,"class",n)},i(o){s||(N(r,o),s=!0)},o(o){$(r,o),s=!1},d(o){o&&R(t),r&&r.d(o)}}}function F2(e,t,n){let{$$slots:s={},$$scope:i}=t,{active:r}=t,{disabled:o}=t;return e.$$set=a=>{"active"in a&&n(0,r=a.active),"disabled"in a&&n(1,o=a.disabled),"$$scope"in a&&n(2,i=a.$$scope)},[r,o,i,s]}class An extends Ct{constructor(t){super(),Rt(this,t,F2,N2,xt,{active:0,disabled:1})}}function or(e,t){e.classList.add("tooltip"),e.setAttribute("tabindex",0);function n(){const i=document.createElement("span");i.textContent=t,i.setAttribute("id","tooltip"),e.appendChild(i),e.addEventListener("mouseleave",s),e.addEventListener("blur",s),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}function s(){e.removeChild(e.querySelector("#tooltip")),e.removeEventListener("mouseleave",s),e.removeEventListener("blur",s),e.addEventListener("mouseenter",n),e.addEventListener("focus",n)}return e.addEventListener("mouseenter",n),e.addEventListener("focus",n),{onDestroy(){e.classList.remove("tooltip"),e.removeEventListener("mouseenter",n),e.removeEventListener("focus",n)}}}function $2(e){let t;return{c(){t=b("div"),t.innerHTML=`<span class="material-icons-sharp svelte-wodkly">view_kanban</span> 
        <h2 class="svelte-wodkly">Dashboard</h2>`,y(t,"class","logo svelte-wodkly")},m(n,s){D(n,t,s)},p:V,d(n){n&&R(t)}}}function B2(e){let t,n,s;return{c(){t=b("span"),t.textContent="dashboard",n=L(),s=b("h3"),s.textContent="Dashboard",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function z2(e){let t,n;return t=new An({props:{active:e[1],disabled:!1,$$slots:{default:[B2]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&2&&(r.active=s[1]),i&4&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function U2(e){let t,n,s;return{c(){t=b("span"),t.textContent="people",n=L(),s=b("h3"),s.textContent="Customers",y(t,"class","nav-link material-icons-sharp"),y(s,"class","nav-link svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function W2(e){let t,n;return t=new An({props:{active:e[1],disabled:!1,$$slots:{default:[U2]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&2&&(r.active=s[1]),i&4&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function j2(e){let t,n,s;return{c(){t=b("span"),t.textContent="receipt_long",n=L(),s=b("h3"),s.textContent="Orders",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function H2(e){let t,n;return t=new An({props:{active:e[1],disabled:!1,$$slots:{default:[j2]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&2&&(r.active=s[1]),i&4&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function Y2(e){let t,n,s;return{c(){t=b("span"),t.textContent="inventory",n=L(),s=b("h3"),s.textContent="Products",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function q2(e){let t,n;return t=new An({props:{active:e[1],disabled:!1,$$slots:{default:[Y2]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&2&&(r.active=s[1]),i&4&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function G2(e){let t,n,s;return{c(){t=b("span"),t.textContent="insights",n=L(),s=b("h3"),s.textContent="Analytics",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function K2(e){let t,n,s,i,r;return{c(){t=b("span"),t.textContent="mail_outline",n=L(),s=b("h3"),s.textContent="Messages",i=L(),r=b("span"),r.textContent="26",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly"),y(r,"class","message-count svelte-wodkly")},m(o,a){D(o,t,a),D(o,n,a),D(o,s,a),D(o,i,a),D(o,r,a)},p:V,d(o){o&&R(t),o&&R(n),o&&R(s),o&&R(i),o&&R(r)}}}function Q2(e){let t,n,s;return{c(){t=b("span"),t.textContent="description",n=L(),s=b("h3"),s.textContent="Reports",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function X2(e){let t,n,s;return{c(){t=b("span"),t.textContent="settings",n=L(),s=b("h3"),s.textContent="Settings",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function J2(e){let t,n,s;return{c(){t=b("span"),t.textContent="logout",n=L(),s=b("h3"),s.textContent="Log out",y(t,"class","material-icons-sharp"),y(s,"class","svelte-wodkly")},m(i,r){D(i,t,r),D(i,n,r),D(i,s,r)},p:V,d(i){i&&R(t),i&&R(n),i&&R(s)}}}function Z2(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g,m,p,_,w,T,S,E,I,A,x,k,Y,W,j,kt,wt,rt,lt,mt,Ot,At,be,tn,De;return s=new Ki({props:{to:"/",$$slots:{default:[$2]},$$scope:{ctx:e}}}),u=new Ki({props:{to:"/",$$slots:{default:[z2,({active:O})=>({1:O}),({active:O})=>O?2:0]},$$scope:{ctx:e}}}),f=new Ki({props:{to:"/customers",$$slots:{default:[W2,({active:O})=>({1:O}),({active:O})=>O?2:0]},$$scope:{ctx:e}}}),p=new Ki({props:{to:"/orders",$$slots:{default:[H2,({active:O})=>({1:O}),({active:O})=>O?2:0]},$$scope:{ctx:e}}}),T=new Ki({props:{to:"/products",$$slots:{default:[q2,({active:O})=>({1:O}),({active:O})=>O?2:0]},$$scope:{ctx:e}}}),I=new An({props:{active:!1,disabled:!0,$$slots:{default:[G2]},$$scope:{ctx:e}}}),k=new An({props:{active:!1,disabled:!0,$$slots:{default:[K2]},$$scope:{ctx:e}}}),j=new An({props:{active:!1,disabled:!0,$$slots:{default:[Q2]},$$scope:{ctx:e}}}),rt=new An({props:{active:!1,disabled:!0,$$slots:{default:[X2]},$$scope:{ctx:e}}}),Ot=new An({props:{active:!1,disabled:!0,$$slots:{default:[J2]},$$scope:{ctx:e}}}),{c(){t=b("div"),n=b("div"),Q(s.$$.fragment),i=L(),r=b("button"),r.innerHTML='<span class="material-icons-sharp">close</span>',o=L(),a=b("nav"),l=b("ul"),c=b("li"),Q(u.$$.fragment),h=L(),d=b("li"),Q(f.$$.fragment),g=L(),m=b("li"),Q(p.$$.fragment),_=L(),w=b("li"),Q(T.$$.fragment),S=L(),E=b("li"),Q(I.$$.fragment),A=L(),x=b("li"),Q(k.$$.fragment),Y=L(),W=b("li"),Q(j.$$.fragment),kt=L(),wt=b("li"),Q(rt.$$.fragment),lt=L(),mt=b("li"),Q(Ot.$$.fragment),y(r,"class","close svelte-wodkly"),y(r,"id","btn-close"),y(n,"class","top svelte-wodkly"),y(c,"class","svelte-wodkly"),y(d,"class","svelte-wodkly"),y(m,"class","svelte-wodkly"),y(w,"class","svelte-wodkly"),y(E,"class","svelte-wodkly"),y(x,"class","svelte-wodkly"),y(W,"class","svelte-wodkly"),y(wt,"class","svelte-wodkly"),y(mt,"class","svelte-wodkly"),y(a,"class","svelte-wodkly"),y(t,"class",At="sidebar "+(e[0]===!0?"show":"")+" svelte-wodkly")},m(O,nt){D(O,t,nt),v(t,n),G(s,n,null),v(n,i),v(n,r),v(t,o),v(t,a),v(a,l),v(l,c),G(u,c,null),v(l,h),v(l,d),G(f,d,null),v(l,g),v(l,m),G(p,m,null),v(l,_),v(l,w),G(T,w,null),v(l,S),v(l,E),G(I,E,null),v(l,A),v(l,x),G(k,x,null),v(l,Y),v(l,W),G(j,W,null),v(l,kt),v(l,wt),G(rt,wt,null),v(l,lt),v(l,mt),G(Ot,mt,null),be=!0,tn||(De=[Tt(r,"click",zu.toggle),qi(or.call(null,E,"Coming soon!")),qi(or.call(null,x,"Coming soon!")),qi(or.call(null,W,"Coming soon!")),qi(or.call(null,wt,"Coming soon!")),qi(or.call(null,mt,"Coming soon!"))],tn=!0)},p(O,[nt]){const ze={};nt&4&&(ze.$$scope={dirty:nt,ctx:O}),s.$set(ze);const Ue={};nt&6&&(Ue.$$scope={dirty:nt,ctx:O}),u.$set(Ue);const Hi={};nt&6&&(Hi.$$scope={dirty:nt,ctx:O}),f.$set(Hi);const Yi={};nt&6&&(Yi.$$scope={dirty:nt,ctx:O}),p.$set(Yi);const qs={};nt&6&&(qs.$$scope={dirty:nt,ctx:O}),T.$set(qs);const xd={};nt&4&&(xd.$$scope={dirty:nt,ctx:O}),I.$set(xd);const Sd={};nt&4&&(Sd.$$scope={dirty:nt,ctx:O}),k.$set(Sd);const kd={};nt&4&&(kd.$$scope={dirty:nt,ctx:O}),j.$set(kd);const Ad={};nt&4&&(Ad.$$scope={dirty:nt,ctx:O}),rt.$set(Ad);const Id={};nt&4&&(Id.$$scope={dirty:nt,ctx:O}),Ot.$set(Id),(!be||nt&1&&At!==(At="sidebar "+(O[0]===!0?"show":"")+" svelte-wodkly"))&&y(t,"class",At)},i(O){be||(N(s.$$.fragment,O),N(u.$$.fragment,O),N(f.$$.fragment,O),N(p.$$.fragment,O),N(T.$$.fragment,O),N(I.$$.fragment,O),N(k.$$.fragment,O),N(j.$$.fragment,O),N(rt.$$.fragment,O),N(Ot.$$.fragment,O),be=!0)},o(O){$(s.$$.fragment,O),$(u.$$.fragment,O),$(f.$$.fragment,O),$(p.$$.fragment,O),$(T.$$.fragment,O),$(I.$$.fragment,O),$(k.$$.fragment,O),$(j.$$.fragment,O),$(rt.$$.fragment,O),$(Ot.$$.fragment,O),be=!1},d(O){O&&R(t),K(s),K(u),K(f),K(p),K(T),K(I),K(k),K(j),K(rt),K(Ot),tn=!1,Re(De)}}}function tO(e,t,n){let s;return ke(e,zu,i=>n(0,s=i)),[s]}class eO extends Ct{constructor(t){super(),Rt(this,t,tO,Z2,xt,{})}}function nO(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g,m;return{c(){t=b("div"),n=b("button"),n.innerHTML='<span class="material-icons-sharp svelte-1iz48kx">menu</span>',s=L(),i=b("div"),r=b("span"),o=Te("light_mode"),l=L(),c=b("span"),u=Te("dark_mode"),d=L(),f=b("div"),f.innerHTML=`<div class="info"><p>Hey, <strong>User</strong></p> 
      <small class="text-muted">Admin</small></div> 
    <div class="profile-photo"><img src="/images/guest-profile.jpg" alt=""/></div>`,y(n,"id","menu-btn"),y(n,"class","svelte-1iz48kx"),y(r,"class",a="material-icons-sharp "+(e[0]===!1?"active":"")+" svelte-1iz48kx"),y(c,"class",h="material-icons-sharp "+(e[0]===!0?"active":"")+" svelte-1iz48kx"),y(i,"class","theme-toggler svelte-1iz48kx"),y(f,"class","profile svelte-1iz48kx"),y(t,"class","top svelte-1iz48kx")},m(p,_){D(p,t,_),v(t,n),v(t,s),v(t,i),v(i,r),v(r,o),v(i,l),v(i,c),v(c,u),v(t,d),v(t,f),g||(m=[Tt(n,"click",zu.toggle),Tt(i,"click",Uu.toggle)],g=!0)},p(p,[_]){_&1&&a!==(a="material-icons-sharp "+(p[0]===!1?"active":"")+" svelte-1iz48kx")&&y(r,"class",a),_&1&&h!==(h="material-icons-sharp "+(p[0]===!0?"active":"")+" svelte-1iz48kx")&&y(c,"class",h)},i:V,o:V,d(p){p&&R(t),g=!1,Re(m)}}}function sO(e,t,n){let s;return ke(e,Uu,i=>n(0,s=i)),[s]}class iO extends Ct{constructor(t){super(),Rt(this,t,sO,nO,xt,{})}}function rO(e){let t,n=e[2].message+"",s;return{c(){t=b("p"),s=Te(n)},m(i,r){D(i,t,r),v(t,s)},p:V,i:V,o:V,d(i){i&&R(t)}}}function oO(e){let t,n;return t=new Tl({props:{data:e[0],deleteItem:iP}}),{c(){Q(t.$$.fragment)},m(s,i){G(t,s,i),n=!0},p(s,i){const r={};i&1&&(r.data=s[0]),t.$set(r)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function aO(e){let t;return{c(){t=b("p"),t.textContent="Loading products..."},m(n,s){D(n,t,s)},p:V,i:V,o:V,d(n){n&&R(t)}}}function lO(e){let t,n,s={ctx:e,current:null,token:null,hasCatch:!0,pending:aO,then:oO,catch:rO,error:2,blocks:[,,,]};return Ti(e[1],s),{c(){t=yn(),s.block.c()},m(i,r){D(i,t,r),s.block.m(i,s.anchor=r),s.mount=()=>t.parentNode,s.anchor=t,n=!0},p(i,r){e=i,lo(s,e,r)},i(i){n||(N(s.block),n=!0)},o(i){for(let r=0;r<3;r+=1){const o=s.blocks[r];$(o)}n=!1},d(i){i&&R(t),s.block.d(i),s.token=null,s=null}}}function cO(e){let t,n,s,i;return s=new f0({}),{c(){t=b("h2"),t.textContent="Add New Product",n=L(),Q(s.$$.fragment),y(t,"class","svelte-gxcryu")},m(r,o){D(r,t,o),D(r,n,o),G(s,r,o),i=!0},p:V,i(r){i||(N(s.$$.fragment,r),i=!0)},o(r){$(s.$$.fragment,r),i=!1},d(r){r&&R(t),r&&R(n),K(s,r)}}}function uO(e){let t,n,s,i,r,o,a,l,c,u;return o=new He({props:{$$slots:{default:[lO]},$$scope:{ctx:e}}}),c=new He({props:{$$slots:{default:[cO]},$$scope:{ctx:e}}}),{c(){t=b("main"),n=b("h1"),n.textContent="Products",s=L(),i=b("div"),r=b("div"),Q(o.$$.fragment),a=L(),l=b("div"),Q(c.$$.fragment),y(n,"class","accent-line"),y(r,"class","table-container svelte-gxcryu"),y(l,"class","form-container svelte-gxcryu"),y(i,"class","container svelte-gxcryu"),y(t,"class","svelte-gxcryu")},m(h,d){D(h,t,d),v(t,n),v(t,s),v(t,i),v(i,r),G(o,r,null),v(i,a),v(i,l),G(c,l,null),u=!0},p(h,[d]){const f={};d&9&&(f.$$scope={dirty:d,ctx:h}),o.$set(f);const g={};d&8&&(g.$$scope={dirty:d,ctx:h}),c.$set(g)},i(h){u||(N(o.$$.fragment,h),N(c.$$.fragment,h),u=!0)},o(h){$(o.$$.fragment,h),$(c.$$.fragment,h),u=!1},d(h){h&&R(t),K(o),K(c)}}}function hO(e,t,n){let s;ke(e,cl,r=>n(0,s=r));let i=nP();return[s,i]}class dO extends Ct{constructor(t){super(),Rt(this,t,hO,uO,xt,{})}}function fO(e){let t,n,s,i,r,o,a,l,c,u,h,d,f,g;return n=new iO({}),i=new eO({}),a=new Do({props:{path:"/",component:L2}}),c=new Do({props:{path:"/customers",component:fP}}),h=new Do({props:{path:"/orders",component:xP}}),f=new Do({props:{path:"/products",component:dO}}),{c(){t=b("div"),Q(n.$$.fragment),s=L(),Q(i.$$.fragment),r=L(),o=b("div"),Q(a.$$.fragment),l=L(),Q(c.$$.fragment),u=L(),Q(h.$$.fragment),d=L(),Q(f.$$.fragment),y(o,"class","main-container svelte-1om33iw"),y(t,"class","container svelte-1om33iw")},m(m,p){D(m,t,p),G(n,t,null),v(t,s),G(i,t,null),v(t,r),v(t,o),G(a,o,null),v(o,l),G(c,o,null),v(o,u),G(h,o,null),v(o,d),G(f,o,null),g=!0},p:V,i(m){g||(N(n.$$.fragment,m),N(i.$$.fragment,m),N(a.$$.fragment,m),N(c.$$.fragment,m),N(h.$$.fragment,m),N(f.$$.fragment,m),g=!0)},o(m){$(n.$$.fragment,m),$(i.$$.fragment,m),$(a.$$.fragment,m),$(c.$$.fragment,m),$(h.$$.fragment,m),$(f.$$.fragment,m),g=!1},d(m){m&&R(t),K(n),K(i),K(a),K(c),K(h),K(f)}}}function gO(e){let t,n,s,i;return n=new nb({props:{url:e[0],$$slots:{default:[fO]},$$scope:{ctx:e}}}),{c(){t=b("div"),Q(n.$$.fragment),y(t,"id","dashboard"),y(t,"class",s=Cd(e[1]===!0&&"dark")+" svelte-1om33iw")},m(r,o){D(r,t,o),G(n,t,null),i=!0},p(r,[o]){const a={};o&1&&(a.url=r[0]),o&4&&(a.$$scope={dirty:o,ctx:r}),n.$set(a),(!i||o&2&&s!==(s=Cd(r[1]===!0&&"dark")+" svelte-1om33iw"))&&y(t,"class",s)},i(r){i||(N(n.$$.fragment,r),i=!0)},o(r){$(n.$$.fragment,r),i=!1},d(r){r&&R(t),K(n)}}}function pO(e,t,n){let s;ke(e,Uu,r=>n(1,s=r));let{url:i}=t;return e.$$set=r=>{"url"in r&&n(0,i=r.url)},[i,s]}class mO extends Ct{constructor(t){super(),Rt(this,t,pO,gO,xt,{url:0})}}new mO({target:document.getElementById("app")})});export default _O();
